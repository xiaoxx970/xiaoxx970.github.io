{"meta":{"version":1,"warehouse":"4.0.1"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/css/noscript.styl","path":"css/noscript.styl","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/comments.js","path":"js/comments.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/config.js","path":"js/config.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/pjax.js","path":"js/pjax.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schedule.js","path":"js/schedule.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/rating.js","path":"js/third-party/rating.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/gitter.js","path":"js/third-party/chat/gitter.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":0,"renderable":1},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/raspi-init.sh","path":"raspi-init.sh","modified":0,"renderable":0},{"_id":"source/uploads/avatar.jpg","path":"uploads/avatar.jpg","modified":0,"renderable":0},{"_id":"source/images/favicon/android-chrome-192x192.png","path":"images/favicon/android-chrome-192x192.png","modified":0,"renderable":0},{"_id":"source/images/favicon/apple-touch-icon.png","path":"images/favicon/apple-touch-icon.png","modified":0,"renderable":0},{"_id":"source/images/favicon/browserconfig.xml","path":"images/favicon/browserconfig.xml","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon-16x16.png","path":"images/favicon/favicon-16x16.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon-32x32.png","path":"images/favicon/favicon-32x32.png","modified":0,"renderable":0},{"_id":"source/images/favicon/android-chrome-512x512.png","path":"images/favicon/android-chrome-512x512.png","modified":0,"renderable":0},{"_id":"source/images/favicon/favicon.ico","path":"images/favicon/favicon.ico","modified":0,"renderable":0},{"_id":"source/images/favicon/mstile-150x150.png","path":"images/favicon/mstile-150x150.png","modified":0,"renderable":0},{"_id":"source/images/favicon/safari-pinned-tab.svg","path":"images/favicon/safari-pinned-tab.svg","modified":0,"renderable":0},{"_id":"source/images/favicon/site.webmanifest","path":"images/favicon/site.webmanifest","modified":0,"renderable":0}],"Cache":[{"_id":"source/raspi-init.sh","hash":"9034455b9c1b6dc583c9d930c46e663fa039f705","modified":1654274480646},{"_id":"source/CNAME","hash":"c3be04a7e84e283558a1b243bb592fb0fbc48ea7","modified":1654274480461},{"_id":"source/_posts/Wechat-vip-info-export.md","hash":"d50640eb9a944ed6362fecf42d066be037622c36","modified":1654274480462},{"_id":"source/.DS_Store","hash":"ab4108532c23aba3fe730afa8337695abaf3b776","modified":1654274480460},{"_id":"source/_posts/hackintosh-of-yoga710.md","hash":"c518067b7c1cd1ab667b6733f923e58a62057564","modified":1654274480467},{"_id":"source/_posts/frp-for-mc.md","hash":"928893d18fb4754a30c02b7b248d33cc12763b6c","modified":1654274480466},{"_id":"source/_posts/miui-eu.md","hash":"8909052f3d5fe1b4ee22034ed99b8d0269a65f38","modified":1654274480632},{"_id":"source/_posts/caddy-ws-v2ray.md","hash":"66f3803d7efad65cee30c17305228f52e01c7f8d","modified":1654274480466},{"_id":"source/_posts/raspberrypi-how.md","hash":"48734a1bc63b286e77317d0ddad7d997890f5442","modified":1654274480641},{"_id":"source/_drafts/frp-init-script.md","hash":"1f83241cfc073fe52f55dcba842cb8fb029f1f47","modified":1654274480462},{"_id":"source/_posts/.DS_Store","hash":"5a6769e7d8f712b7a36b5c92643d53913d7b9790","modified":1654274480462},{"_id":"source/_posts/wechat-vip-how-to.md","hash":"2dff6f72c63d257db416946684114be6fa908575","modified":1654274480641},{"_id":"source/_posts/关于coding和git的折腾.md","hash":"921f6e8af2899ee92ced43641f75d12f17580e11","modified":1654274480641},{"_id":"source/_posts/orangepi折腾记录.md","hash":"997543de520f3ff00c6b39e5b3733d0dfdbf9ab0","modified":1654274480641},{"_id":"source/_posts/nginx建立TCP代理.md","hash":"71fdec184573b52c2a6038d30580b634b6671cc7","modified":1654274480641},{"_id":"source/_data/head.swig","hash":"a5f75c21a1caf4eaf78dbc4d5b7d827a45902551","modified":1654274480461},{"_id":"source/_posts/open-your-farvorite-editor-after-new-hexo-post.md","hash":"9e5669d25e6faa781e9117f9c0115af2f032b4ce","modified":1654274480641},{"_id":"source/_posts/把时间当作朋友_笔记.md","hash":"bb69282b354cdd6b55a9cc2966d17828bd1ad74e","modified":1654274480641},{"_id":"source/_data/styles.styl","hash":"f8b01f33e6e19811e90d59d0537bd4003270f593","modified":1654414564533},{"_id":"source/about/index.md","hash":"1c951bb6628f71e96dfb916a7e8d8824abaa6a8c","modified":1654274480641},{"_id":"source/images/.DS_Store","hash":"dee9e4c70b226adee17106d85837969bd93e67d7","modified":1654274480642},{"_id":"source/tags/index.md","hash":"4f381257662522b235ed1156c13aca0a7d950fee","modified":1654274480646},{"_id":"source/uploads/autosize.js","hash":"6bac427b54743b075b488cd5ca5999eda0f30077","modified":1654274480647},{"_id":"source/_posts/Wechat-vip-info-export/csv.png","hash":"ce97f2d0974e811472806003c09e839259dfa8b6","modified":1654274480463},{"_id":"source/_posts/Wechat-vip-info-export/console1.png","hash":"099e583b70b1bf5c4307f344f19e6a7dfc6190ba","modified":1654274480463},{"_id":"source/uploads/canvas-ribbon.js","hash":"70d789f50f8d1bba34897887f42d1f59647431b0","modified":1654274480648},{"_id":"source/_posts/use-octodash-on-your-android-phone.md","hash":"e444bb67b69d039d1a79b812be6f1a5deeceea91","modified":1654357495180},{"_id":"source/_posts/Wechat-vip-info-export/info_array.png","hash":"15d7afa30586c22792d6031d5e534798c2de22fd","modified":1654274480464},{"_id":"source/_posts/Wechat-vip-info-export/info_es.png","hash":"2b069060dcf763787500579d9e9c869062f4d16b","modified":1654274480465},{"_id":"source/_posts/hackintosh-of-yoga710/.DS_Store","hash":"0039f155e1f393841d70055076ae048991d3daee","modified":1654274480467},{"_id":"source/_posts/miui-eu/screen1.jpg","hash":"ff497a290f30acc4669303e682d62ab7e13ba440","modified":1654274480640},{"_id":"source/_posts/use-octodash-on-your-android-phone/332-OctoDashSetup-01.png","hash":"ce711eb7fe9c9bc42c56190ebd1ddcaf7b2b527f","modified":1654354698317},{"_id":"source/images/favicon/browserconfig.xml","hash":"8288172318a8146731611227940aaebe3e13b39e","modified":1654274480645},{"_id":"source/images/favicon/favicon-16x16.png","hash":"a3185c384248afdcdb406af260a4f3dade24eba4","modified":1654274480645},{"_id":"source/images/favicon/favicon-32x32.png","hash":"5fdacf3ae2ab0cdcaee0c5974d0ac9ed4ecce44d","modified":1654274480645},{"_id":"source/images/favicon/android-chrome-192x192.png","hash":"8e0f488713aa8194a66fc2ef2920a2cba93c33bb","modified":1654274480642},{"_id":"source/images/favicon/apple-touch-icon.png","hash":"1c033d26b1305d376d0a00be87a666cb621cd1b2","modified":1654274480645},{"_id":"source/images/favicon/favicon.ico","hash":"4c64266449611a00ff7d545d3548bde2762978a2","modified":1654274480645},{"_id":"source/images/favicon/site.webmanifest","hash":"8d652a5e2800864dc5018ca54711d9f6c798653a","modified":1654274480646},{"_id":"source/images/favicon/safari-pinned-tab.svg","hash":"81f5312372789bfa55f0dd361c30220424eabddb","modified":1654274480646},{"_id":"source/images/favicon/mstile-150x150.png","hash":"644349ee623dee06d1902cf72083b4b537d9deb4","modified":1654274480645},{"_id":"source/uploads/avatar.jpg","hash":"13679f80c715a47dd7b258145007c4088f372d24","modified":1654274480647},{"_id":"source/_posts/miui-eu/git-clone.jpg","hash":"32eb237145b0d94bc6053087327e18695f8c24df","modified":1654274480637},{"_id":"source/_posts/miui-eu/bat-run.jpg","hash":"0fd156c96292397f056ad15b803cd2b8884ac003","modified":1654274480635},{"_id":"source/_posts/miui-eu/mipay-extract.jpg","hash":"0a5ef7f9583ee2f6c925a4750794c5d3f3860aae","modified":1654274480639},{"_id":"source/_posts/miui-eu/screen.png","hash":"f17cc0b7b24014b02f12815c61261d1f64e831e8","modified":1654274480640},{"_id":"source/_posts/Wechat-vip-info-export/会员详情页面.png","hash":"bf1a708e1c5da9bb27ab89519f6380bafd6b1211","modified":1654274480466},{"_id":"source/_posts/use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg","hash":"46c2002170a7dbdaaf48a35b3aeae40476328bfa","modified":1654261548878},{"_id":"source/images/favicon/android-chrome-512x512.png","hash":"4ab5a0d5e1c71b2a4211cacfba868c208a7a404f","modified":1654274480645},{"_id":"themes/next/.gitattributes","hash":"ec43734985e1cafd53d88ded3020103f7416123c","modified":1654275500580},{"_id":"themes/next/.eslintrc.json","hash":"9c0762486f24a8c5e60f8b6c875e4c4728942649","modified":1654275500580},{"_id":"themes/next/.gitignore","hash":"417520c4dbbeab9c7e3ab10d944da0886366a0ee","modified":1654275500582},{"_id":"themes/next/_config.yml","hash":"ca90890962fd3d003f68cc710e3dc1f9161e5ce5","modified":1654416639321},{"_id":"themes/next/_vendors.yml","hash":"8c2886a6af624f04fc6a376daf48c0698ea71bf7","modified":1654275500583},{"_id":"themes/next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1654275500583},{"_id":"themes/next/package.json","hash":"b32be32269dd2e241790a766a60357bfe13f2d45","modified":1654275500594},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1654275500580},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1654275500582},{"_id":"themes/next/README.md","hash":"56638e4978154a2f2a3f03ba84047b77b4a499cc","modified":1654275500583},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"21cbff565a0445d3a880fff1ee417e309740a9ab","modified":1654275500581},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"330656d93b6c03df9fb1f2f0e3534c971969473b","modified":1654275500581},{"_id":"themes/next/.github/config.yml","hash":"7984e665e9de481a0e0e51fca5668337713f810b","modified":1654275500581},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"3e9fbb78e3dee0ca1dc886d0c28b0148ba0ca499","modified":1654275500581},{"_id":"themes/next/.github/label-commenter-config.yml","hash":"1097fc47beeacfc1edb0248c27b17bf64bde3565","modified":1654275500582},{"_id":"themes/next/renovate.json","hash":"cb29cc16e61b0b8a6dac34657d76822ae29ad5aa","modified":1654275500594},{"_id":"themes/next/.github/labeler.yml","hash":"5c4bc2bd561e6d9b33ee118cc12218c5de46f72d","modified":1654275500582},{"_id":"themes/next/.github/release-drafter.yml","hash":"423275ec021104b263cd88776936a8c8d6872b66","modified":1654275500582},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1654275500581},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1654275500583},{"_id":"themes/next/.githooks/install.js","hash":"4d77dbddf2eac1f3fc78f151d12ed22208ed655b","modified":1654275500580},{"_id":"themes/next/.githooks/pre-commit","hash":"f473eac1aaaa96c947d67988bbed140bbab1a821","modified":1654275500580},{"_id":"themes/next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1654275500584},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1654275500584},{"_id":"themes/next/languages/bn.yml","hash":"fccbf2855392186e11daa8590121073594037b7b","modified":1654275500585},{"_id":"themes/next/languages/default.yml","hash":"814d81c27fed736055ee300e0a6505b26ff4313c","modified":1654275500585},{"_id":"themes/next/languages/en.yml","hash":"814d81c27fed736055ee300e0a6505b26ff4313c","modified":1654275500585},{"_id":"themes/next/languages/de.yml","hash":"4be7b8b76c81bf1853eb36d2e874b17546a0e792","modified":1654275500585},{"_id":"themes/next/languages/ar.yml","hash":"bca66db21c015dbd32970d8708b898518a773e1e","modified":1654275500585},{"_id":"themes/next/languages/fr.yml","hash":"b15dc05afdc94de02e5d3fee4f8d3dc5594dd37e","modified":1654275500585},{"_id":"themes/next/languages/id.yml","hash":"14e794db4eca36b257994d81eb513e61d1edcbd6","modified":1654275500585},{"_id":"themes/next/languages/it.yml","hash":"c1eeab4992c76bfd436bb205ce58b1cfeef55ee6","modified":1654275500586},{"_id":"themes/next/languages/es.yml","hash":"b813da5aed9d73b809133db4dfb08f90ec56afd9","modified":1654275500585},{"_id":"themes/next/languages/ja.yml","hash":"d48c4157e0e02e847aac7b513580d3364c81948c","modified":1654275500586},{"_id":"themes/next/languages/fa.yml","hash":"6456d40dd42f44101d9d6e7054e9884e9163f948","modified":1654275500585},{"_id":"themes/next/languages/nl.yml","hash":"ecb8e39c6225f3c068a5fdd569ee7dafd5c41a1f","modified":1654275500586},{"_id":"themes/next/languages/ko.yml","hash":"819c19eb9d142e5411f77cf3821d90f740ee114a","modified":1654275500586},{"_id":"themes/next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1654275500584},{"_id":"themes/next/languages/pt-BR.yml","hash":"a1f27b3a592fc58f17d247f5563ff4a90a3da5f2","modified":1654275500586},{"_id":"themes/next/languages/ru.yml","hash":"8c2b6361f2de17561c1a3eede2bf47b4e2ba6ce5","modified":1654275500586},{"_id":"themes/next/languages/pt.yml","hash":"63a3e1e728ba5e6e22150de7331bb8a654f34960","modified":1654275500586},{"_id":"themes/next/languages/si.yml","hash":"615d18d044f44df476d6bfbf73f7b0edc2632168","modified":1654275500586},{"_id":"themes/next/languages/tk.yml","hash":"519239e35c3bda7b62b00ff5d34644f45b16fe6a","modified":1654275500586},{"_id":"themes/next/languages/uk.yml","hash":"7dd24580c0865c5a7bc4d391855045366a598936","modified":1654275500587},{"_id":"themes/next/languages/tr.yml","hash":"0bebba73d6f06c7dad61f80c0d7ad5f6f1791a01","modified":1654275500587},{"_id":"themes/next/languages/vi.yml","hash":"c669c34da544a563ceae3e196addc9df6a78e024","modified":1654275500587},{"_id":"themes/next/languages/zh-CN.yml","hash":"5a3ab21210304efef736e96bad254f789f42c567","modified":1654275500587},{"_id":"themes/next/languages/zh-HK.yml","hash":"f195bb0502ffe66e850077a1af1033455ea65f93","modified":1654275500587},{"_id":"themes/next/languages/zh-TW.yml","hash":"92256b90028de9a1e79c6bc0e5885b93e7fb4b17","modified":1654275500587},{"_id":"themes/next/layout/_layout.njk","hash":"20e4160cd0deb4fa272cc3aed0f43520b3cf4a9c","modified":1654275500587},{"_id":"themes/next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1654275500594},{"_id":"themes/next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1654275500594},{"_id":"themes/next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1654275500594},{"_id":"themes/next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1654275500594},{"_id":"themes/next/layout/page.njk","hash":"6c40aa438c658eb7f0cd0f6a759f18b43e7e8f93","modified":1654275500594},{"_id":"themes/next/layout/post.njk","hash":"6abeb85fb3e4c382ed4bb6049b12a807e6226e67","modified":1654275500594},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"fc4dce84ed9a5d21d3a8833ff6d776c46f876115","modified":1654275500581},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"4ecac91716eac59d7c2bc53cf6e95612d44da97b","modified":1654275500581},{"_id":"themes/next/.github/workflows/labeler.yml","hash":"e9d51e93f239a2d4b69722c69db3463b4baf0f4c","modified":1654275500582},{"_id":"themes/next/.github/workflows/label-commenter.yml","hash":"434cc0674290958b1e9bbc46c3486f073c0722db","modified":1654275500582},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"8cc5b5c116f6a052865a324512362f145d699202","modified":1654275500581},{"_id":"themes/next/.github/ISSUE_TEMPLATE/config.yml","hash":"c40ae7903b6cc99f94c9d45ac7ba8c2850bb1309","modified":1654275500581},{"_id":"themes/next/.github/workflows/linter.yml","hash":"b6c111344bc0f3500ca69d7590791ff85ef1090d","modified":1654275500582},{"_id":"themes/next/.github/workflows/lock.yml","hash":"e48d1ced9a673d3f0911a700d3e68c0f4ca79263","modified":1654275500582},{"_id":"themes/next/test/index.js","hash":"6bf0289846538be3e9a63809af98f00e1fbdd90b","modified":1654275500612},{"_id":"themes/next/.github/workflows/release-drafter.yml","hash":"4f3af81009cb922be91f718a67425377515ea69d","modified":1654275500582},{"_id":"themes/next/.github/workflows/tester.yml","hash":"80a20c3a7522249f051a48239db41d1317e9b552","modified":1654275500582},{"_id":"themes/next/docs/ru/README.md","hash":"6c82bfd2ec8248c248da701f091b548a7a133580","modified":1654275500584},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1654275500584},{"_id":"themes/next/docs/zh-CN/README.md","hash":"ccf27b9249524b9fec1c15497b4353c8d1748c6c","modified":1654275500584},{"_id":"themes/next/layout/_macro/sidebar.njk","hash":"eb786e8b35e354287cda345c524cd35ec955f692","modified":1654275500588},{"_id":"themes/next/layout/_macro/post-collapse.njk","hash":"1a30d751871dabfa80940042ddb1f77d07d830b9","modified":1654275500588},{"_id":"themes/next/layout/_macro/post.njk","hash":"434b3e76a040a816169e1929657e4176e7b8164c","modified":1654275500588},{"_id":"themes/next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1654275500589},{"_id":"themes/next/layout/_partials/comments.njk","hash":"d0c470b0f6690aa217e9ada848c5e2e73fb27c6f","modified":1654275500588},{"_id":"themes/next/layout/_partials/pagination.njk","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1654275500590},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7a06d443f374bd1e84294067a0ac796afd9fbe60","modified":1654275500584},{"_id":"themes/next/layout/_partials/footer.njk","hash":"19713f472972caac33ae5fbcfe9105da61257de4","modified":1654275500588},{"_id":"themes/next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1654275500592},{"_id":"themes/next/layout/_scripts/vendors.njk","hash":"be80b9fe415a9a09d74c28e230995fd292dfc123","modified":1654275500591},{"_id":"themes/next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1654275500593},{"_id":"themes/next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1654275500593},{"_id":"themes/next/layout/_third-party/rating.njk","hash":"1bcdbc7fde26d6d9ef4e7fa43ffcff5a9506b20e","modified":1654275500593},{"_id":"themes/next/layout/_partials/widgets.njk","hash":"852a750524decf1efa587cd52b09e387ed8315de","modified":1654275500591},{"_id":"themes/next/layout/_third-party/index.njk","hash":"d41eeb262978e34de4679d8971a9e7ac5d90ecbc","modified":1654275500592},{"_id":"themes/next/test/helpers/font.js","hash":"342ef3c6fd2dcca2a8802a516ed6d7f389fd2ca2","modified":1654275500612},{"_id":"themes/next/layout/_scripts/index.njk","hash":"6668878a0f9a1166c6a879755f54a08d942da870","modified":1654275500591},{"_id":"themes/next/test/helpers/index.js","hash":"63ba28afed697f7b3574436b1133b8ecc9c0c357","modified":1654275500612},{"_id":"themes/next/test/tags/button.js","hash":"48f2aa4c513e9e24bd6a811410520b74cd7ea88b","modified":1654275500612},{"_id":"themes/next/test/helpers/next-url.js","hash":"a91d880cb75e0a8e65a7be4c7362b2c8ebfb7c4f","modified":1654275500612},{"_id":"themes/next/test/tags/caniuse.js","hash":"aa5e728445caeaf7c2ccd0f3fcb2cad0c93ca6d1","modified":1654275500612},{"_id":"themes/next/test/tags/center-quote.js","hash":"7667342fd1a1417eaf6a254012b84ae40e8d13dd","modified":1654275500613},{"_id":"themes/next/test/tags/group-pictures.js","hash":"5c68ae0184f9da6e00ba199f2554d503d8e6da71","modified":1654275500613},{"_id":"themes/next/test/tags/index.js","hash":"e8779e54f0979b221858f8bb74dd081bb503b910","modified":1654275500613},{"_id":"themes/next/test/tags/label.js","hash":"4ebf3698c258ca978b997acbdd0dece44069c09d","modified":1654275500613},{"_id":"themes/next/test/tags/note.js","hash":"3dcfcd65bf9f326972ea7571fdb1444200f5d07e","modified":1654275500613},{"_id":"themes/next/test/tags/link-grid.js","hash":"43d298fafb7c45a874b766d443843bd26346e689","modified":1654275500613},{"_id":"themes/next/test/tags/pdf.js","hash":"fd6ea5123560a90f7e7c1eface23dbe1455db25f","modified":1654275500613},{"_id":"themes/next/scripts/events/index.js","hash":"3ce10d4cce94e3d4c482c2e18bb6f0f0ca380d3d","modified":1654275500594},{"_id":"themes/next/test/tags/mermaid.js","hash":"ab77be5f3c6d9a57c7b9dda6decf1906a736fef9","modified":1654275500613},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1654275500596},{"_id":"themes/next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1654275500596},{"_id":"themes/next/scripts/filters/minify.js","hash":"f160e39943e39d7276da86adb47c3f08e5f22c7a","modified":1654275500596},{"_id":"themes/next/scripts/filters/post.js","hash":"30e03a1d4828259f82d46e64cbfe2955b6cff9a9","modified":1654275500596},{"_id":"themes/next/scripts/helpers/engine.js","hash":"d292b78485e8e8055712b0ed6de7cf559c5fbdcd","modified":1654275500596},{"_id":"themes/next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1654275500596},{"_id":"themes/next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1654275500596},{"_id":"themes/next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1654275500584},{"_id":"themes/next/test/tags/tabs.js","hash":"d63722919f9da2e44d6b952801e10a2915ea9c12","modified":1654275500613},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"226fccbe9c93265e65a300e3cb4bf6f9065cfdd7","modified":1654275500597},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"afdd6a188a74c188f0dd154fac70efd4080ca262","modified":1654275500597},{"_id":"themes/next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1654275500597},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1654275500597},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1654275500597},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"9ed799c329abf830f623689d7e136991256a24ca","modified":1654275500597},{"_id":"themes/next/scripts/tags/index.js","hash":"17f9451ce1f10f78437f52218757d38d4e1591b0","modified":1654275500597},{"_id":"themes/next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1654275500597},{"_id":"themes/next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1654275500597},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"4fb01ca650fa8b256b8d48f50dc1b18350bd3d6d","modified":1654275500598},{"_id":"themes/next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1654275500598},{"_id":"themes/next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1654275500598},{"_id":"themes/next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1654275500598},{"_id":"themes/next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1654275500598},{"_id":"themes/next/source/css/_mixins.styl","hash":"32d31cb5a155681c19f5ad0bb56dcb08429f93ef","modified":1654275500605},{"_id":"themes/next/source/css/_colors.styl","hash":"3c6798c10cc220d83481cb3f3782e78558cee789","modified":1654275500598},{"_id":"themes/next/test/tags/video.js","hash":"b796fc4dceb20a30e730c322bb5474c0162464cc","modified":1654275500613},{"_id":"themes/next/test/validate/index.js","hash":"5a95ccc8598667535bd022e988055c0e019f3670","modified":1654275500613},{"_id":"themes/next/source/css/noscript.styl","hash":"263eddabfae40e54c0591e7baa8403ade8cdd56d","modified":1654275500607},{"_id":"themes/next/source/css/main.styl","hash":"78ce791cc4ac95386cf6839ca72f5f7b51f86ee9","modified":1654275500607},{"_id":"themes/next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1654275500608},{"_id":"themes/next/source/js/bookmark.js","hash":"0f563ffbf05fad30e854e413ab17ff7164ab5a53","modified":1654275500608},{"_id":"themes/next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1654275500608},{"_id":"themes/next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1654275500608},{"_id":"themes/next/source/js/motion.js","hash":"f7c825cbff11885fa0dffa64824fd00e505d6a8d","modified":1654275500608},{"_id":"themes/next/source/js/next-boot.js","hash":"da0f07f9eaaa83de70128b0feaea3fdadb90457a","modified":1654275500608},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"a11b71ba0c5012e2cdcab31c15439156b215563e","modified":1654275500597},{"_id":"themes/next/source/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1654275500609},{"_id":"themes/next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1654275500607},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1654275500607},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1654275500608},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1654275500607},{"_id":"themes/next/source/images/logo.svg","hash":"2cb74fd3ea2635e015eabc58a8d488aed6cf6417","modified":1654275500608},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1654275500608},{"_id":"themes/next/layout/_partials/header/menu-item.njk","hash":"41a8b0cc16f60fa085cb719d07216d86b6bc4bf8","modified":1654275500589},{"_id":"themes/next/layout/_partials/head/head.njk","hash":"0ba2bf0266f1fcb8edbd961869f8521b29685c56","modified":1654275500589},{"_id":"themes/next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1654275500589},{"_id":"themes/next/layout/_partials/head/head-unique.njk","hash":"8da52a144060db1a0a088ccb2e6cc8376d1fce70","modified":1654275500588},{"_id":"themes/next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1654275500589},{"_id":"themes/next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1654275500589},{"_id":"themes/next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1654275500589},{"_id":"themes/next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1654275500590},{"_id":"themes/next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1654275500590},{"_id":"themes/next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1654275500589},{"_id":"themes/next/layout/_partials/header/brand.njk","hash":"aff4613756456be26415febc668860fdab8d33c5","modified":1654275500589},{"_id":"themes/next/source/js/pjax.js","hash":"919f5281c4a04d11cfd94573ecf57b3dbabd3cc8","modified":1654275500609},{"_id":"themes/next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1654275500590},{"_id":"themes/next/layout/_partials/post/post-copyright.njk","hash":"133942922e34abae9e4de7ea5591d77c0caa4b37","modified":1654275500590},{"_id":"themes/next/source/js/utils.js","hash":"200088bfd042f5304b2a04befab0829148845e0e","modified":1654275500612},{"_id":"themes/next/layout/_partials/post/post-footer.njk","hash":"bde2c7356d9362972bde41cc206d5816f8ed714d","modified":1654275500590},{"_id":"themes/next/layout/_partials/post/post-followme.njk","hash":"154df0bb323c332d8c25343f258ee865e5553423","modified":1654275500590},{"_id":"themes/next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1654275500590},{"_id":"themes/next/layout/_partials/post/post-related.njk","hash":"57eca76cfbbe9a65bc2a77f1deebf003ed335673","modified":1654275500590},{"_id":"themes/next/layout/_partials/search/index.njk","hash":"8f6f256ab3b351ffc80f1f3f1d9834e9a7cfac31","modified":1654275500591},{"_id":"themes/next/layout/_partials/search/localsearch.njk","hash":"661f7acae43f0be694266323320f977d84119abe","modified":1654275500591},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1654275500591},{"_id":"themes/next/layout/_partials/sidebar/site-overview.njk","hash":"3d8591bb92df77ceb9d5b07bc76da1ca89e5bd76","modified":1654275500591},{"_id":"themes/next/layout/_partials/search/algolia-search.njk","hash":"efb2b6f19df02ba5ae623a1f274fff52aed21e6f","modified":1654275500590},{"_id":"themes/next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1654275500591},{"_id":"themes/next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"9dc00fcb0a05899f048eace9f9160b78956655d5","modified":1654275500592},{"_id":"themes/next/layout/_partials/post/post-reward.njk","hash":"002b51d0cae3f2e2e008bdc58be90c728282de5b","modified":1654275500590},{"_id":"themes/next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1654275500591},{"_id":"themes/next/layout/_third-party/analytics/index.njk","hash":"45477a04cf2b3c077061c8c3ada216c1ae288e0e","modified":1654275500591},{"_id":"themes/next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1654275500593},{"_id":"themes/next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1654275500592},{"_id":"themes/next/layout/_third-party/chat/gitter.njk","hash":"f8cc14b7aa949999a1faaeb7855e2f20b59a386d","modified":1654275500592},{"_id":"themes/next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1654275500592},{"_id":"themes/next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1654275500593},{"_id":"themes/next/layout/_third-party/math/katex.njk","hash":"d82c24136bbd3443b85f07f5579845833b594684","modified":1654275500593},{"_id":"themes/next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1654275500592},{"_id":"themes/next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1654275500592},{"_id":"themes/next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1654275500592},{"_id":"themes/next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1654275500592},{"_id":"themes/next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1654275500594},{"_id":"themes/next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1654275500592},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1654275500591},{"_id":"themes/next/layout/_third-party/search/algolia-search.njk","hash":"24ed76e0c72a25ac152820c750a05826a706b6f4","modified":1654275500593},{"_id":"themes/next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1654275500594},{"_id":"themes/next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1654275500593},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1654275500593},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1654275500593},{"_id":"themes/next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1654275500593},{"_id":"themes/next/scripts/events/lib/config.js","hash":"c8b59b404f5d2a0b3b5cd1a6c9a10af5f30e43b5","modified":1654275500595},{"_id":"themes/next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1654275500592},{"_id":"themes/next/scripts/events/lib/highlight.js","hash":"6aec7b2c38c50989a23bfaa0d560e75c7f553e12","modified":1654275500595},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1654275500595},{"_id":"themes/next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1654275500595},{"_id":"themes/next/scripts/events/lib/utils.js","hash":"ec996d0673f766167c86df0966e9da1ae036e103","modified":1654275500595},{"_id":"themes/next/scripts/events/lib/vendors.js","hash":"64e4024376b51fe81be7ad80235abdf0a83853bd","modified":1654275500595},{"_id":"themes/next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1654275500593},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1654275500595},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"7fa8701c86485b2fe7324e017101a32417902397","modified":1654275500595},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1654275500595},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"135b87d151055eefdbc711d9e704b112b3214a84","modified":1654275500595},{"_id":"themes/next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1654275500592},{"_id":"themes/next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1654275500596},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1654275500596},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1654275500596},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1654275500595},{"_id":"themes/next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1654275500596},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1654275500607},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e1fbf169b9b6a194b518240cbd06ec3c48b83d61","modified":1654275500607},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"e3be898f5ebcf435a26542653a9297ff2c71aeb0","modified":1654275500607},{"_id":"themes/next/source/css/_variables/base.styl","hash":"163c7441d777bee87042d475e6ce0fde199add28","modified":1654275500607},{"_id":"themes/next/source/js/schemes/muse.js","hash":"9794bd4fc6a458322949d6a0ade89cd1026bc69f","modified":1654275500609},{"_id":"themes/next/source/js/third-party/fancybox.js","hash":"c098d14e65dd170537134358d4b8359ad0539c2c","modified":1654275500611},{"_id":"themes/next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1654275500611},{"_id":"themes/next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1654275500611},{"_id":"themes/next/source/js/third-party/rating.js","hash":"4e92c2d107ba47b47826829f9668030d5ea9bfb8","modified":1654275500611},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"d0a7c99095f490b0d2ed6b1be43d435960798cec","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"b5c7782368889fa9fd93807d28ff2daf270e3703","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"572a41499391677d84b16d8dbd6a996a3d5ce041","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1654275500603},{"_id":"themes/next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1654275500602},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1654275500604},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"64775c729512b30b144ab5ae9dc4a4dfd4e13f35","modified":1654275500602},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"bab653bcf226311381e8411a0492202f1bf1fce9","modified":1654275500598},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/index.styl","hash":"fe1868f47681e00a33a96199302be85377282f63","modified":1654275500598},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"82a29572dd90451f75358a2ee2522b87304a0bb8","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"fd49b521d67eaccc629f77b4e095cb7310327565","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"4817e77577896ab5c0da434549917ee703a3f4cf","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"5604ac1e161099a4d3e5657d53507268866dc717","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"b7f48be3c43bfa393d62142544a5487a67871713","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"fb550935d374e0bdf1097fce187337dc05cad3e1","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"be6cf377ae8f4a01ee76f9b3014e74161d4d5d17","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"06080fd963c904d96c00eff098a284e337953013","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"944364893bd7160d954c10ba931af641c91515a4","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1654275500605},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"b741ab96e73370711c63a6581159f2ea8b5bfa1b","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"6eee86c8f0175d6c09e434053516cd8556f78d44","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"d9141e6e14a56b5952488101e9a8388c2170e270","modified":1654275500606},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1654275500606},{"_id":"themes/next/source/js/third-party/chat/gitter.js","hash":"cc38c94125f90dadde11b5ebac7d8bf99a1a08a2","modified":1654275500610},{"_id":"themes/next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1654275500610},{"_id":"themes/next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1654275500610},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1654275500606},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","hash":"b6c58f098473b526d6a3cd35655caf34b77f7cff","modified":1654275500610},{"_id":"themes/next/source/js/third-party/comments/disqus.js","hash":"e1cc671b0d524864fd445e3ab4ade9ee6d07e565","modified":1654275500610},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","hash":"59684383385059dc4f8a1ff85dbbeb703bcdbcb5","modified":1654275500609},{"_id":"themes/next/source/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1654275500610},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1654275500610},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1654275500610},{"_id":"themes/next/source/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1654275500610},{"_id":"themes/next/source/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1654275500611},{"_id":"themes/next/source/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1654275500611},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1654275500609},{"_id":"themes/next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1654275500611},{"_id":"themes/next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1654275500611},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","hash":"fdb7b7cef1a147d897e7f7cd8903b58368ec2062","modified":1654275500611},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","hash":"411a72df581f5b21317dc28633c7993207eb9e1c","modified":1654275500611},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","hash":"5a928990856b8e456f0663cf3b6b406733672e39","modified":1654275500612},{"_id":"themes/next/source/js/third-party/search/local-search.js","hash":"4536cb6d0a9bbaaa86fab3fa0101f6a3a3ec5a76","modified":1654275500611},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"670fc109b56a010b166b86b616823a1aae97a738","modified":1654275500603},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/highlight/index.styl","hash":"f2328caa94645836e06fb39a6a9c9a84ed68a8b5","modified":1654275500603},{"_id":"themes/next/source/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1654275500612},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1654275500604},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","hash":"f27d817b0c2138dd3215b1f46af0753f60a008f3","modified":1654275500612},{"_id":"themes/next/source/css/_common/scaffolding/tags/index.styl","hash":"3f76c73a891bbc10679753e702feba9e8a5ffdd2","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"7f8a7345e6537a62cd9e9a94c8f7065b541d9b04","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"d27fbf7799695295dd5860a161a13ac4d90c5ba4","modified":1654275500604},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1654275500604},{"_id":"themes/next/source/css/_common/outline/footer/index.styl","hash":"8b9407e5cfd0571ef8de7df19022b268f962fa2f","modified":1654275500601},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"7a39bcce7274284e87388743db62afc847fe6897","modified":1654275500604},{"_id":"themes/next/source/css/_common/outline/header/index.styl","hash":"ff642130354a0b3be0d708c43044ed4d710b5e83","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"392fd53a8dd4e3f33a853ebb24290a622300e0ff","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"759e582d34d08e3386c55d87a835a9523608619f","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1654275500601},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"52fc98b1435129eb3edb9293ced9e507741f1350","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/index.styl","hash":"cee43480eba028c37d51cb620c2d81486aa24e01","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"9950c3188a28e1c63b5498b7bdcd14b12ace3e28","modified":1654275500602},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c65536a128b9bc9dbe2fbb1b235a3cded2891002","modified":1654275500607},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"b926e368f702f8686aaa2eb98d3d2e533418958c","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"fbdb63c6a8887d19b7137325ba7d6806f728139c","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"021a37cf178440cc341940a299d3bca359996c6b","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"3103b81fc76b59e1e2c161e2c484625c770ed66f","modified":1654275500602},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1654275500603},{"_id":"themes/next/source/css/_common/components/post/post-body.styl","hash":"d757768a58743601d0d84158ba955eb15d4c3c01","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/post/index.styl","hash":"d0805a763176b3c0003967401644f41dfe3bc9e8","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"fc1a7bac6493f24aa50665574f37f3dd954f210c","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/post/post-footer.styl","hash":"1d284f3ea03ba9b4feb76b375e539a8e0bccf1c3","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"ec37a36e94ba791663607a5022f763915778578f","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"07cff69f2d57e6321595f64c16d8b763dc88df6a","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"010c901e4ef49a606f8a350efbf09044e76d2ff3","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"b6677dc2a2368084ab82bb4f145ac79e5966c150","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/disqusjs.styl","hash":"c2326ee3e8b724d99c24a818ddee32813ea5bf89","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"070737d101e7cd58e997e8c7af09958268c43a21","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/gitter.styl","hash":"35104dc6883a61c31e0e368dac8ac2f697be62fe","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"41ed817e1eb64078074e245e771446ee041e5790","modified":1654275500601},{"_id":"themes/next/source/css/_common/components/third-party/index.styl","hash":"979486a41a81f2a9fd8b0b87c4f87d6416c68c7d","modified":1654275500600},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"e72799ce3f9b79753e365b2f8c8ef6c310668d4a","modified":1654275500601},{"_id":"themes/next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1654275500601},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"72dc825c50357402c342d62ab60fc0c478ab6bc1","modified":1654275500606},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"b6e2eb1550a7845cb2adf86081a4ab6c7bde1e68","modified":1654275500599},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"ee94a1a27090ad24e3ed579093088d97ff96d77d","modified":1654275500602},{"_id":"themes/next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1654275500599},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1654275500598},{"_id":"source/_posts/use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg","hash":"682c71581ab9aacc317e6b1cc2f2cc3349720d5e","modified":1654247531536},{"_id":"source/_posts/use-octodash-on-your-android-phone/IMG_3031.jpeg","hash":"7d87d1b437b2e0af0947ab2f232257b0c143d76a","modified":1654270625070},{"_id":"source/_posts/hackintosh-of-yoga710/error1.jpg","hash":"48898986ca54d3febb5f35aef9e8ffdcaac4fda7","modified":1654274480629},{"_id":"source/_posts/hackintosh-of-yoga710/CLOVER.zip","hash":"75f9f1e8ff977b9109aa8eb4053be9ffb295df3b","modified":1654274480559},{"_id":"public/uploads/canvas-ribbon.js","hash":"70d789f50f8d1bba34897887f42d1f59647431b0","modified":1654504111139},{"_id":"public/search.xml","hash":"e34e0d253a097e12776090f311e011f2f9833fdd","modified":1654504111139},{"_id":"public/uploads/autosize.js","hash":"6bac427b54743b075b488cd5ca5999eda0f30077","modified":1654504111139},{"_id":"public/about/index.html","hash":"977cdc3b6600e474989d59f01abc06d3718cd98f","modified":1654504111139},{"_id":"public/tags/index.html","hash":"60b915da32591b9895f7e64c7bca7a3dd50a1b7a","modified":1654504111139},{"_id":"public/archives/2018/index.html","hash":"e7191dc9c7a3a57b6d3400a88b99d01a2138b6df","modified":1654504111139},{"_id":"public/archives/2018/03/index.html","hash":"7408dc530228146448f8339cb320e38ec09d9e69","modified":1654504111139},{"_id":"public/archives/page/2/index.html","hash":"8a9586a20c0d9a0f3c67c304e2673b500932bfb6","modified":1654504111139},{"_id":"public/archives/2018/10/index.html","hash":"335b318b5a9cd2b1376181528c39128d915a6e99","modified":1654504111139},{"_id":"public/archives/2018/12/index.html","hash":"11f682ae39e1ad52fecd968556b6d60db5880921","modified":1654504111139},{"_id":"public/archives/2018/11/index.html","hash":"01a69398d417f81c9bfa9dc818a8b0ca5a1335a1","modified":1654504111139},{"_id":"public/archives/2019/index.html","hash":"9e3bd072c1b655d6a53e151ff9abaa0a0df7fc36","modified":1654504111139},{"_id":"public/archives/2019/03/index.html","hash":"08fe458519c4baf266a5b198aca2650d8b5f104c","modified":1654504111139},{"_id":"public/archives/2019/07/index.html","hash":"8872a564b681fb8b8cbf6c9f71d8566fff3e771d","modified":1654504111139},{"_id":"public/archives/2019/09/index.html","hash":"bc472ec22fd5fdce894f56ef5b06952d4270cfe6","modified":1654504111139},{"_id":"public/archives/2019/10/index.html","hash":"9f1135631a2d7166c188bd4fa87206be6ac44270","modified":1654504111139},{"_id":"public/archives/2019/12/index.html","hash":"30c74df9381b2a5e98539bbde6cd07176dbc825a","modified":1654504111139},{"_id":"public/archives/2022/index.html","hash":"d7927ad5275697d0fc600a3d6938b53b0493b7c3","modified":1654504111139},{"_id":"public/archives/2022/06/index.html","hash":"09709a968b741a55133152cfc1006579e7e08ead","modified":1654504111139},{"_id":"public/tags/Javascript/index.html","hash":"964a3d4fd4834584294d129e461ad7566daf5657","modified":1654504111139},{"_id":"public/tags/systemctl/index.html","hash":"68565a0435b941570d93749633f314666cf2cb2c","modified":1654504111139},{"_id":"public/tags/note/index.html","hash":"f488f794e7ee410c5a468566bf3b9b9820f6fcda","modified":1654504111139},{"_id":"public/tags/云服务/index.html","hash":"e8f6dbc00bf414feed20a36e4ded1f932d7db0bd","modified":1654504111139},{"_id":"public/tags/云服务器/index.html","hash":"61459b1c577e61ef95d1b487cbfa93569f5ef77a","modified":1654504111139},{"_id":"public/tags/MIUI/index.html","hash":"b2cd73896a6898f0ab5b5f82ac2ea2c1e58c6125","modified":1654504111139},{"_id":"public/tags/各种Pi/index.html","hash":"3391e900bfbf31e018db775085860d17b92f2031","modified":1654504111139},{"_id":"public/tags/hexo-tricks/index.html","hash":"4134e7324400aa3c9b26d96b083db102f90c8a1a","modified":1654504111139},{"_id":"public/tags/3D/index.html","hash":"06c05e9e316a0d6d1f99fca92071dddd499421b4","modified":1654504111139},{"_id":"public/tags/Octoprint/index.html","hash":"ae84317dd7a259102744b0c3d5efdd71a53662c9","modified":1654504111139},{"_id":"public/tags/手把手教程/index.html","hash":"6d4d4b4e5c5a748bebf960ae228bdf858a5364ee","modified":1654504111139},{"_id":"public/use-octodash-on-your-android-phone/index.html","hash":"fcae556025e18c2a8cd350e35d8ff9f03b865424","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/index.html","hash":"4ac411342c36f39303a7b2ccdd3b4e85602d4d6e","modified":1654504111139},{"_id":"public/hackintosh-of-yoga710/index.html","hash":"d1bec7bd98c2e629f31c818aebbbef87541a695a","modified":1654504111139},{"_id":"public/miui-eu/index.html","hash":"a12403d3213842d0ef2e6d2f6b9af294291934f6","modified":1654504111139},{"_id":"public/open-your-farvorite-editor-after-new-hexo-post/index.html","hash":"177c5c0bf58c24f3a7c86c3b41daa3b9cadd64cc","modified":1654504111139},{"_id":"public/caddy-ws-v2ray/index.html","hash":"c83f94443d9488f1520c186aa75bd1e2489eb260","modified":1654504111139},{"_id":"public/wechat-vip-how-to/index.html","hash":"5b98cf6471dcb6fad41f7c937157d762b67e3e3f","modified":1654504111139},{"_id":"public/nginx建立TCP代理/index.html","hash":"dd0907ddc873f8d981a129d3fc7f49358d94eea4","modified":1654504111139},{"_id":"public/frp-for-mc/index.html","hash":"c80c8117bc8ad32f0971e54b4740a5fcf3f2a2d0","modified":1654504111139},{"_id":"public/orangepi折腾记录/index.html","hash":"dd4db6f003394658d3bfe5194c37849c135395c6","modified":1654504111139},{"_id":"public/把时间当作朋友_笔记/index.html","hash":"49dfa5210995175674b64d4d33fe9bd3f9d5ca47","modified":1654504111139},{"_id":"public/关于coding和git的折腾/index.html","hash":"944f128fdcf577f39464c32ae29d98dabbfe4ca3","modified":1654504111139},{"_id":"public/archives/index.html","hash":"c39d6ed496cf29c1c653a693beed90680927b065","modified":1654504111139},{"_id":"public/raspberrypi-how/index.html","hash":"0b41f39a539c1d334496a556a1731b37c496a2ea","modified":1654504111139},{"_id":"public/index.html","hash":"4048449efdeef95417614a0d9a345c8a0c4c947a","modified":1654504111139},{"_id":"public/page/2/index.html","hash":"962f2ec0cbf2f6e05cfcdafc7e6a856971ed7a37","modified":1654504111139},{"_id":"public/images/logo.svg","hash":"2cb74fd3ea2635e015eabc58a8d488aed6cf6417","modified":1654504111139},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1654504111139},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1654504111139},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1654504111139},{"_id":"public/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1654504111139},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1654504111139},{"_id":"public/CNAME","hash":"c3be04a7e84e283558a1b243bb592fb0fbc48ea7","modified":1654504111139},{"_id":"public/raspi-init.sh","hash":"9034455b9c1b6dc583c9d930c46e663fa039f705","modified":1654504111139},{"_id":"public/images/favicon/browserconfig.xml","hash":"8288172318a8146731611227940aaebe3e13b39e","modified":1654504111139},{"_id":"public/images/favicon/apple-touch-icon.png","hash":"1c033d26b1305d376d0a00be87a666cb621cd1b2","modified":1654504111139},{"_id":"public/images/favicon/android-chrome-192x192.png","hash":"8e0f488713aa8194a66fc2ef2920a2cba93c33bb","modified":1654504111139},{"_id":"public/images/favicon/favicon-32x32.png","hash":"5fdacf3ae2ab0cdcaee0c5974d0ac9ed4ecce44d","modified":1654504111139},{"_id":"public/images/favicon/favicon-16x16.png","hash":"a3185c384248afdcdb406af260a4f3dade24eba4","modified":1654504111139},{"_id":"public/images/favicon/site.webmanifest","hash":"8d652a5e2800864dc5018ca54711d9f6c798653a","modified":1654504111139},{"_id":"public/images/favicon/favicon.ico","hash":"4c64266449611a00ff7d545d3548bde2762978a2","modified":1654504111139},{"_id":"public/images/favicon/safari-pinned-tab.svg","hash":"81f5312372789bfa55f0dd361c30220424eabddb","modified":1654504111139},{"_id":"public/images/favicon/mstile-150x150.png","hash":"644349ee623dee06d1902cf72083b4b537d9deb4","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/csv.png","hash":"ce97f2d0974e811472806003c09e839259dfa8b6","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/console1.png","hash":"099e583b70b1bf5c4307f344f19e6a7dfc6190ba","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/info_array.png","hash":"15d7afa30586c22792d6031d5e534798c2de22fd","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/info_es.png","hash":"2b069060dcf763787500579d9e9c869062f4d16b","modified":1654504111139},{"_id":"public/miui-eu/screen1.jpg","hash":"ff497a290f30acc4669303e682d62ab7e13ba440","modified":1654504111139},{"_id":"public/use-octodash-on-your-android-phone/332-OctoDashSetup-01.png","hash":"ce711eb7fe9c9bc42c56190ebd1ddcaf7b2b527f","modified":1654504111139},{"_id":"public/uploads/avatar.jpg","hash":"13679f80c715a47dd7b258145007c4088f372d24","modified":1654504111139},{"_id":"public/miui-eu/screen.png","hash":"f17cc0b7b24014b02f12815c61261d1f64e831e8","modified":1654504111139},{"_id":"public/miui-eu/mipay-extract.jpg","hash":"0a5ef7f9583ee2f6c925a4750794c5d3f3860aae","modified":1654504111139},{"_id":"public/miui-eu/git-clone.jpg","hash":"32eb237145b0d94bc6053087327e18695f8c24df","modified":1654504111139},{"_id":"public/miui-eu/bat-run.jpg","hash":"0fd156c96292397f056ad15b803cd2b8884ac003","modified":1654504111139},{"_id":"public/js/bookmark.js","hash":"0f563ffbf05fad30e854e413ab17ff7164ab5a53","modified":1654504111139},{"_id":"public/css/noscript.css","hash":"ec89b3425fbce20863d554c6fd495ea29c3c303d","modified":1654504111139},{"_id":"public/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1654504111139},{"_id":"public/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1654504111139},{"_id":"public/js/motion.js","hash":"f7c825cbff11885fa0dffa64824fd00e505d6a8d","modified":1654504111139},{"_id":"public/js/next-boot.js","hash":"da0f07f9eaaa83de70128b0feaea3fdadb90457a","modified":1654504111139},{"_id":"public/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1654504111139},{"_id":"public/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1654504111139},{"_id":"public/js/pjax.js","hash":"919f5281c4a04d11cfd94573ecf57b3dbabd3cc8","modified":1654504111139},{"_id":"public/js/third-party/fancybox.js","hash":"c098d14e65dd170537134358d4b8359ad0539c2c","modified":1654504111139},{"_id":"public/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1654504111139},{"_id":"public/js/utils.js","hash":"200088bfd042f5304b2a04befab0829148845e0e","modified":1654504111139},{"_id":"public/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1654504111139},{"_id":"public/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1654504111139},{"_id":"public/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1654504111139},{"_id":"public/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1654504111139},{"_id":"public/js/third-party/chat/gitter.js","hash":"cc38c94125f90dadde11b5ebac7d8bf99a1a08a2","modified":1654504111139},{"_id":"public/js/third-party/comments/disqusjs.js","hash":"b6c58f098473b526d6a3cd35655caf34b77f7cff","modified":1654504111139},{"_id":"public/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1654504111139},{"_id":"public/js/third-party/analytics/google-analytics.js","hash":"59684383385059dc4f8a1ff85dbbeb703bcdbcb5","modified":1654504111139},{"_id":"public/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1654504111139},{"_id":"public/js/third-party/comments/disqus.js","hash":"e1cc671b0d524864fd445e3ab4ade9ee6d07e565","modified":1654504111139},{"_id":"public/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1654504111139},{"_id":"public/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1654504111139},{"_id":"public/js/third-party/rating.js","hash":"4e92c2d107ba47b47826829f9668030d5ea9bfb8","modified":1654504111139},{"_id":"public/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1654504111139},{"_id":"public/js/schemes/muse.js","hash":"9794bd4fc6a458322949d6a0ade89cd1026bc69f","modified":1654504111139},{"_id":"public/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1654504111139},{"_id":"public/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1654504111139},{"_id":"public/js/third-party/search/local-search.js","hash":"4536cb6d0a9bbaaa86fab3fa0101f6a3a3ec5a76","modified":1654504111139},{"_id":"public/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1654504111139},{"_id":"public/js/third-party/statistics/lean-analytics.js","hash":"5a928990856b8e456f0663cf3b6b406733672e39","modified":1654504111139},{"_id":"public/js/third-party/search/algolia-search.js","hash":"fdb7b7cef1a147d897e7f7cd8903b58368ec2062","modified":1654504111139},{"_id":"public/js/third-party/statistics/firestore.js","hash":"411a72df581f5b21317dc28633c7993207eb9e1c","modified":1654504111139},{"_id":"public/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1654504111139},{"_id":"public/js/third-party/tags/mermaid.js","hash":"f27d817b0c2138dd3215b1f46af0753f60a008f3","modified":1654504111139},{"_id":"public/css/main.css","hash":"42fbdba741d0410ba8226b135e2be8477056f44e","modified":1654504111139},{"_id":"public/Wechat-vip-info-export/会员详情页面.png","hash":"bf1a708e1c5da9bb27ab89519f6380bafd6b1211","modified":1654504111139},{"_id":"public/use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg","hash":"46c2002170a7dbdaaf48a35b3aeae40476328bfa","modified":1654504111139},{"_id":"public/images/favicon/android-chrome-512x512.png","hash":"4ab5a0d5e1c71b2a4211cacfba868c208a7a404f","modified":1654504111139},{"_id":"public/use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg","hash":"682c71581ab9aacc317e6b1cc2f2cc3349720d5e","modified":1654504111139},{"_id":"public/use-octodash-on-your-android-phone/IMG_3031.jpeg","hash":"7d87d1b437b2e0af0947ab2f232257b0c143d76a","modified":1654504111139},{"_id":"public/hackintosh-of-yoga710/error1.jpg","hash":"48898986ca54d3febb5f35aef9e8ffdcaac4fda7","modified":1654504111139},{"_id":"public/hackintosh-of-yoga710/CLOVER.zip","hash":"75f9f1e8ff977b9109aa8eb4053be9ffb295df3b","modified":1654504111139}],"Category":[],"Data":[{"_id":"head","data":"<script>\n\n</script>"},{"_id":"styles","data":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}],"Page":[{"title":"关于卢俊鹏","date":"2018-10-19T07:02:51.000Z","comments":0,"_content":"普通大学生\n喜欢航拍，还喜欢钢琴，学一个技能最重要的其实不是坚持而是兴趣啊","source":"about/index.md","raw":"---\ntitle: 关于卢俊鹏\ndate: 2018-10-19 15:02:51\ncomments: false\n---\n普通大学生\n喜欢航拍，还喜欢钢琴，学一个技能最重要的其实不是坚持而是兴趣啊","updated":"2022-06-03T16:41:20.641Z","path":"about/index.html","layout":"page","_id":"cl411ismy00006z0h737i9pkj","content":"<p>普通大学生<br>喜欢航拍，还喜欢钢琴，学一个技能最重要的其实不是坚持而是兴趣啊</p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"<p>普通大学生<br>喜欢航拍，还喜欢钢琴，学一个技能最重要的其实不是坚持而是兴趣啊</p>\n"},{"title":"标签","date":"2018-10-17T13:46:11.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2018-10-17 21:46:11\ntype: \"tags\"\ncomments: false\n---\n","updated":"2022-06-03T16:41:20.646Z","path":"tags/index.html","layout":"page","_id":"cl411isn000026z0hhc298de9","content":"","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":""},{"_content":"/**\n * Copyright (c) 2016 hustcc\n * License: MIT\n * Version: v1.0.1\n * GitHub: https://github.com/hustcc/ribbon.js\n**/\n/*jshint -W030 */\n! function() {\n  function attr(node, attr, default_value) {\n    return Number(node.getAttribute(attr)) || default_value;\n  }\n\n  // get user config\n  var scripts = document.getElementsByTagName('script'),\n    script = scripts[scripts.length - 1]; // 当前加载的script\n  config = {\n    z: attr(script, \"zIndex\", -1), // z-index\n    a: attr(script, \"alpha\", 0.6), // alpha\n    s: attr(script, \"size\", 90), // size\n  };\n\n  var canvas = document.createElement('canvas'),\n    g2d = canvas.getContext('2d'),\n    pr = window.devicePixelRatio || 1,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    f = config.s,\n    q, t,\n    m = Math,\n    r = 0,\n    pi = m.PI*2,\n    cos = m.cos,\n    random = m.random;\n  canvas.width = width * pr;\n  canvas.height = height * pr;\n  g2d.scale(pr, pr);\n  g2d.globalAlpha = config.a;\n  canvas.style.cssText = 'opacity: ' + config.a + ';position:fixed;top:0;left:0;z-index: ' + config.z + ';width:100%;height:100%;pointer-events:none;';\n  // create canvas\n  document.getElementsByTagName('body')[0].appendChild(canvas);\n\n  function redraw() {\n    g2d.clearRect(0, 0, width, height);\n    q = [{x: 0, y: height * 0.7 + f}, {x: 0, y: height * 0.7 - f}];\n    while(q[1].x < width + f) draw(q[0], q[1]);\n  }\n  function draw(i, j) {\n    g2d.beginPath();\n    g2d.moveTo(i.x, i.y);\n    g2d.lineTo(j.x, j.y);\n    var k = j.x + (random()*2-0.25)*f, n = line(j.y);\n    g2d.lineTo(k, n);\n    g2d.closePath();\n    r -= pi / -50;\n    g2d.fillStyle = '#'+(cos(r)*127+128<<16 | cos(r+pi/3)*127+128<<8 | cos(r+pi/3*2)*127+128).toString(16);\n    g2d.fill();\n    q[0] = q[1];\n    q[1] = {x: k, y: n};\n  }\n  function line(p){\n    t = p + (random() * 2 - 1.1) * f;\n    return (t > height || t < 0) ? line(p) : t;\n  }\n\n  document.onclick = redraw;\n  // document.ontouchstart = redraw;\n  redraw();\n}();\n","source":"uploads/canvas-ribbon.js","raw":"/**\n * Copyright (c) 2016 hustcc\n * License: MIT\n * Version: v1.0.1\n * GitHub: https://github.com/hustcc/ribbon.js\n**/\n/*jshint -W030 */\n! function() {\n  function attr(node, attr, default_value) {\n    return Number(node.getAttribute(attr)) || default_value;\n  }\n\n  // get user config\n  var scripts = document.getElementsByTagName('script'),\n    script = scripts[scripts.length - 1]; // 当前加载的script\n  config = {\n    z: attr(script, \"zIndex\", -1), // z-index\n    a: attr(script, \"alpha\", 0.6), // alpha\n    s: attr(script, \"size\", 90), // size\n  };\n\n  var canvas = document.createElement('canvas'),\n    g2d = canvas.getContext('2d'),\n    pr = window.devicePixelRatio || 1,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    f = config.s,\n    q, t,\n    m = Math,\n    r = 0,\n    pi = m.PI*2,\n    cos = m.cos,\n    random = m.random;\n  canvas.width = width * pr;\n  canvas.height = height * pr;\n  g2d.scale(pr, pr);\n  g2d.globalAlpha = config.a;\n  canvas.style.cssText = 'opacity: ' + config.a + ';position:fixed;top:0;left:0;z-index: ' + config.z + ';width:100%;height:100%;pointer-events:none;';\n  // create canvas\n  document.getElementsByTagName('body')[0].appendChild(canvas);\n\n  function redraw() {\n    g2d.clearRect(0, 0, width, height);\n    q = [{x: 0, y: height * 0.7 + f}, {x: 0, y: height * 0.7 - f}];\n    while(q[1].x < width + f) draw(q[0], q[1]);\n  }\n  function draw(i, j) {\n    g2d.beginPath();\n    g2d.moveTo(i.x, i.y);\n    g2d.lineTo(j.x, j.y);\n    var k = j.x + (random()*2-0.25)*f, n = line(j.y);\n    g2d.lineTo(k, n);\n    g2d.closePath();\n    r -= pi / -50;\n    g2d.fillStyle = '#'+(cos(r)*127+128<<16 | cos(r+pi/3)*127+128<<8 | cos(r+pi/3*2)*127+128).toString(16);\n    g2d.fill();\n    q[0] = q[1];\n    q[1] = {x: k, y: n};\n  }\n  function line(p){\n    t = p + (random() * 2 - 1.1) * f;\n    return (t > height || t < 0) ? line(p) : t;\n  }\n\n  document.onclick = redraw;\n  // document.ontouchstart = redraw;\n  redraw();\n}();\n","date":"2022-06-03T16:41:20.648Z","updated":"2022-06-03T16:41:20.648Z","path":"uploads/canvas-ribbon.js","layout":"false","title":"","comments":1,"_id":"cl411isn100046z0hblf59gaf","content":"/**\n * Copyright (c) 2016 hustcc\n * License: MIT\n * Version: v1.0.1\n * GitHub: https://github.com/hustcc/ribbon.js\n**/\n/*jshint -W030 */\n! function() {\n  function attr(node, attr, default_value) {\n    return Number(node.getAttribute(attr)) || default_value;\n  }\n\n  // get user config\n  var scripts = document.getElementsByTagName('script'),\n    script = scripts[scripts.length - 1]; // 当前加载的script\n  config = {\n    z: attr(script, \"zIndex\", -1), // z-index\n    a: attr(script, \"alpha\", 0.6), // alpha\n    s: attr(script, \"size\", 90), // size\n  };\n\n  var canvas = document.createElement('canvas'),\n    g2d = canvas.getContext('2d'),\n    pr = window.devicePixelRatio || 1,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    f = config.s,\n    q, t,\n    m = Math,\n    r = 0,\n    pi = m.PI*2,\n    cos = m.cos,\n    random = m.random;\n  canvas.width = width * pr;\n  canvas.height = height * pr;\n  g2d.scale(pr, pr);\n  g2d.globalAlpha = config.a;\n  canvas.style.cssText = 'opacity: ' + config.a + ';position:fixed;top:0;left:0;z-index: ' + config.z + ';width:100%;height:100%;pointer-events:none;';\n  // create canvas\n  document.getElementsByTagName('body')[0].appendChild(canvas);\n\n  function redraw() {\n    g2d.clearRect(0, 0, width, height);\n    q = [{x: 0, y: height * 0.7 + f}, {x: 0, y: height * 0.7 - f}];\n    while(q[1].x < width + f) draw(q[0], q[1]);\n  }\n  function draw(i, j) {\n    g2d.beginPath();\n    g2d.moveTo(i.x, i.y);\n    g2d.lineTo(j.x, j.y);\n    var k = j.x + (random()*2-0.25)*f, n = line(j.y);\n    g2d.lineTo(k, n);\n    g2d.closePath();\n    r -= pi / -50;\n    g2d.fillStyle = '#'+(cos(r)*127+128<<16 | cos(r+pi/3)*127+128<<8 | cos(r+pi/3*2)*127+128).toString(16);\n    g2d.fill();\n    q[0] = q[1];\n    q[1] = {x: k, y: n};\n  }\n  function line(p){\n    t = p + (random() * 2 - 1.1) * f;\n    return (t > height || t < 0) ? line(p) : t;\n  }\n\n  document.onclick = redraw;\n  // document.ontouchstart = redraw;\n  redraw();\n}();\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"/**\n * Copyright (c) 2016 hustcc\n * License: MIT\n * Version: v1.0.1\n * GitHub: https://github.com/hustcc/ribbon.js\n**/\n/*jshint -W030 */\n! function() {\n  function attr(node, attr, default_value) {\n    return Number(node.getAttribute(attr)) || default_value;\n  }\n\n  // get user config\n  var scripts = document.getElementsByTagName('script'),\n    script = scripts[scripts.length - 1]; // 当前加载的script\n  config = {\n    z: attr(script, \"zIndex\", -1), // z-index\n    a: attr(script, \"alpha\", 0.6), // alpha\n    s: attr(script, \"size\", 90), // size\n  };\n\n  var canvas = document.createElement('canvas'),\n    g2d = canvas.getContext('2d'),\n    pr = window.devicePixelRatio || 1,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    f = config.s,\n    q, t,\n    m = Math,\n    r = 0,\n    pi = m.PI*2,\n    cos = m.cos,\n    random = m.random;\n  canvas.width = width * pr;\n  canvas.height = height * pr;\n  g2d.scale(pr, pr);\n  g2d.globalAlpha = config.a;\n  canvas.style.cssText = 'opacity: ' + config.a + ';position:fixed;top:0;left:0;z-index: ' + config.z + ';width:100%;height:100%;pointer-events:none;';\n  // create canvas\n  document.getElementsByTagName('body')[0].appendChild(canvas);\n\n  function redraw() {\n    g2d.clearRect(0, 0, width, height);\n    q = [{x: 0, y: height * 0.7 + f}, {x: 0, y: height * 0.7 - f}];\n    while(q[1].x < width + f) draw(q[0], q[1]);\n  }\n  function draw(i, j) {\n    g2d.beginPath();\n    g2d.moveTo(i.x, i.y);\n    g2d.lineTo(j.x, j.y);\n    var k = j.x + (random()*2-0.25)*f, n = line(j.y);\n    g2d.lineTo(k, n);\n    g2d.closePath();\n    r -= pi / -50;\n    g2d.fillStyle = '#'+(cos(r)*127+128<<16 | cos(r+pi/3)*127+128<<8 | cos(r+pi/3*2)*127+128).toString(16);\n    g2d.fill();\n    q[0] = q[1];\n    q[1] = {x: k, y: n};\n  }\n  function line(p){\n    t = p + (random() * 2 - 1.1) * f;\n    return (t > height || t < 0) ? line(p) : t;\n  }\n\n  document.onclick = redraw;\n  // document.ontouchstart = redraw;\n  redraw();\n}();\n"},{"_content":"/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","source":"uploads/autosize.js","raw":"/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","date":"2022-06-03T16:41:20.647Z","updated":"2022-06-03T16:41:20.647Z","path":"uploads/autosize.js","layout":"false","title":"","comments":1,"_id":"cl411isn200076z0h6f7yb00x","content":"/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});"}],"Post":[{"title":"【一键脚本】frps一键安装脚本——使用systemctl控制","date":"2019-10-24T10:37:47.000Z","_content":"\n```sh\nFRP_VER=0.29.0\necho \"开始安装frps\"\nwget https://github.com/fatedier/frp/releases/download/v${FRP_VER}/frp_${FRP_VER}_linux_amd64.tar.gz\ntar -xvf frp\\_$FRP_VER\\_linux_amd64.tar.gz && \\\nrm -f frp_{$FRP_VER}_linux_amd64.tar.gz\nsudo mkdir /etc/frp/ /usr/local/bin/frp/\nsudo mv frp_${FRP_VER}_linux_amd64/frps /usr/local/bin/frp/\nsudo tee /etc/frp/frps.ini <<-'EOF'\n[common]\nserver_addr = hub.xiaoxx.cc\nserver_port = 7000\nbind_udp_port = 7001\nkcp_bind_port = 7000\ndashboard_port = 7500\nsubdomain_host = hub.xiaoxx.cc\nvhost_http_port = 8080\nEOF\nsudo tee /etc/systemd/system/frps.service <<-'EOF'\n[Unit]\nDescription=frps daemon\nAfter=syslog.target  network.target\nWants=network.target\n[Service]\nType=simple\nTimeoutStartSec=30\nExecStart=/usr/local/bin/frp/frps -c /etc/frp/frps.ini\nRestart= always\nRestartSec=1min\nExecStop=/usr/bin/killall frps\n[Install]\nWantedBy=multi-user.target\nEOF\nsudo systemctl daemon-reload\nsudo systemctl enable frps\nsudo systemctl start frps\nsystemctl status frps\n```\n\n# frpc.ini\n```\n[web]\ntype = http\nlocal_port = 80\nsubdomain = test\n```","source":"_drafts/frp-init-script.md","raw":"---\ntitle: 【一键脚本】frps一键安装脚本——使用systemctl控制\ndate: 2019-10-24 18:37:47\ntags:\n---\n\n```sh\nFRP_VER=0.29.0\necho \"开始安装frps\"\nwget https://github.com/fatedier/frp/releases/download/v${FRP_VER}/frp_${FRP_VER}_linux_amd64.tar.gz\ntar -xvf frp\\_$FRP_VER\\_linux_amd64.tar.gz && \\\nrm -f frp_{$FRP_VER}_linux_amd64.tar.gz\nsudo mkdir /etc/frp/ /usr/local/bin/frp/\nsudo mv frp_${FRP_VER}_linux_amd64/frps /usr/local/bin/frp/\nsudo tee /etc/frp/frps.ini <<-'EOF'\n[common]\nserver_addr = hub.xiaoxx.cc\nserver_port = 7000\nbind_udp_port = 7001\nkcp_bind_port = 7000\ndashboard_port = 7500\nsubdomain_host = hub.xiaoxx.cc\nvhost_http_port = 8080\nEOF\nsudo tee /etc/systemd/system/frps.service <<-'EOF'\n[Unit]\nDescription=frps daemon\nAfter=syslog.target  network.target\nWants=network.target\n[Service]\nType=simple\nTimeoutStartSec=30\nExecStart=/usr/local/bin/frp/frps -c /etc/frp/frps.ini\nRestart= always\nRestartSec=1min\nExecStop=/usr/bin/killall frps\n[Install]\nWantedBy=multi-user.target\nEOF\nsudo systemctl daemon-reload\nsudo systemctl enable frps\nsudo systemctl start frps\nsystemctl status frps\n```\n\n# frpc.ini\n```\n[web]\ntype = http\nlocal_port = 80\nsubdomain = test\n```","slug":"frp-init-script","published":0,"updated":"2022-06-03T16:41:20.462Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411ismz00016z0h15r7cndi","content":"<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FRP_VER=0.29.0</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;开始安装frps&quot;</span></span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v<span class=\"variable\">$&#123;FRP_VER&#125;</span>/frp_<span class=\"variable\">$&#123;FRP_VER&#125;</span>_linux_amd64.tar.gz</span><br><span class=\"line\">tar -xvf frp\\_<span class=\"variable\">$FRP_VER</span>\\_linux_amd64.tar.gz &amp;&amp; \\</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -f frp_&#123;<span class=\"variable\">$FRP_VER</span>&#125;_linux_amd64.tar.gz</span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/frp/ /usr/local/bin/frp/</span><br><span class=\"line\">sudo <span class=\"built_in\">mv</span> frp_<span class=\"variable\">$&#123;FRP_VER&#125;</span>_linux_amd64/frps /usr/local/bin/frp/</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/frp/frps.ini &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = hub.xiaoxx.cc</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">bind_udp_port = 7001</span><br><span class=\"line\">kcp_bind_port = 7000</span><br><span class=\"line\">dashboard_port = 7500</span><br><span class=\"line\">subdomain_host = hub.xiaoxx.cc</span><br><span class=\"line\">vhost_http_port = 8080</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/systemd/system/frps.service &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frps daemon</span><br><span class=\"line\">After=syslog.target  network.target</span><br><span class=\"line\">Wants=network.target</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frp/frps -c /etc/frp/frps.ini</span><br><span class=\"line\">Restart= always</span><br><span class=\"line\">RestartSec=1min</span><br><span class=\"line\">ExecStop=/usr/bin/killall frps</span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> frps</span><br><span class=\"line\">sudo systemctl start frps</span><br><span class=\"line\">systemctl status frps</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"frpc-ini\"><a href=\"#frpc-ini\" class=\"headerlink\" title=\"frpc.ini\"></a>frpc.ini</h1><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[web]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = http</span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">subdomain</span> = test</span><br></pre></td></tr></table></figure>","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FRP_VER=0.29.0</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;开始安装frps&quot;</span></span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v<span class=\"variable\">$&#123;FRP_VER&#125;</span>/frp_<span class=\"variable\">$&#123;FRP_VER&#125;</span>_linux_amd64.tar.gz</span><br><span class=\"line\">tar -xvf frp\\_<span class=\"variable\">$FRP_VER</span>\\_linux_amd64.tar.gz &amp;&amp; \\</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -f frp_&#123;<span class=\"variable\">$FRP_VER</span>&#125;_linux_amd64.tar.gz</span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/frp/ /usr/local/bin/frp/</span><br><span class=\"line\">sudo <span class=\"built_in\">mv</span> frp_<span class=\"variable\">$&#123;FRP_VER&#125;</span>_linux_amd64/frps /usr/local/bin/frp/</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/frp/frps.ini &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = hub.xiaoxx.cc</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">bind_udp_port = 7001</span><br><span class=\"line\">kcp_bind_port = 7000</span><br><span class=\"line\">dashboard_port = 7500</span><br><span class=\"line\">subdomain_host = hub.xiaoxx.cc</span><br><span class=\"line\">vhost_http_port = 8080</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/systemd/system/frps.service &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frps daemon</span><br><span class=\"line\">After=syslog.target  network.target</span><br><span class=\"line\">Wants=network.target</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frp/frps -c /etc/frp/frps.ini</span><br><span class=\"line\">Restart= always</span><br><span class=\"line\">RestartSec=1min</span><br><span class=\"line\">ExecStop=/usr/bin/killall frps</span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> frps</span><br><span class=\"line\">sudo systemctl start frps</span><br><span class=\"line\">systemctl status frps</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"frpc-ini\"><a href=\"#frpc-ini\" class=\"headerlink\" title=\"frpc.ini\"></a>frpc.ini</h1><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[web]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = http</span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">subdomain</span> = test</span><br></pre></td></tr></table></figure>"},{"title":"用JS脚本实现微信公众号后台会员卡信息导出","date":"2019-07-06T03:36:41.000Z","_content":"使用教程：[如何导出微信公众号的会员信息](/wechat-vip-how-to)\n\n{% note info no-icon %}\n本文讲实现过程\n{% endnote %}\n\n> 交代背景：微信公众号认证快到期了，没有需求就不想再继续认证，一年300有点贵。但是顾客的会员卡是用微信的卡券功能办理的，就需要导出所有会员的信息并且导入到另一个会员管理系统里面。\n\n查了几遍微信公众号开发者的文档，发现只可以用API得到关注列表，或者创建会员卡，就是不可以得到会员信息。看来是故意的不想让我轻易导出会员信息。\n\n想了几种思路：Python？手动导出？javascript？\n会员两百多个，手动也不是不可以，但是作为程序员，能让电脑自己动我就绝不动。\n<!--more-->\n至于为什么没用Python，主要是公众号后台的登录认证有点复杂，又是输密码又是扫码，还认浏览器，对python相当不友好。\n\n于是面对着这个页面，想了很久的我想到用Javascript。\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/会员详情页面.png)\n\n不是有`document.getElementsByClassName`嘛，我只要找到放信息的标签的class就好了。\n```js\nvar info = document.getElementsByClassName(\"msg_pre_view\")[0].innerText\n```\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/console1.png)\n这样得到的就是以回车为分隔的会员信息，很好的第一步。\n\n下一句就是把它转换成数组：\n```js\nvar info_array = info.split(\"\\n\")\n```\n\n然后把会员名后面的方框去掉，因为那里是一只小笔，也被抓进来了：\n```js\ninfo_array[1] = info_array[1].replace(\" \",\"\")\n```\n现在info_array就长这个样子\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_array.png)\n\n如你所见，表头和内容需要分离，现在在同一行。\n```js\nvar info_es = []\nvar info_head = []\nfor (var i=0;i<8;i++){\n    info_head[i]=info_array.splice(0,1)[0];//偶数行为head\n    info_es[i]=info_array.splice(0,1)[0]; //奇数行为内容\n}\n```\n这样`info_es`里存的才是我需要的信息。\n\n接下来还有会员号和积分，没有和上面的信息在同一个class里面，就另外获取一下：\n```js\nvar card_no = document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[1].innerText\nvar card_point = parseInt(document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[2].innerText)\ninfo_head.push(\"会员号\",\"积分\")\ninfo_es.push(card_no,card_point)\n```\n在后面就把会员号和积分添加进刚才数组的末尾。\n\n现在，info_es就长这个样子\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_es.png)\n那为了保存我现在得到的数据，我试过用cookie，但是有空间限制，并存不下我两百多个会员的信息，所以后来是使用了localstorage，更健壮也比cookie大很多，而且存取只要两句话：\n\n```js\nlocalStorage.setItem(\"csv\",csv);//存\nlocalStorage.getItem(\"csv\");//取\n```\n\n就喜欢这么简单的\n\n不过在存之前先把我们数组转换成csv的格式\n```js\nvar csv = info_es.join(\",\")\n```\n![csv](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/csv.png)\n所谓csv格式就是，逗号分隔数据，以`\\n`换行符来分隔行，这里是一行的数据，所以还没看到`\\n`。\n\n接下来就是，把csv变量存进localStorage里\n```js\nlocalStorage.setItem(\"csv\",csv);\n```\n\n已经很完美了，但这还只是一行，我们的目标是星辰和大海。\n\n为了实现页内跳转，我用`window.location.href`这个值来定义当前的URL，这样就不必打开新窗口再关闭。\n\n下面讲讲主要思路：在会员列表页开始，计数器写1，点第一个会员的详情，把数据弄好存进localstorage，返回会员列表页，计数器加一，点第二个， 读取localstorage里的csv，把当前会员数据追加进csv，存csv，以此类推，计数器加到大于10的时候点下一页的按钮，然后计数器写1。\n\n还有一个问题就是列表页的js代码不能马上就运行，列表还没加载出来，会报错。要用`window.addEventListener('load', function() {}`来判断页面加载完成，完成后就执行{}里的语句。\n\n总的代码：\n\n```js\nfunction read_info(){\n        var info = document.getElementsByClassName(\"msg_pre_view\")[0].innerText\n        var info_array = info.split(\"\\n\")//转换信息为数组\n        info_array[1] = info_array[1].replace(\" \",\"\")//删掉会员名后面小笔的图标\n        var info_es = []\n        var info_head = []\n        for (var i=0;i<8;i++){\n            info_head[i]=info_array.splice(0,1)[0];//偶数行为head\n            info_es[i]=info_array.splice(0,1)[0]; //奇数行为内容\n        }\n        var card_no = document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[1].innerText\n        var card_point = parseInt(document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[2].innerText)\n        info_head.push(\"会员号\",\"积分\")\n        info_es.push(card_no,card_point)\n        var csv = info_es.join(\",\")\n        return csv\n    }\n    window.addEventListener('load', function() {\n        var step = parseInt(getCookie(\"step\"))//这个就是计数器\n        if(window.location.search.has(\"action=user_list\")){//分支1：在会员列表页\n            if (getCookie(\"step\")==\"\"){//如果第一次运行脚本，计数器写1\n                setCookie(\"step\",\"1\");\n                step = 1;\n            }\n            if(step>10){//计数器大于10的时候把自己写1，点下一页按钮\n                step=1\n                setCookie(\"step\",step)\n                try {\n                    document.getElementById(\"js_next_page\").click()//去往下一页\n                }\n                catch(err) {//如果没有下一页可以去了就提示完成，下载csv文件\n                    alert(\"导出完成，下载csv文件\")\n                    var csv = localStorage.getItem(\"csv\")\n                    csv = \"会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n\"+csv\n                    window.open(\"data:text/csv;charset=utf-8,\"+csv)\n                }\n                console.log(\"next page\")\n                return//这个return必须要否则下一页的点击速度赶不上去详情页的速度\n            }\n            console.log(\"step:\"+step)\n            setCookie(\"back_url\",window.location.href)//把列表页的URL存进cookie\n            window.location.href=document.getElementsByClassName(\"tbody\")[0].getElementsByTagName(\"a\")[step*2-1].href//去往详情页\n            return\n        }\n        if(window.location.search.has(\"action=user_detail\")){//分支2：在会员详情页\n            step++;\n            setCookie(\"step\",step)\n            /*在这里做事情*/\n            var csv = localStorage.getItem(\"csv\")//拿出存在localstorage里的csv变量\n            if (csv == null){//如果是第一次运行脚本，csv的值就是null\n                csv = \"\"\n                localStorage.setItem(\"csv\",csv)\n            }\n            csv = csv+\"\\n\"+read_info()//用换行符分隔已有的数据和这次读来的数据\n            localStorage.setItem(\"csv\",csv)//用localstorage存储csv\n            console.log(\"back\")\n            window.location.href=getCookie(\"back_url\")//回到列表页，比用下面这行更有鲁棒性\n            //window.history.back();//后退\n            //return\n        }\n    }, false);\n```\n\n最后，它需要一个运行的载体，那就是tampermonkey没错了，完整的脚本我还上传到了GreasyFork，在这里：[微信公众号会员信息导出](https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export)\n\n需要的尽管拿去用吧。","source":"_posts/Wechat-vip-info-export.md","raw":"---\ntitle: 用JS脚本实现微信公众号后台会员卡信息导出\ndate: 2019-07-06 11:36:41\ntags: Javascript\n---\n使用教程：[如何导出微信公众号的会员信息](/wechat-vip-how-to)\n\n{% note info no-icon %}\n本文讲实现过程\n{% endnote %}\n\n> 交代背景：微信公众号认证快到期了，没有需求就不想再继续认证，一年300有点贵。但是顾客的会员卡是用微信的卡券功能办理的，就需要导出所有会员的信息并且导入到另一个会员管理系统里面。\n\n查了几遍微信公众号开发者的文档，发现只可以用API得到关注列表，或者创建会员卡，就是不可以得到会员信息。看来是故意的不想让我轻易导出会员信息。\n\n想了几种思路：Python？手动导出？javascript？\n会员两百多个，手动也不是不可以，但是作为程序员，能让电脑自己动我就绝不动。\n<!--more-->\n至于为什么没用Python，主要是公众号后台的登录认证有点复杂，又是输密码又是扫码，还认浏览器，对python相当不友好。\n\n于是面对着这个页面，想了很久的我想到用Javascript。\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/会员详情页面.png)\n\n不是有`document.getElementsByClassName`嘛，我只要找到放信息的标签的class就好了。\n```js\nvar info = document.getElementsByClassName(\"msg_pre_view\")[0].innerText\n```\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/console1.png)\n这样得到的就是以回车为分隔的会员信息，很好的第一步。\n\n下一句就是把它转换成数组：\n```js\nvar info_array = info.split(\"\\n\")\n```\n\n然后把会员名后面的方框去掉，因为那里是一只小笔，也被抓进来了：\n```js\ninfo_array[1] = info_array[1].replace(\" \",\"\")\n```\n现在info_array就长这个样子\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_array.png)\n\n如你所见，表头和内容需要分离，现在在同一行。\n```js\nvar info_es = []\nvar info_head = []\nfor (var i=0;i<8;i++){\n    info_head[i]=info_array.splice(0,1)[0];//偶数行为head\n    info_es[i]=info_array.splice(0,1)[0]; //奇数行为内容\n}\n```\n这样`info_es`里存的才是我需要的信息。\n\n接下来还有会员号和积分，没有和上面的信息在同一个class里面，就另外获取一下：\n```js\nvar card_no = document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[1].innerText\nvar card_point = parseInt(document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[2].innerText)\ninfo_head.push(\"会员号\",\"积分\")\ninfo_es.push(card_no,card_point)\n```\n在后面就把会员号和积分添加进刚才数组的末尾。\n\n现在，info_es就长这个样子\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_es.png)\n那为了保存我现在得到的数据，我试过用cookie，但是有空间限制，并存不下我两百多个会员的信息，所以后来是使用了localstorage，更健壮也比cookie大很多，而且存取只要两句话：\n\n```js\nlocalStorage.setItem(\"csv\",csv);//存\nlocalStorage.getItem(\"csv\");//取\n```\n\n就喜欢这么简单的\n\n不过在存之前先把我们数组转换成csv的格式\n```js\nvar csv = info_es.join(\",\")\n```\n![csv](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/csv.png)\n所谓csv格式就是，逗号分隔数据，以`\\n`换行符来分隔行，这里是一行的数据，所以还没看到`\\n`。\n\n接下来就是，把csv变量存进localStorage里\n```js\nlocalStorage.setItem(\"csv\",csv);\n```\n\n已经很完美了，但这还只是一行，我们的目标是星辰和大海。\n\n为了实现页内跳转，我用`window.location.href`这个值来定义当前的URL，这样就不必打开新窗口再关闭。\n\n下面讲讲主要思路：在会员列表页开始，计数器写1，点第一个会员的详情，把数据弄好存进localstorage，返回会员列表页，计数器加一，点第二个， 读取localstorage里的csv，把当前会员数据追加进csv，存csv，以此类推，计数器加到大于10的时候点下一页的按钮，然后计数器写1。\n\n还有一个问题就是列表页的js代码不能马上就运行，列表还没加载出来，会报错。要用`window.addEventListener('load', function() {}`来判断页面加载完成，完成后就执行{}里的语句。\n\n总的代码：\n\n```js\nfunction read_info(){\n        var info = document.getElementsByClassName(\"msg_pre_view\")[0].innerText\n        var info_array = info.split(\"\\n\")//转换信息为数组\n        info_array[1] = info_array[1].replace(\" \",\"\")//删掉会员名后面小笔的图标\n        var info_es = []\n        var info_head = []\n        for (var i=0;i<8;i++){\n            info_head[i]=info_array.splice(0,1)[0];//偶数行为head\n            info_es[i]=info_array.splice(0,1)[0]; //奇数行为内容\n        }\n        var card_no = document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[1].innerText\n        var card_point = parseInt(document.getElementsByClassName(\"msg_pre_view\")[1].getElementsByTagName(\"span\")[2].innerText)\n        info_head.push(\"会员号\",\"积分\")\n        info_es.push(card_no,card_point)\n        var csv = info_es.join(\",\")\n        return csv\n    }\n    window.addEventListener('load', function() {\n        var step = parseInt(getCookie(\"step\"))//这个就是计数器\n        if(window.location.search.has(\"action=user_list\")){//分支1：在会员列表页\n            if (getCookie(\"step\")==\"\"){//如果第一次运行脚本，计数器写1\n                setCookie(\"step\",\"1\");\n                step = 1;\n            }\n            if(step>10){//计数器大于10的时候把自己写1，点下一页按钮\n                step=1\n                setCookie(\"step\",step)\n                try {\n                    document.getElementById(\"js_next_page\").click()//去往下一页\n                }\n                catch(err) {//如果没有下一页可以去了就提示完成，下载csv文件\n                    alert(\"导出完成，下载csv文件\")\n                    var csv = localStorage.getItem(\"csv\")\n                    csv = \"会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n\"+csv\n                    window.open(\"data:text/csv;charset=utf-8,\"+csv)\n                }\n                console.log(\"next page\")\n                return//这个return必须要否则下一页的点击速度赶不上去详情页的速度\n            }\n            console.log(\"step:\"+step)\n            setCookie(\"back_url\",window.location.href)//把列表页的URL存进cookie\n            window.location.href=document.getElementsByClassName(\"tbody\")[0].getElementsByTagName(\"a\")[step*2-1].href//去往详情页\n            return\n        }\n        if(window.location.search.has(\"action=user_detail\")){//分支2：在会员详情页\n            step++;\n            setCookie(\"step\",step)\n            /*在这里做事情*/\n            var csv = localStorage.getItem(\"csv\")//拿出存在localstorage里的csv变量\n            if (csv == null){//如果是第一次运行脚本，csv的值就是null\n                csv = \"\"\n                localStorage.setItem(\"csv\",csv)\n            }\n            csv = csv+\"\\n\"+read_info()//用换行符分隔已有的数据和这次读来的数据\n            localStorage.setItem(\"csv\",csv)//用localstorage存储csv\n            console.log(\"back\")\n            window.location.href=getCookie(\"back_url\")//回到列表页，比用下面这行更有鲁棒性\n            //window.history.back();//后退\n            //return\n        }\n    }, false);\n```\n\n最后，它需要一个运行的载体，那就是tampermonkey没错了，完整的脚本我还上传到了GreasyFork，在这里：[微信公众号会员信息导出](https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export)\n\n需要的尽管拿去用吧。","slug":"Wechat-vip-info-export","published":1,"updated":"2022-06-03T16:41:20.462Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn000036z0h14t38iai","content":"<p>使用教程：<a href=\"/wechat-vip-how-to\">如何导出微信公众号的会员信息</a></p>\n<div class=\"note info no-icon\"><p>本文讲实现过程</p>\n</div>\n\n<blockquote>\n<p>交代背景：微信公众号认证快到期了，没有需求就不想再继续认证，一年300有点贵。但是顾客的会员卡是用微信的卡券功能办理的，就需要导出所有会员的信息并且导入到另一个会员管理系统里面。</p>\n</blockquote>\n<p>查了几遍微信公众号开发者的文档，发现只可以用API得到关注列表，或者创建会员卡，就是不可以得到会员信息。看来是故意的不想让我轻易导出会员信息。</p>\n<p>想了几种思路：Python？手动导出？javascript？<br>会员两百多个，手动也不是不可以，但是作为程序员，能让电脑自己动我就绝不动。</p>\n<span id=\"more\"></span>\n<p>至于为什么没用Python，主要是公众号后台的登录认证有点复杂，又是输密码又是扫码，还认浏览器，对python相当不友好。</p>\n<p>于是面对着这个页面，想了很久的我想到用Javascript。<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/%E4%BC%9A%E5%91%98%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2.png\"></p>\n<p>不是有<code>document.getElementsByClassName</code>嘛，我只要找到放信息的标签的class就好了。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">0</span>].<span class=\"property\">innerText</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/console1.png\"><br>这样得到的就是以回车为分隔的会员信息，很好的第一步。</p>\n<p>下一句就是把它转换成数组：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info_array = info.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;\\n&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>然后把会员名后面的方框去掉，因为那里是一只小笔，也被抓进来了：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">info_array[<span class=\"number\">1</span>] = info_array[<span class=\"number\">1</span>].<span class=\"title function_\">replace</span>(<span class=\"string\">&quot; &quot;</span>,<span class=\"string\">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>现在info_array就长这个样子<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_array.png\"></p>\n<p>如你所见，表头和内容需要分离，现在在同一行。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info_es = []</span><br><span class=\"line\"><span class=\"keyword\">var</span> info_head = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">8</span>;i++)&#123;</span><br><span class=\"line\">    info_head[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>];<span class=\"comment\">//偶数行为head</span></span><br><span class=\"line\">    info_es[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>]; <span class=\"comment\">//奇数行为内容</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样<code>info_es</code>里存的才是我需要的信息。</p>\n<p>接下来还有会员号和积分，没有和上面的信息在同一个class里面，就另外获取一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> card_no = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> card_point = <span class=\"built_in\">parseInt</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">2</span>].<span class=\"property\">innerText</span>)</span><br><span class=\"line\">info_head.<span class=\"title function_\">push</span>(<span class=\"string\">&quot;会员号&quot;</span>,<span class=\"string\">&quot;积分&quot;</span>)</span><br><span class=\"line\">info_es.<span class=\"title function_\">push</span>(card_no,card_point)</span><br></pre></td></tr></table></figure>\n<p>在后面就把会员号和积分添加进刚才数组的末尾。</p>\n<p>现在，info_es就长这个样子<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_es.png\"><br>那为了保存我现在得到的数据，我试过用cookie，但是有空间限制，并存不下我两百多个会员的信息，所以后来是使用了localstorage，更健壮也比cookie大很多，而且存取只要两句话：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv);<span class=\"comment\">//存</span></span><br><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>);<span class=\"comment\">//取</span></span><br></pre></td></tr></table></figure>\n\n<p>就喜欢这么简单的</p>\n<p>不过在存之前先把我们数组转换成csv的格式</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> csv = info_es.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/csv.png\" alt=\"csv\"><br>所谓csv格式就是，逗号分隔数据，以<code>\\n</code>换行符来分隔行，这里是一行的数据，所以还没看到<code>\\n</code>。</p>\n<p>接下来就是，把csv变量存进localStorage里</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv);</span><br></pre></td></tr></table></figure>\n\n<p>已经很完美了，但这还只是一行，我们的目标是星辰和大海。</p>\n<p>为了实现页内跳转，我用<code>window.location.href</code>这个值来定义当前的URL，这样就不必打开新窗口再关闭。</p>\n<p>下面讲讲主要思路：在会员列表页开始，计数器写1，点第一个会员的详情，把数据弄好存进localstorage，返回会员列表页，计数器加一，点第二个， 读取localstorage里的csv，把当前会员数据追加进csv，存csv，以此类推，计数器加到大于10的时候点下一页的按钮，然后计数器写1。</p>\n<p>还有一个问题就是列表页的js代码不能马上就运行，列表还没加载出来，会报错。要用<code>window.addEventListener(&#39;load&#39;, function() &#123;&#125;</code>来判断页面加载完成，完成后就执行{}里的语句。</p>\n<p>总的代码：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">read_info</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> info = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">0</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_array = info.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;\\n&quot;</span>)<span class=\"comment\">//转换信息为数组</span></span><br><span class=\"line\">        info_array[<span class=\"number\">1</span>] = info_array[<span class=\"number\">1</span>].<span class=\"title function_\">replace</span>(<span class=\"string\">&quot; &quot;</span>,<span class=\"string\">&quot;&quot;</span>)<span class=\"comment\">//删掉会员名后面小笔的图标</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_es = []</span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_head = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">8</span>;i++)&#123;</span><br><span class=\"line\">            info_head[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>];<span class=\"comment\">//偶数行为head</span></span><br><span class=\"line\">            info_es[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>]; <span class=\"comment\">//奇数行为内容</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> card_no = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> card_point = <span class=\"built_in\">parseInt</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">2</span>].<span class=\"property\">innerText</span>)</span><br><span class=\"line\">        info_head.<span class=\"title function_\">push</span>(<span class=\"string\">&quot;会员号&quot;</span>,<span class=\"string\">&quot;积分&quot;</span>)</span><br><span class=\"line\">        info_es.<span class=\"title function_\">push</span>(card_no,card_point)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> csv = info_es.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> csv</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> step = <span class=\"built_in\">parseInt</span>(<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;step&quot;</span>))<span class=\"comment\">//这个就是计数器</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">search</span>.<span class=\"title function_\">has</span>(<span class=\"string\">&quot;action=user_list&quot;</span>))&#123;<span class=\"comment\">//分支1：在会员列表页</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;step&quot;</span>)==<span class=\"string\">&quot;&quot;</span>)&#123;<span class=\"comment\">//如果第一次运行脚本，计数器写1</span></span><br><span class=\"line\">                <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">                step = <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(step&gt;<span class=\"number\">10</span>)&#123;<span class=\"comment\">//计数器大于10的时候把自己写1，点下一页按钮</span></span><br><span class=\"line\">                step=<span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,step)</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;js_next_page&quot;</span>).<span class=\"title function_\">click</span>()<span class=\"comment\">//去往下一页</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">catch</span>(err) &#123;<span class=\"comment\">//如果没有下一页可以去了就提示完成，下载csv文件</span></span><br><span class=\"line\">                    <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;导出完成，下载csv文件&quot;</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\">                    csv = <span class=\"string\">&quot;会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n&quot;</span>+csv</span><br><span class=\"line\">                    <span class=\"variable language_\">window</span>.<span class=\"title function_\">open</span>(<span class=\"string\">&quot;data:text/csv;charset=utf-8,&quot;</span>+csv)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;next page&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span><span class=\"comment\">//这个return必须要否则下一页的点击速度赶不上去详情页的速度</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;step:&quot;</span>+step)</span><br><span class=\"line\">            <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;back_url&quot;</span>,<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>)<span class=\"comment\">//把列表页的URL存进cookie</span></span><br><span class=\"line\">            <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>=<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;tbody&quot;</span>)[<span class=\"number\">0</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;a&quot;</span>)[step*<span class=\"number\">2</span>-<span class=\"number\">1</span>].<span class=\"property\">href</span><span class=\"comment\">//去往详情页</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">search</span>.<span class=\"title function_\">has</span>(<span class=\"string\">&quot;action=user_detail&quot;</span>))&#123;<span class=\"comment\">//分支2：在会员详情页</span></span><br><span class=\"line\">            step++;</span><br><span class=\"line\">            <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,step)</span><br><span class=\"line\">            <span class=\"comment\">/*在这里做事情*/</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)<span class=\"comment\">//拿出存在localstorage里的csv变量</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (csv == <span class=\"literal\">null</span>)&#123;<span class=\"comment\">//如果是第一次运行脚本，csv的值就是null</span></span><br><span class=\"line\">                csv = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">                <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            csv = csv+<span class=\"string\">&quot;\\n&quot;</span>+<span class=\"title function_\">read_info</span>()<span class=\"comment\">//用换行符分隔已有的数据和这次读来的数据</span></span><br><span class=\"line\">            <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv)<span class=\"comment\">//用localstorage存储csv</span></span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;back&quot;</span>)</span><br><span class=\"line\">            <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>=<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;back_url&quot;</span>)<span class=\"comment\">//回到列表页，比用下面这行更有鲁棒性</span></span><br><span class=\"line\">            <span class=\"comment\">//window.history.back();//后退</span></span><br><span class=\"line\">            <span class=\"comment\">//return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n\n<p>最后，它需要一个运行的载体，那就是tampermonkey没错了，完整的脚本我还上传到了GreasyFork，在这里：<a href=\"https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export\">微信公众号会员信息导出</a></p>\n<p>需要的尽管拿去用吧。</p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>使用教程：<a href=\"/wechat-vip-how-to\">如何导出微信公众号的会员信息</a></p>\n<div class=\"note info no-icon\"><p>本文讲实现过程</p>\n</div>\n\n<blockquote>\n<p>交代背景：微信公众号认证快到期了，没有需求就不想再继续认证，一年300有点贵。但是顾客的会员卡是用微信的卡券功能办理的，就需要导出所有会员的信息并且导入到另一个会员管理系统里面。</p>\n</blockquote>\n<p>查了几遍微信公众号开发者的文档，发现只可以用API得到关注列表，或者创建会员卡，就是不可以得到会员信息。看来是故意的不想让我轻易导出会员信息。</p>\n<p>想了几种思路：Python？手动导出？javascript？<br>会员两百多个，手动也不是不可以，但是作为程序员，能让电脑自己动我就绝不动。</p>","more":"<p>至于为什么没用Python，主要是公众号后台的登录认证有点复杂，又是输密码又是扫码，还认浏览器，对python相当不友好。</p>\n<p>于是面对着这个页面，想了很久的我想到用Javascript。<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/%E4%BC%9A%E5%91%98%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2.png\"></p>\n<p>不是有<code>document.getElementsByClassName</code>嘛，我只要找到放信息的标签的class就好了。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">0</span>].<span class=\"property\">innerText</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/console1.png\"><br>这样得到的就是以回车为分隔的会员信息，很好的第一步。</p>\n<p>下一句就是把它转换成数组：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info_array = info.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;\\n&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>然后把会员名后面的方框去掉，因为那里是一只小笔，也被抓进来了：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">info_array[<span class=\"number\">1</span>] = info_array[<span class=\"number\">1</span>].<span class=\"title function_\">replace</span>(<span class=\"string\">&quot; &quot;</span>,<span class=\"string\">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>现在info_array就长这个样子<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_array.png\"></p>\n<p>如你所见，表头和内容需要分离，现在在同一行。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> info_es = []</span><br><span class=\"line\"><span class=\"keyword\">var</span> info_head = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">8</span>;i++)&#123;</span><br><span class=\"line\">    info_head[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>];<span class=\"comment\">//偶数行为head</span></span><br><span class=\"line\">    info_es[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>]; <span class=\"comment\">//奇数行为内容</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样<code>info_es</code>里存的才是我需要的信息。</p>\n<p>接下来还有会员号和积分，没有和上面的信息在同一个class里面，就另外获取一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> card_no = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> card_point = <span class=\"built_in\">parseInt</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">2</span>].<span class=\"property\">innerText</span>)</span><br><span class=\"line\">info_head.<span class=\"title function_\">push</span>(<span class=\"string\">&quot;会员号&quot;</span>,<span class=\"string\">&quot;积分&quot;</span>)</span><br><span class=\"line\">info_es.<span class=\"title function_\">push</span>(card_no,card_point)</span><br></pre></td></tr></table></figure>\n<p>在后面就把会员号和积分添加进刚才数组的末尾。</p>\n<p>现在，info_es就长这个样子<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/info_es.png\"><br>那为了保存我现在得到的数据，我试过用cookie，但是有空间限制，并存不下我两百多个会员的信息，所以后来是使用了localstorage，更健壮也比cookie大很多，而且存取只要两句话：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv);<span class=\"comment\">//存</span></span><br><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>);<span class=\"comment\">//取</span></span><br></pre></td></tr></table></figure>\n\n<p>就喜欢这么简单的</p>\n<p>不过在存之前先把我们数组转换成csv的格式</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> csv = info_es.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/Wechat-vip-info-export/csv.png\" alt=\"csv\"><br>所谓csv格式就是，逗号分隔数据，以<code>\\n</code>换行符来分隔行，这里是一行的数据，所以还没看到<code>\\n</code>。</p>\n<p>接下来就是，把csv变量存进localStorage里</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv);</span><br></pre></td></tr></table></figure>\n\n<p>已经很完美了，但这还只是一行，我们的目标是星辰和大海。</p>\n<p>为了实现页内跳转，我用<code>window.location.href</code>这个值来定义当前的URL，这样就不必打开新窗口再关闭。</p>\n<p>下面讲讲主要思路：在会员列表页开始，计数器写1，点第一个会员的详情，把数据弄好存进localstorage，返回会员列表页，计数器加一，点第二个， 读取localstorage里的csv，把当前会员数据追加进csv，存csv，以此类推，计数器加到大于10的时候点下一页的按钮，然后计数器写1。</p>\n<p>还有一个问题就是列表页的js代码不能马上就运行，列表还没加载出来，会报错。要用<code>window.addEventListener(&#39;load&#39;, function() &#123;&#125;</code>来判断页面加载完成，完成后就执行{}里的语句。</p>\n<p>总的代码：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">read_info</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> info = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">0</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_array = info.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;\\n&quot;</span>)<span class=\"comment\">//转换信息为数组</span></span><br><span class=\"line\">        info_array[<span class=\"number\">1</span>] = info_array[<span class=\"number\">1</span>].<span class=\"title function_\">replace</span>(<span class=\"string\">&quot; &quot;</span>,<span class=\"string\">&quot;&quot;</span>)<span class=\"comment\">//删掉会员名后面小笔的图标</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_es = []</span><br><span class=\"line\">        <span class=\"keyword\">var</span> info_head = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">8</span>;i++)&#123;</span><br><span class=\"line\">            info_head[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>];<span class=\"comment\">//偶数行为head</span></span><br><span class=\"line\">            info_es[i]=info_array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>)[<span class=\"number\">0</span>]; <span class=\"comment\">//奇数行为内容</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> card_no = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">innerText</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> card_point = <span class=\"built_in\">parseInt</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;msg_pre_view&quot;</span>)[<span class=\"number\">1</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;span&quot;</span>)[<span class=\"number\">2</span>].<span class=\"property\">innerText</span>)</span><br><span class=\"line\">        info_head.<span class=\"title function_\">push</span>(<span class=\"string\">&quot;会员号&quot;</span>,<span class=\"string\">&quot;积分&quot;</span>)</span><br><span class=\"line\">        info_es.<span class=\"title function_\">push</span>(card_no,card_point)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> csv = info_es.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> csv</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> step = <span class=\"built_in\">parseInt</span>(<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;step&quot;</span>))<span class=\"comment\">//这个就是计数器</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">search</span>.<span class=\"title function_\">has</span>(<span class=\"string\">&quot;action=user_list&quot;</span>))&#123;<span class=\"comment\">//分支1：在会员列表页</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;step&quot;</span>)==<span class=\"string\">&quot;&quot;</span>)&#123;<span class=\"comment\">//如果第一次运行脚本，计数器写1</span></span><br><span class=\"line\">                <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">                step = <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(step&gt;<span class=\"number\">10</span>)&#123;<span class=\"comment\">//计数器大于10的时候把自己写1，点下一页按钮</span></span><br><span class=\"line\">                step=<span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,step)</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;js_next_page&quot;</span>).<span class=\"title function_\">click</span>()<span class=\"comment\">//去往下一页</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">catch</span>(err) &#123;<span class=\"comment\">//如果没有下一页可以去了就提示完成，下载csv文件</span></span><br><span class=\"line\">                    <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;导出完成，下载csv文件&quot;</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\">                    csv = <span class=\"string\">&quot;会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n&quot;</span>+csv</span><br><span class=\"line\">                    <span class=\"variable language_\">window</span>.<span class=\"title function_\">open</span>(<span class=\"string\">&quot;data:text/csv;charset=utf-8,&quot;</span>+csv)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;next page&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span><span class=\"comment\">//这个return必须要否则下一页的点击速度赶不上去详情页的速度</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;step:&quot;</span>+step)</span><br><span class=\"line\">            <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;back_url&quot;</span>,<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>)<span class=\"comment\">//把列表页的URL存进cookie</span></span><br><span class=\"line\">            <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>=<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByClassName</span>(<span class=\"string\">&quot;tbody&quot;</span>)[<span class=\"number\">0</span>].<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;a&quot;</span>)[step*<span class=\"number\">2</span>-<span class=\"number\">1</span>].<span class=\"property\">href</span><span class=\"comment\">//去往详情页</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">search</span>.<span class=\"title function_\">has</span>(<span class=\"string\">&quot;action=user_detail&quot;</span>))&#123;<span class=\"comment\">//分支2：在会员详情页</span></span><br><span class=\"line\">            step++;</span><br><span class=\"line\">            <span class=\"title function_\">setCookie</span>(<span class=\"string\">&quot;step&quot;</span>,step)</span><br><span class=\"line\">            <span class=\"comment\">/*在这里做事情*/</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)<span class=\"comment\">//拿出存在localstorage里的csv变量</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (csv == <span class=\"literal\">null</span>)&#123;<span class=\"comment\">//如果是第一次运行脚本，csv的值就是null</span></span><br><span class=\"line\">                csv = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">                <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            csv = csv+<span class=\"string\">&quot;\\n&quot;</span>+<span class=\"title function_\">read_info</span>()<span class=\"comment\">//用换行符分隔已有的数据和这次读来的数据</span></span><br><span class=\"line\">            <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(<span class=\"string\">&quot;csv&quot;</span>,csv)<span class=\"comment\">//用localstorage存储csv</span></span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;back&quot;</span>)</span><br><span class=\"line\">            <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>=<span class=\"title function_\">getCookie</span>(<span class=\"string\">&quot;back_url&quot;</span>)<span class=\"comment\">//回到列表页，比用下面这行更有鲁棒性</span></span><br><span class=\"line\">            <span class=\"comment\">//window.history.back();//后退</span></span><br><span class=\"line\">            <span class=\"comment\">//return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n\n<p>最后，它需要一个运行的载体，那就是tampermonkey没错了，完整的脚本我还上传到了GreasyFork，在这里：<a href=\"https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export\">微信公众号会员信息导出</a></p>\n<p>需要的尽管拿去用吧。</p>"},{"title":"使用caddy实现v2ray流量伪装","date":"2019-10-09T08:45:23.000Z","_content":"{% note info no-icon %}\n[Caddy](https://dengxiaolong.com/caddy/zh/)：一个方便配置的 web server\n{% endnote %}\n\n本质上要做的事情是让caddy做反向代理服务器转发v2ray流量，caddy的好处是自己申请证书实现https，这样伪装成的tls流量更不容易被发现\n\n<!--more-->\n\n# 安装\n\n## Get caddy\n\n```sh\nsudo curl https://getcaddy.com | bash -s personal\n```\n\n## Get v2ray\n\n```sh\nsudo bash <(curl -L -s https://install.direct/go.sh)\n```\n\n# 配置\n\n## 注册caddy服务\n\n让caddy拥有非root用户打开端口的权限\n\n```sh\nsudo setcap 'cap_net_bind_service=+ep' /usr/local/bin/caddy\n```\n\n如果出现`setcap: command not found`那就安装一下`libcap2-bin`：\n\n```sh\nsudo apt install libcap2-bin\n```\n\n创建用户和所需目录并且只赋予必要的权限\n\n```sh\nsudo groupadd -g 33 www-data\nsudo useradd \\\n  -g www-data --no-user-group \\\n  --home-dir /var/www --no-create-home \\\n  --shell /usr/sbin/nologin \\\n  --system --uid 33 www-data\n\nsudo mkdir /etc/ssl/caddy\nsudo chown -R root:www-data /etc/ssl/caddy\nsudo chmod 0770 /etc/ssl/caddy\n\nsudo touch /var/log/caddy.log\nsudo chown root:www-data /var/log/caddy.log\nsudo chmod 0770 /var/log/caddy.log\n\nsudo mkdir /etc/caddy\nsudo chown -R root:root /etc/caddy\nsudo touch /etc/caddy/Caddyfile\nsudo chown root:root /etc/caddy/Caddyfile\nsudo chmod 644 /etc/caddy/Caddyfile\n\nsudo mkdir /var/www\nsudo chown www-data:www-data /var/www\nsudo chmod 555 /var/www\n```\n\n上面创建了三个目录，`/etc/caddy/Caddyfile` 是 Caddy 的配置文件，`/etc/ssl/caddy` 存放证书，`/var/www` 是默认的网站目录。\n\n把官方提供的脚本 [caddy.service](https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/caddy.service)下载到 `/etc/systemd/system/` 并重新加载 `systemd daemon`，让配置生效。\n\n```sh\nwget https://raw.githubusercontent.com/caddyserver/caddy/master/dist/init/linux-systemd/caddy.service\nsudo cp caddy.service /etc/systemd/system/\nsudo chown root:root /etc/systemd/system/caddy.service\nsudo chmod 644 /etc/systemd/system/caddy.service\nsudo systemctl daemon-reload\nsudo systemctl start caddy.service\n```\n\n让 Caddy 开机自启。\n\n```sh\nsudo systemctl enable caddy.service\n```\n\n至此，Caddy 已经成功注册服务，并能够开机自启了。\n\n## 配置Caddyfile\n\n修改`/etc/caddy/Caddyfile`文件内容如下，用来配置反向代理，`mydomain.me`替换为你的域名：\n（点右上链接后可以编辑配置文件后再复制）\n\n```caddyfile /etc/caddy/Caddyfile https://paste.to/en/clone/5de34d1fbce5a Caddyfile\nmydomain.me\n{\n  root /var/www/mydomain.me\n  tls 你的邮箱\n  log /var/log/caddy.log\n  proxy /ray localhost:10000 {\n    websocket\n    header_upstream -Origin\n  }\n}\n```\n\n重启caddy服务器\n\n```sh\nsudo systemctl restart caddy\n```\n\n## 配置v2ray conf\n\n修改`/etc/v2ray/config.json`文件内容：\n\n```json /etc/v2ray/config.json https://paste.to/en/clone/5de35ac9c897b config.json\n{\n  \"inbounds\": [\n    {\n      \"port\": 10000,\n      \"listen\":\"127.0.0.1\",//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口\n      \"protocol\": \"vmess\",\n      \"settings\": {\n        \"clients\": [\n          {\n            \"id\": \"b831381d-6324-4d53-ad4f-8cda48b30811\",\n            \"alterId\": 64\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"ws\",\n        \"wsSettings\": {\n        \"path\": \"/ray\"\n        }\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"protocol\": \"freedom\",\n      \"settings\": {}\n    }\n  ]\n}\n```\n\n# 完事\n\n## 客户端配置\n\n```json /etc/v2ray/config.json https://paste.to/en/clone/5de35b2f78656 config.json\n{\n  \"inbounds\": [\n    {\n      \"port\": 1080,\n      \"listen\": \"127.0.0.1\",\n      \"protocol\": \"socks\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": [\"http\", \"tls\"]\n      },\n      \"settings\": {\n        \"auth\": \"noauth\",\n        \"udp\": false\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"protocol\": \"vmess\",\n      \"settings\": {\n        \"vnext\": [\n          {\n            \"address\": \"mydomain.me\",\n            \"port\": 443,\n            \"users\": [\n              {\n                \"id\": \"b831381d-6324-4d53-ad4f-8cda48b30811\",\n                \"alterId\": 64\n              }\n            ]\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"ws\",\n        \"security\": \"tls\",\n        \"wsSettings\": {\n          \"path\": \"/ray\"\n        }\n      }\n    }\n  ]\n}\n```\n\n> 参考：\n https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd\n https://guide.v2fly.org/advanced/wss_and_web.html\n\n{% note default %}\n#### Note:另一种伪装的方式\n ```json\n \"transport\": {\n   \"quicSettings\": {\n     \"security\": \"none\",\n     \"key\": \"\",\n     \"header\": {\n     \"type\": \"wechat-video\"\n   }\n }\n ```\n{% endnote %}","source":"_posts/caddy-ws-v2ray.md","raw":"title: 使用caddy实现v2ray流量伪装\ntags:\n  - systemctl\n  - note\ndate: 2019-10-09 16:45:23\n---\n{% note info no-icon %}\n[Caddy](https://dengxiaolong.com/caddy/zh/)：一个方便配置的 web server\n{% endnote %}\n\n本质上要做的事情是让caddy做反向代理服务器转发v2ray流量，caddy的好处是自己申请证书实现https，这样伪装成的tls流量更不容易被发现\n\n<!--more-->\n\n# 安装\n\n## Get caddy\n\n```sh\nsudo curl https://getcaddy.com | bash -s personal\n```\n\n## Get v2ray\n\n```sh\nsudo bash <(curl -L -s https://install.direct/go.sh)\n```\n\n# 配置\n\n## 注册caddy服务\n\n让caddy拥有非root用户打开端口的权限\n\n```sh\nsudo setcap 'cap_net_bind_service=+ep' /usr/local/bin/caddy\n```\n\n如果出现`setcap: command not found`那就安装一下`libcap2-bin`：\n\n```sh\nsudo apt install libcap2-bin\n```\n\n创建用户和所需目录并且只赋予必要的权限\n\n```sh\nsudo groupadd -g 33 www-data\nsudo useradd \\\n  -g www-data --no-user-group \\\n  --home-dir /var/www --no-create-home \\\n  --shell /usr/sbin/nologin \\\n  --system --uid 33 www-data\n\nsudo mkdir /etc/ssl/caddy\nsudo chown -R root:www-data /etc/ssl/caddy\nsudo chmod 0770 /etc/ssl/caddy\n\nsudo touch /var/log/caddy.log\nsudo chown root:www-data /var/log/caddy.log\nsudo chmod 0770 /var/log/caddy.log\n\nsudo mkdir /etc/caddy\nsudo chown -R root:root /etc/caddy\nsudo touch /etc/caddy/Caddyfile\nsudo chown root:root /etc/caddy/Caddyfile\nsudo chmod 644 /etc/caddy/Caddyfile\n\nsudo mkdir /var/www\nsudo chown www-data:www-data /var/www\nsudo chmod 555 /var/www\n```\n\n上面创建了三个目录，`/etc/caddy/Caddyfile` 是 Caddy 的配置文件，`/etc/ssl/caddy` 存放证书，`/var/www` 是默认的网站目录。\n\n把官方提供的脚本 [caddy.service](https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/caddy.service)下载到 `/etc/systemd/system/` 并重新加载 `systemd daemon`，让配置生效。\n\n```sh\nwget https://raw.githubusercontent.com/caddyserver/caddy/master/dist/init/linux-systemd/caddy.service\nsudo cp caddy.service /etc/systemd/system/\nsudo chown root:root /etc/systemd/system/caddy.service\nsudo chmod 644 /etc/systemd/system/caddy.service\nsudo systemctl daemon-reload\nsudo systemctl start caddy.service\n```\n\n让 Caddy 开机自启。\n\n```sh\nsudo systemctl enable caddy.service\n```\n\n至此，Caddy 已经成功注册服务，并能够开机自启了。\n\n## 配置Caddyfile\n\n修改`/etc/caddy/Caddyfile`文件内容如下，用来配置反向代理，`mydomain.me`替换为你的域名：\n（点右上链接后可以编辑配置文件后再复制）\n\n```caddyfile /etc/caddy/Caddyfile https://paste.to/en/clone/5de34d1fbce5a Caddyfile\nmydomain.me\n{\n  root /var/www/mydomain.me\n  tls 你的邮箱\n  log /var/log/caddy.log\n  proxy /ray localhost:10000 {\n    websocket\n    header_upstream -Origin\n  }\n}\n```\n\n重启caddy服务器\n\n```sh\nsudo systemctl restart caddy\n```\n\n## 配置v2ray conf\n\n修改`/etc/v2ray/config.json`文件内容：\n\n```json /etc/v2ray/config.json https://paste.to/en/clone/5de35ac9c897b config.json\n{\n  \"inbounds\": [\n    {\n      \"port\": 10000,\n      \"listen\":\"127.0.0.1\",//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口\n      \"protocol\": \"vmess\",\n      \"settings\": {\n        \"clients\": [\n          {\n            \"id\": \"b831381d-6324-4d53-ad4f-8cda48b30811\",\n            \"alterId\": 64\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"ws\",\n        \"wsSettings\": {\n        \"path\": \"/ray\"\n        }\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"protocol\": \"freedom\",\n      \"settings\": {}\n    }\n  ]\n}\n```\n\n# 完事\n\n## 客户端配置\n\n```json /etc/v2ray/config.json https://paste.to/en/clone/5de35b2f78656 config.json\n{\n  \"inbounds\": [\n    {\n      \"port\": 1080,\n      \"listen\": \"127.0.0.1\",\n      \"protocol\": \"socks\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": [\"http\", \"tls\"]\n      },\n      \"settings\": {\n        \"auth\": \"noauth\",\n        \"udp\": false\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"protocol\": \"vmess\",\n      \"settings\": {\n        \"vnext\": [\n          {\n            \"address\": \"mydomain.me\",\n            \"port\": 443,\n            \"users\": [\n              {\n                \"id\": \"b831381d-6324-4d53-ad4f-8cda48b30811\",\n                \"alterId\": 64\n              }\n            ]\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"ws\",\n        \"security\": \"tls\",\n        \"wsSettings\": {\n          \"path\": \"/ray\"\n        }\n      }\n    }\n  ]\n}\n```\n\n> 参考：\n https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd\n https://guide.v2fly.org/advanced/wss_and_web.html\n\n{% note default %}\n#### Note:另一种伪装的方式\n ```json\n \"transport\": {\n   \"quicSettings\": {\n     \"security\": \"none\",\n     \"key\": \"\",\n     \"header\": {\n     \"type\": \"wechat-video\"\n   }\n }\n ```\n{% endnote %}","slug":"caddy-ws-v2ray","published":1,"updated":"2022-06-03T16:41:20.466Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn100056z0hgpf498oj","content":"<div class=\"note info no-icon\"><p><a href=\"https://dengxiaolong.com/caddy/zh/\">Caddy</a>：一个方便配置的 web server</p>\n</div>\n\n<p>本质上要做的事情是让caddy做反向代理服务器转发v2ray流量，caddy的好处是自己申请证书实现https，这样伪装成的tls流量更不容易被发现</p>\n<span id=\"more\"></span>\n\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><h2 id=\"Get-caddy\"><a href=\"#Get-caddy\" class=\"headerlink\" title=\"Get caddy\"></a>Get caddy</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl https://getcaddy.com | bash -s personal</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-v2ray\"><a href=\"#Get-v2ray\" class=\"headerlink\" title=\"Get v2ray\"></a>Get v2ray</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"注册caddy服务\"><a href=\"#注册caddy服务\" class=\"headerlink\" title=\"注册caddy服务\"></a>注册caddy服务</h2><p>让caddy拥有非root用户打开端口的权限</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">setcap</span> <span class=\"string\">&#x27;cap_net_bind_service=+ep&#x27;</span> /usr/local/bin/caddy</span><br></pre></td></tr></table></figure>\n\n<p>如果出现<code>setcap: command not found</code>那就安装一下<code>libcap2-bin</code>：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install libcap2-bin</span><br></pre></td></tr></table></figure>\n\n<p>创建用户和所需目录并且只赋予必要的权限</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo groupadd -g 33 www-data</span><br><span class=\"line\">sudo useradd \\</span><br><span class=\"line\">  -g www-data --no-user-group \\</span><br><span class=\"line\">  --home-dir /var/www --no-create-home \\</span><br><span class=\"line\">  --shell /usr/sbin/nologin \\</span><br><span class=\"line\">  --system --uid 33 www-data</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/ssl/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> -R root:www-data /etc/ssl/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 0770 /etc/ssl/caddy</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">touch</span> /var/log/caddy.log</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:www-data /var/log/caddy.log</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 0770 /var/log/caddy.log</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> -R root:root /etc/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">touch</span> /etc/caddy/Caddyfile</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:root /etc/caddy/Caddyfile</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 644 /etc/caddy/Caddyfile</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /var/www</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> www-data:www-data /var/www</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 555 /var/www</span><br></pre></td></tr></table></figure>\n\n<p>上面创建了三个目录，<code>/etc/caddy/Caddyfile</code> 是 Caddy 的配置文件，<code>/etc/ssl/caddy</code> 存放证书，<code>/var/www</code> 是默认的网站目录。</p>\n<p>把官方提供的脚本 <a href=\"https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/caddy.service\">caddy.service</a>下载到 <code>/etc/systemd/system/</code> 并重新加载 <code>systemd daemon</code>，让配置生效。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://raw.githubusercontent.com/caddyserver/caddy/master/dist/init/linux-systemd/caddy.service</span><br><span class=\"line\">sudo <span class=\"built_in\">cp</span> caddy.service /etc/systemd/system/</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:root /etc/systemd/system/caddy.service</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 644 /etc/systemd/system/caddy.service</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl start caddy.service</span><br></pre></td></tr></table></figure>\n\n<p>让 Caddy 开机自启。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> caddy.service</span><br></pre></td></tr></table></figure>\n\n<p>至此，Caddy 已经成功注册服务，并能够开机自启了。</p>\n<h2 id=\"配置Caddyfile\"><a href=\"#配置Caddyfile\" class=\"headerlink\" title=\"配置Caddyfile\"></a>配置Caddyfile</h2><p>修改<code>/etc/caddy/Caddyfile</code>文件内容如下，用来配置反向代理，<code>mydomain.me</code>替换为你的域名：<br>（点右上链接后可以编辑配置文件后再复制）</p>\n<figure class=\"highlight plaintext\"><figcaption><span>/etc/caddy/Caddyfile</span><a href=\"https://paste.to/en/clone/5de34d1fbce5a\">Caddyfile</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mydomain.me</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  root /var/www/mydomain.me</span><br><span class=\"line\">  tls 你的邮箱</span><br><span class=\"line\">  log /var/log/caddy.log</span><br><span class=\"line\">  proxy /ray localhost:10000 &#123;</span><br><span class=\"line\">    websocket</span><br><span class=\"line\">    header_upstream -Origin</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>重启caddy服务器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart caddy</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置v2ray-conf\"><a href=\"#配置v2ray-conf\" class=\"headerlink\" title=\"配置v2ray conf\"></a>配置v2ray conf</h2><p>修改<code>/etc/v2ray/config.json</code>文件内容：</p>\n<figure class=\"highlight json\"><figcaption><span>/etc/v2ray/config.json</span><a href=\"https://paste.to/en/clone/5de35ac9c897b\">config.json</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;inbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">10000</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;listen&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;127.0.0.1&quot;</span><span class=\"punctuation\">,</span><span class=\"comment\">//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vmess&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;clients&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alterId&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">64</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;streamSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;network&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ws&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;wsSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/ray&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;outbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;freedom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"完事\"><a href=\"#完事\" class=\"headerlink\" title=\"完事\"></a>完事</h1><h2 id=\"客户端配置\"><a href=\"#客户端配置\" class=\"headerlink\" title=\"客户端配置\"></a>客户端配置</h2><figure class=\"highlight json\"><figcaption><span>/etc/v2ray/config.json</span><a href=\"https://paste.to/en/clone/5de35b2f78656\">config.json</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;inbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1080</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;listen&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;127.0.0.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;socks&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;sniffing&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;enabled&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;destOverride&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;http&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;tls&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;auth&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;noauth&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;udp&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">false</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;outbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vmess&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;vnext&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;address&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mydomain.me&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">443</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;users&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;alterId&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">64</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;streamSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;network&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ws&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;security&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tls&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;wsSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/ray&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>参考：<br> <a href=\"https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd\">https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd</a><br> <a href=\"https://guide.v2fly.org/advanced/wss_and_web.html\">https://guide.v2fly.org/advanced/wss_and_web.html</a></p>\n</blockquote>\n<div class=\"note default\"><h4 id=\"Note-另一种伪装的方式\"><a href=\"#Note-另一种伪装的方式\" class=\"headerlink\" title=\"Note:另一种伪装的方式\"></a>Note:另一种伪装的方式</h4> <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;transport&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;quicSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;security&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;key&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;header&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;wechat-video&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure></div>","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<div class=\"note info no-icon\"><p><a href=\"https://dengxiaolong.com/caddy/zh/\">Caddy</a>：一个方便配置的 web server</p>\n</div>\n\n<p>本质上要做的事情是让caddy做反向代理服务器转发v2ray流量，caddy的好处是自己申请证书实现https，这样伪装成的tls流量更不容易被发现</p>","more":"<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><h2 id=\"Get-caddy\"><a href=\"#Get-caddy\" class=\"headerlink\" title=\"Get caddy\"></a>Get caddy</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl https://getcaddy.com | bash -s personal</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Get-v2ray\"><a href=\"#Get-v2ray\" class=\"headerlink\" title=\"Get v2ray\"></a>Get v2ray</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"注册caddy服务\"><a href=\"#注册caddy服务\" class=\"headerlink\" title=\"注册caddy服务\"></a>注册caddy服务</h2><p>让caddy拥有非root用户打开端口的权限</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">setcap</span> <span class=\"string\">&#x27;cap_net_bind_service=+ep&#x27;</span> /usr/local/bin/caddy</span><br></pre></td></tr></table></figure>\n\n<p>如果出现<code>setcap: command not found</code>那就安装一下<code>libcap2-bin</code>：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install libcap2-bin</span><br></pre></td></tr></table></figure>\n\n<p>创建用户和所需目录并且只赋予必要的权限</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo groupadd -g 33 www-data</span><br><span class=\"line\">sudo useradd \\</span><br><span class=\"line\">  -g www-data --no-user-group \\</span><br><span class=\"line\">  --home-dir /var/www --no-create-home \\</span><br><span class=\"line\">  --shell /usr/sbin/nologin \\</span><br><span class=\"line\">  --system --uid 33 www-data</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/ssl/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> -R root:www-data /etc/ssl/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 0770 /etc/ssl/caddy</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">touch</span> /var/log/caddy.log</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:www-data /var/log/caddy.log</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 0770 /var/log/caddy.log</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /etc/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> -R root:root /etc/caddy</span><br><span class=\"line\">sudo <span class=\"built_in\">touch</span> /etc/caddy/Caddyfile</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:root /etc/caddy/Caddyfile</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 644 /etc/caddy/Caddyfile</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">mkdir</span> /var/www</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> www-data:www-data /var/www</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 555 /var/www</span><br></pre></td></tr></table></figure>\n\n<p>上面创建了三个目录，<code>/etc/caddy/Caddyfile</code> 是 Caddy 的配置文件，<code>/etc/ssl/caddy</code> 存放证书，<code>/var/www</code> 是默认的网站目录。</p>\n<p>把官方提供的脚本 <a href=\"https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/caddy.service\">caddy.service</a>下载到 <code>/etc/systemd/system/</code> 并重新加载 <code>systemd daemon</code>，让配置生效。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://raw.githubusercontent.com/caddyserver/caddy/master/dist/init/linux-systemd/caddy.service</span><br><span class=\"line\">sudo <span class=\"built_in\">cp</span> caddy.service /etc/systemd/system/</span><br><span class=\"line\">sudo <span class=\"built_in\">chown</span> root:root /etc/systemd/system/caddy.service</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> 644 /etc/systemd/system/caddy.service</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl start caddy.service</span><br></pre></td></tr></table></figure>\n\n<p>让 Caddy 开机自启。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> caddy.service</span><br></pre></td></tr></table></figure>\n\n<p>至此，Caddy 已经成功注册服务，并能够开机自启了。</p>\n<h2 id=\"配置Caddyfile\"><a href=\"#配置Caddyfile\" class=\"headerlink\" title=\"配置Caddyfile\"></a>配置Caddyfile</h2><p>修改<code>/etc/caddy/Caddyfile</code>文件内容如下，用来配置反向代理，<code>mydomain.me</code>替换为你的域名：<br>（点右上链接后可以编辑配置文件后再复制）</p>\n<figure class=\"highlight plaintext\"><figcaption><span>/etc/caddy/Caddyfile</span><a href=\"https://paste.to/en/clone/5de34d1fbce5a\">Caddyfile</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mydomain.me</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  root /var/www/mydomain.me</span><br><span class=\"line\">  tls 你的邮箱</span><br><span class=\"line\">  log /var/log/caddy.log</span><br><span class=\"line\">  proxy /ray localhost:10000 &#123;</span><br><span class=\"line\">    websocket</span><br><span class=\"line\">    header_upstream -Origin</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>重启caddy服务器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart caddy</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置v2ray-conf\"><a href=\"#配置v2ray-conf\" class=\"headerlink\" title=\"配置v2ray conf\"></a>配置v2ray conf</h2><p>修改<code>/etc/v2ray/config.json</code>文件内容：</p>\n<figure class=\"highlight json\"><figcaption><span>/etc/v2ray/config.json</span><a href=\"https://paste.to/en/clone/5de35ac9c897b\">config.json</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;inbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">10000</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;listen&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;127.0.0.1&quot;</span><span class=\"punctuation\">,</span><span class=\"comment\">//只监听 127.0.0.1，避免除本机外的机器探测到开放了 10000 端口</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vmess&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;clients&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alterId&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">64</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;streamSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;network&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ws&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;wsSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/ray&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;outbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;freedom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"完事\"><a href=\"#完事\" class=\"headerlink\" title=\"完事\"></a>完事</h1><h2 id=\"客户端配置\"><a href=\"#客户端配置\" class=\"headerlink\" title=\"客户端配置\"></a>客户端配置</h2><figure class=\"highlight json\"><figcaption><span>/etc/v2ray/config.json</span><a href=\"https://paste.to/en/clone/5de35b2f78656\">config.json</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;inbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1080</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;listen&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;127.0.0.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;socks&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;sniffing&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;enabled&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;destOverride&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;http&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;tls&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;auth&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;noauth&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;udp&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">false</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;outbounds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;protocol&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vmess&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;settings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;vnext&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;address&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mydomain.me&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">443</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;users&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;alterId&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">64</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;streamSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;network&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ws&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;security&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;tls&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;wsSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/ray&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>参考：<br> <a href=\"https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd\">https://github.com/caddyserver/caddy/tree/master/dist/init/linux-systemd</a><br> <a href=\"https://guide.v2fly.org/advanced/wss_and_web.html\">https://guide.v2fly.org/advanced/wss_and_web.html</a></p>\n</blockquote>\n<div class=\"note default\"><h4 id=\"Note-另一种伪装的方式\"><a href=\"#Note-另一种伪装的方式\" class=\"headerlink\" title=\"Note:另一种伪装的方式\"></a>Note:另一种伪装的方式</h4> <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;transport&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;quicSettings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;security&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;key&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;header&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;wechat-video&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure></div>"},{"title":"Minecraft海外服务器加速后续：用frp更高效地转发流量（也适用于其他游戏的加速）","date":"2018-11-30T07:51:42.000Z","_content":">前情提要：之前用Nginx反向代理的功能来加速Minecraft，真的是太不稳定！了！\n经常出现玩着玩着掉线了，去看Minecraft服务器没有任何毛病，看用来加速的阿里云服务器，也没有任何异常，但是直连Minecraft服务器是可以的，所以问题绝壁出在加速服务器上\n重启Nginx，连不上，重启服务器，还是连不上，最后过了几分钟，自己连上了。很任性有没有，如此的情况出了几次实在是忍受不了了，于是在想别的办法，想到一个叫frp的软件，之前用过来做内网穿透，同样也是转发流量的道理嘛，就两边装了试试发现，是真的好用啊，甚至感觉延迟更低了，也没有掉线过\n\n安装过程来介绍一下\n<!---more--->\n其实也没什么新的东西，就是分别在服务器和加速服务器安装frp，然后配置运行就可以了\n\n# 在Minecraft服务器上安装和配置frp客户端(frpc)\n\n- 下载并解压frp\n  \n    可以去[release页面](\nhttps://github.com/fatedier/frp/releases/latest)找到最新版的下载链接然后替换下面的链接\n\n    ```bash\n    cd ~\n    wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz\n    tar -xvf frp.tar.gz\n    ```\n- 到frp目录下,复制文件到系统里（以管理员身份运行）\n    ```bash\n    cd frp\n    cp frpc /usr/local/bin/frpc\n    mkdir /etc/frp\n    cp frpc.ini /etc/frp/frpc.ini\n    ```\n- 编写frpc的配置文件：`frpc.ini`\n    ```bash\n    nano /etc/frp/frpc.ini\n    # 内容如下\n    [common]\n    server_addr = 加速服务器的IP或域名\n    server_port = 7000\n    login_fail_exit\t= false  #0.11新功能：登录远程服务器失败不退出，30s自动重试\n    #protocol = kcp\n\n    [mc]\n    type = tcp\n    local_ip = 127.0.0.1\n    local_port = 25565\n    remote_port = 25565\n\n    [mc-udp]\n    type = udp\n    local_ip = 127.0.0.1\n    local_port = 25565\n    remote_port = 25565\n    ```\n    我也不知道开启udp的必要性，但是经过实测只开tcp并登陆不进游戏\n\n- 编写 frp service 文件，把frpc加入系统服务，这样方便管理\n    ```bash\n    nano /usr/lib/systemd/system/frpc.service\n    # 内容如下\n    [Unit]\n    Description=frpc\n    After=network.target\n\n    [Service]\n    TimeoutStartSec=30\n    ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini\n    ExecStop=/bin/kill $MAINPID\n\n    [Install]\n    WantedBy=multi-user.target\n    ```\n- 设置文件权限，启动 frp 并设置开机启动\n    ```bash\n    chmod 754 /usr/lib/systemd/system/frpc.service\n    systemctl enable frpc\n    ```\n\n    好了frp客户端的操作先到这里，等下装好frp服务端并运行后再<a id=\"back\" />回来这里，开启客户端：\n    ```bash\n    systemctl start frpc\n    systemctl status frpc\n    ```\n\n# 在加速服务器上安装frp服务端\n\n- 还是一样，先下载frp，再解压\n    ```bash\n    cd ~\n    wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz\n    tar -xvf frp.tar.gz\n    ```\n- 到frp目录下,复制文件到系统里（这次是frps了）\n    ```bash\n    cd frp\n    cp frps /usr/local/bin/frps\n    mkdir /etc/frp\n    cp frps.ini /etc/frp/frps.ini\n    ```\n- 编写frps的配置文件：`frps.ini`\n    ```bash\n    nano /etc/frp/frps.ini\n    # 内容如下\n    [common]\n    bind_port = 7000\n    ```\n    就是这么简单，记得去防火墙允许7000端口\n- 加入系统服务\n    ```bash\n    nano /usr/lib/systemd/system/frps.service\n    # 内容如下\n    [Unit]\n    Description=frps\n    After=network.target\n\n    [Service]\n    TimeoutStartSec=30\n    ExecStart=/usr/local/bin/frps -c /etc/frp/frps.ini\n    ExecStop=/bin/kill $MAINPID\n\n    [Install]\n    WantedBy=multi-user.target\n    ```\n    保存退出，设置权限，开机启动\n    ```bash\n    chmod 754 /usr/lib/systemd/system/frps.service\n    systemctl enable frps\n    systemctl start frps\n    systemctl status frps\n    ```\n    现在可以[回去](#back)启动客户端了\n<br />\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成了~最后一句话是显示服务运行状态的,当里面显示绿色的`active`就表示程序正常运行了\n客户端那边也是，如果出问题了显示红色的`dead`，那么认真看看系统日志,是不是配置文件不对什么的，然后再`systemctl restart frpc`(s),看`status`，多错几次还是就OK了。\n\n如果你照着我的教程做了，在任何一步出了问题都欢迎在评论里告诉我，看到了一定回复。\n>ftp项目地址：https://github.com/fatedier/frp\n它能做的不止转发端口流量这么简单，如果你愿意，看看它的中文文档，会有很多收获的","source":"_posts/frp-for-mc.md","raw":"---\ntitle: Minecraft海外服务器加速后续：用frp更高效地转发流量（也适用于其他游戏的加速）\ndate: 2018-11-30 15:51:42\ntags: \n    - 云服务\n    - systemctl\n---\n>前情提要：之前用Nginx反向代理的功能来加速Minecraft，真的是太不稳定！了！\n经常出现玩着玩着掉线了，去看Minecraft服务器没有任何毛病，看用来加速的阿里云服务器，也没有任何异常，但是直连Minecraft服务器是可以的，所以问题绝壁出在加速服务器上\n重启Nginx，连不上，重启服务器，还是连不上，最后过了几分钟，自己连上了。很任性有没有，如此的情况出了几次实在是忍受不了了，于是在想别的办法，想到一个叫frp的软件，之前用过来做内网穿透，同样也是转发流量的道理嘛，就两边装了试试发现，是真的好用啊，甚至感觉延迟更低了，也没有掉线过\n\n安装过程来介绍一下\n<!---more--->\n其实也没什么新的东西，就是分别在服务器和加速服务器安装frp，然后配置运行就可以了\n\n# 在Minecraft服务器上安装和配置frp客户端(frpc)\n\n- 下载并解压frp\n  \n    可以去[release页面](\nhttps://github.com/fatedier/frp/releases/latest)找到最新版的下载链接然后替换下面的链接\n\n    ```bash\n    cd ~\n    wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz\n    tar -xvf frp.tar.gz\n    ```\n- 到frp目录下,复制文件到系统里（以管理员身份运行）\n    ```bash\n    cd frp\n    cp frpc /usr/local/bin/frpc\n    mkdir /etc/frp\n    cp frpc.ini /etc/frp/frpc.ini\n    ```\n- 编写frpc的配置文件：`frpc.ini`\n    ```bash\n    nano /etc/frp/frpc.ini\n    # 内容如下\n    [common]\n    server_addr = 加速服务器的IP或域名\n    server_port = 7000\n    login_fail_exit\t= false  #0.11新功能：登录远程服务器失败不退出，30s自动重试\n    #protocol = kcp\n\n    [mc]\n    type = tcp\n    local_ip = 127.0.0.1\n    local_port = 25565\n    remote_port = 25565\n\n    [mc-udp]\n    type = udp\n    local_ip = 127.0.0.1\n    local_port = 25565\n    remote_port = 25565\n    ```\n    我也不知道开启udp的必要性，但是经过实测只开tcp并登陆不进游戏\n\n- 编写 frp service 文件，把frpc加入系统服务，这样方便管理\n    ```bash\n    nano /usr/lib/systemd/system/frpc.service\n    # 内容如下\n    [Unit]\n    Description=frpc\n    After=network.target\n\n    [Service]\n    TimeoutStartSec=30\n    ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini\n    ExecStop=/bin/kill $MAINPID\n\n    [Install]\n    WantedBy=multi-user.target\n    ```\n- 设置文件权限，启动 frp 并设置开机启动\n    ```bash\n    chmod 754 /usr/lib/systemd/system/frpc.service\n    systemctl enable frpc\n    ```\n\n    好了frp客户端的操作先到这里，等下装好frp服务端并运行后再<a id=\"back\" />回来这里，开启客户端：\n    ```bash\n    systemctl start frpc\n    systemctl status frpc\n    ```\n\n# 在加速服务器上安装frp服务端\n\n- 还是一样，先下载frp，再解压\n    ```bash\n    cd ~\n    wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz\n    tar -xvf frp.tar.gz\n    ```\n- 到frp目录下,复制文件到系统里（这次是frps了）\n    ```bash\n    cd frp\n    cp frps /usr/local/bin/frps\n    mkdir /etc/frp\n    cp frps.ini /etc/frp/frps.ini\n    ```\n- 编写frps的配置文件：`frps.ini`\n    ```bash\n    nano /etc/frp/frps.ini\n    # 内容如下\n    [common]\n    bind_port = 7000\n    ```\n    就是这么简单，记得去防火墙允许7000端口\n- 加入系统服务\n    ```bash\n    nano /usr/lib/systemd/system/frps.service\n    # 内容如下\n    [Unit]\n    Description=frps\n    After=network.target\n\n    [Service]\n    TimeoutStartSec=30\n    ExecStart=/usr/local/bin/frps -c /etc/frp/frps.ini\n    ExecStop=/bin/kill $MAINPID\n\n    [Install]\n    WantedBy=multi-user.target\n    ```\n    保存退出，设置权限，开机启动\n    ```bash\n    chmod 754 /usr/lib/systemd/system/frps.service\n    systemctl enable frps\n    systemctl start frps\n    systemctl status frps\n    ```\n    现在可以[回去](#back)启动客户端了\n<br />\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成了~最后一句话是显示服务运行状态的,当里面显示绿色的`active`就表示程序正常运行了\n客户端那边也是，如果出问题了显示红色的`dead`，那么认真看看系统日志,是不是配置文件不对什么的，然后再`systemctl restart frpc`(s),看`status`，多错几次还是就OK了。\n\n如果你照着我的教程做了，在任何一步出了问题都欢迎在评论里告诉我，看到了一定回复。\n>ftp项目地址：https://github.com/fatedier/frp\n它能做的不止转发端口流量这么简单，如果你愿意，看看它的中文文档，会有很多收获的","slug":"frp-for-mc","published":1,"updated":"2022-06-03T16:41:20.466Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn200086z0hglgd83mf","content":"<blockquote>\n<p>前情提要：之前用Nginx反向代理的功能来加速Minecraft，真的是太不稳定！了！<br>经常出现玩着玩着掉线了，去看Minecraft服务器没有任何毛病，看用来加速的阿里云服务器，也没有任何异常，但是直连Minecraft服务器是可以的，所以问题绝壁出在加速服务器上<br>重启Nginx，连不上，重启服务器，还是连不上，最后过了几分钟，自己连上了。很任性有没有，如此的情况出了几次实在是忍受不了了，于是在想别的办法，想到一个叫frp的软件，之前用过来做内网穿透，同样也是转发流量的道理嘛，就两边装了试试发现，是真的好用啊，甚至感觉延迟更低了，也没有掉线过</p>\n</blockquote>\n<p>安装过程来介绍一下</p>\n<!---more--->\n<p>其实也没什么新的东西，就是分别在服务器和加速服务器安装frp，然后配置运行就可以了</p>\n<h1 id=\"在Minecraft服务器上安装和配置frp客户端-frpc\"><a href=\"#在Minecraft服务器上安装和配置frp客户端-frpc\" class=\"headerlink\" title=\"在Minecraft服务器上安装和配置frp客户端(frpc)\"></a>在Minecraft服务器上安装和配置frp客户端(frpc)</h1><ul>\n<li><p>下载并解压frp</p>\n<p>  可以去[release页面](</p>\n</li>\n</ul>\n<p><a href=\"https://github.com/fatedier/frp/releases/latest)%E6%89%BE%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E7%9A%84%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%E7%84%B6%E5%90%8E%E6%9B%BF%E6%8D%A2%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%93%BE%E6%8E%A5\">https://github.com/fatedier/frp/releases/latest)找到最新版的下载链接然后替换下面的链接</a></p>\n<pre><code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz</span><br><span class=\"line\">tar -xvf frp.tar.gz</span><br></pre></td></tr></table></figure>\n</code></pre>\n<ul>\n<li><p>到frp目录下,复制文件到系统里（以管理员身份运行）</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frpc /usr/local/bin/frpc</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /etc/frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frpc.ini /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure></li>\n<li><p>编写frpc的配置文件：<code>frpc.ini</code></p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/frp/frpc.ini</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = 加速服务器的IP或域名</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">login_fail_exit\t= <span class=\"literal\">false</span>  <span class=\"comment\">#0.11新功能：登录远程服务器失败不退出，30s自动重试</span></span><br><span class=\"line\"><span class=\"comment\">#protocol = kcp</span></span><br><span class=\"line\"></span><br><span class=\"line\">[mc]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = tcp</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">local_port = 25565</span><br><span class=\"line\">remote_port = 25565</span><br><span class=\"line\"></span><br><span class=\"line\">[mc-udp]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = udp</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">local_port = 25565</span><br><span class=\"line\">remote_port = 25565</span><br></pre></td></tr></table></figure>\n<p>  我也不知道开启udp的必要性，但是经过实测只开tcp并登陆不进游戏</p>\n</li>\n<li><p>编写 frp service 文件，把frpc加入系统服务，这样方便管理</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /usr/lib/systemd/system/frpc.service</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frpc</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini</span><br><span class=\"line\">ExecStop=/bin/kill <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></li>\n<li><p>设置文件权限，启动 frp 并设置开机启动</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 754 /usr/lib/systemd/system/frpc.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frpc</span><br></pre></td></tr></table></figure>\n\n<p>  好了frp客户端的操作先到这里，等下装好frp服务端并运行后再<a id=\"back\" />回来这里，开启客户端：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start frpc</span><br><span class=\"line\">systemctl status frpc</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"在加速服务器上安装frp服务端\"><a href=\"#在加速服务器上安装frp服务端\" class=\"headerlink\" title=\"在加速服务器上安装frp服务端\"></a>在加速服务器上安装frp服务端</h1><ul>\n<li>还是一样，先下载frp，再解压  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz</span><br><span class=\"line\">tar -xvf frp.tar.gz</span><br></pre></td></tr></table></figure></li>\n<li>到frp目录下,复制文件到系统里（这次是frps了）  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frps /usr/local/bin/frps</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /etc/frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frps.ini /etc/frp/frps.ini</span><br></pre></td></tr></table></figure></li>\n<li>编写frps的配置文件：<code>frps.ini</code>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/frp/frps.ini</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">bind_port = 7000</span><br></pre></td></tr></table></figure>\n  就是这么简单，记得去防火墙允许7000端口</li>\n<li>加入系统服务  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /usr/lib/systemd/system/frps.service</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frps</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frps -c /etc/frp/frps.ini</span><br><span class=\"line\">ExecStop=/bin/kill <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n  保存退出，设置权限，开机启动  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 754 /usr/lib/systemd/system/frps.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frps</span><br><span class=\"line\">systemctl start frps</span><br><span class=\"line\">systemctl status frps</span><br></pre></td></tr></table></figure>\n  现在可以<a href=\"#back\">回去</a>启动客户端了<br /></li>\n</ul>\n<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;完成了~最后一句话是显示服务运行状态的,当里面显示绿色的<code>active</code>就表示程序正常运行了<br>客户端那边也是，如果出问题了显示红色的<code>dead</code>，那么认真看看系统日志,是不是配置文件不对什么的，然后再<code>systemctl restart frpc</code>(s),看<code>status</code>，多错几次还是就OK了。</p>\n<p>如果你照着我的教程做了，在任何一步出了问题都欢迎在评论里告诉我，看到了一定回复。</p>\n<blockquote>\n<p>ftp项目地址：<a href=\"https://github.com/fatedier/frp\">https://github.com/fatedier/frp</a><br>它能做的不止转发端口流量这么简单，如果你愿意，看看它的中文文档，会有很多收获的</p>\n</blockquote>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"<blockquote>\n<p>前情提要：之前用Nginx反向代理的功能来加速Minecraft，真的是太不稳定！了！<br>经常出现玩着玩着掉线了，去看Minecraft服务器没有任何毛病，看用来加速的阿里云服务器，也没有任何异常，但是直连Minecraft服务器是可以的，所以问题绝壁出在加速服务器上<br>重启Nginx，连不上，重启服务器，还是连不上，最后过了几分钟，自己连上了。很任性有没有，如此的情况出了几次实在是忍受不了了，于是在想别的办法，想到一个叫frp的软件，之前用过来做内网穿透，同样也是转发流量的道理嘛，就两边装了试试发现，是真的好用啊，甚至感觉延迟更低了，也没有掉线过</p>\n</blockquote>\n<p>安装过程来介绍一下</p>\n<!---more--->\n<p>其实也没什么新的东西，就是分别在服务器和加速服务器安装frp，然后配置运行就可以了</p>\n<h1 id=\"在Minecraft服务器上安装和配置frp客户端-frpc\"><a href=\"#在Minecraft服务器上安装和配置frp客户端-frpc\" class=\"headerlink\" title=\"在Minecraft服务器上安装和配置frp客户端(frpc)\"></a>在Minecraft服务器上安装和配置frp客户端(frpc)</h1><ul>\n<li><p>下载并解压frp</p>\n<p>  可以去[release页面](</p>\n</li>\n</ul>\n<p><a href=\"https://github.com/fatedier/frp/releases/latest)%E6%89%BE%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E7%9A%84%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%E7%84%B6%E5%90%8E%E6%9B%BF%E6%8D%A2%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%93%BE%E6%8E%A5\">https://github.com/fatedier/frp/releases/latest)找到最新版的下载链接然后替换下面的链接</a></p>\n<pre><code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz</span><br><span class=\"line\">tar -xvf frp.tar.gz</span><br></pre></td></tr></table></figure>\n</code></pre>\n<ul>\n<li><p>到frp目录下,复制文件到系统里（以管理员身份运行）</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frpc /usr/local/bin/frpc</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /etc/frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frpc.ini /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure></li>\n<li><p>编写frpc的配置文件：<code>frpc.ini</code></p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/frp/frpc.ini</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = 加速服务器的IP或域名</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">login_fail_exit\t= <span class=\"literal\">false</span>  <span class=\"comment\">#0.11新功能：登录远程服务器失败不退出，30s自动重试</span></span><br><span class=\"line\"><span class=\"comment\">#protocol = kcp</span></span><br><span class=\"line\"></span><br><span class=\"line\">[mc]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = tcp</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">local_port = 25565</span><br><span class=\"line\">remote_port = 25565</span><br><span class=\"line\"></span><br><span class=\"line\">[mc-udp]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = udp</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">local_port = 25565</span><br><span class=\"line\">remote_port = 25565</span><br></pre></td></tr></table></figure>\n<p>  我也不知道开启udp的必要性，但是经过实测只开tcp并登陆不进游戏</p>\n</li>\n<li><p>编写 frp service 文件，把frpc加入系统服务，这样方便管理</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /usr/lib/systemd/system/frpc.service</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frpc</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini</span><br><span class=\"line\">ExecStop=/bin/kill <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></li>\n<li><p>设置文件权限，启动 frp 并设置开机启动</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 754 /usr/lib/systemd/system/frpc.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frpc</span><br></pre></td></tr></table></figure>\n\n<p>  好了frp客户端的操作先到这里，等下装好frp服务端并运行后再<a id=\"back\" />回来这里，开启客户端：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start frpc</span><br><span class=\"line\">systemctl status frpc</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"在加速服务器上安装frp服务端\"><a href=\"#在加速服务器上安装frp服务端\" class=\"headerlink\" title=\"在加速服务器上安装frp服务端\"></a>在加速服务器上安装frp服务端</h1><ul>\n<li>还是一样，先下载frp，再解压  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz -O frp.tar.gz</span><br><span class=\"line\">tar -xvf frp.tar.gz</span><br></pre></td></tr></table></figure></li>\n<li>到frp目录下,复制文件到系统里（这次是frps了）  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frps /usr/local/bin/frps</span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /etc/frp</span><br><span class=\"line\"><span class=\"built_in\">cp</span> frps.ini /etc/frp/frps.ini</span><br></pre></td></tr></table></figure></li>\n<li>编写frps的配置文件：<code>frps.ini</code>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/frp/frps.ini</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">bind_port = 7000</span><br></pre></td></tr></table></figure>\n  就是这么简单，记得去防火墙允许7000端口</li>\n<li>加入系统服务  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /usr/lib/systemd/system/frps.service</span><br><span class=\"line\"><span class=\"comment\"># 内容如下</span></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=frps</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">TimeoutStartSec=30</span><br><span class=\"line\">ExecStart=/usr/local/bin/frps -c /etc/frp/frps.ini</span><br><span class=\"line\">ExecStop=/bin/kill <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n  保存退出，设置权限，开机启动  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 754 /usr/lib/systemd/system/frps.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frps</span><br><span class=\"line\">systemctl start frps</span><br><span class=\"line\">systemctl status frps</span><br></pre></td></tr></table></figure>\n  现在可以<a href=\"#back\">回去</a>启动客户端了<br /></li>\n</ul>\n<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;完成了~最后一句话是显示服务运行状态的,当里面显示绿色的<code>active</code>就表示程序正常运行了<br>客户端那边也是，如果出问题了显示红色的<code>dead</code>，那么认真看看系统日志,是不是配置文件不对什么的，然后再<code>systemctl restart frpc</code>(s),看<code>status</code>，多错几次还是就OK了。</p>\n<p>如果你照着我的教程做了，在任何一步出了问题都欢迎在评论里告诉我，看到了一定回复。</p>\n<blockquote>\n<p>ftp项目地址：<a href=\"https://github.com/fatedier/frp\">https://github.com/fatedier/frp</a><br>它能做的不止转发端口流量这么简单，如果你愿意，看看它的中文文档，会有很多收获的</p>\n</blockquote>\n"},{"title":"MacOS Mojave Hackintosh for Lenovo Yoga710 [clover]","date":"2019-03-02T13:09:51.000Z","_content":"I've been attempt making my laptop work with mojave for like one month, and bought a DW1820 wireless card to fix network problem.  Also there was a lot of problem like brightness, bluetooth, app store, etc. It's all work now.\n<!--more-->\n\nThe most tricky part is to drive DW1820(What? I bought it for hackintosh!), I do found kext driver for my card from RehabMan, but seems not work at all. Every time I boot up I see this\n\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/hackintosh-of-yoga710/error1.jpg)\n\nMaybe something wrong with Bluetooth since it's connected via inner USB. But I fixed it by just delete `BrcmPatchRAM2.kext` and `BrcmFirmwareData.kext`, and add the address of bluetooth's USB port to `FakePCIID.kext`, it workd fine then. no  need of other kext driver.\n\n#### Here's my hardware:\n{% note info %}\n**Processor**: Intel Core i5-7200U\n**Graphics**: Intel HD Graphics 620, NVDIA Geforce 940MX\n**Memory**: 4096 MB, 2133 MHz, DDR4, 1/1 slots occupied, Single-Channel\n**Display**: 14 inch 16:9, 1920 x 1080 pixel 157 PPI, Multitouch\n**Mainboard**: Intel Kaby Lake-U Premium PCH\n{% endnote %}\n\n{% note success %}\n#### What works well:\n- Graphics, Brightness(and save brightness)\n- Keyboard & Trackpad\n- Audio\n- Battery\n- Airprot\n- Bluetooth\n- HDMI output with audio\n- Headphone jack include microphone\n{% endnote %}\n\n{% note danger %}\n#### What is not working:\n- NVDIA Geforce 940MX\n- Touch screen\n- Sleep function(just about work, it wake immediately after sleep)\n- SD card reader\n{% endnote %}\n\n{% note default %}\n#### Something you need attention:\nbrightness can be adjust at setting, you can add a key map yourself.\nYou can enable HIDPI :[one-key-hidpi](https://github.com/xzhih/one-key-hidpi)\n{% endnote %}\n\nI'm just put the clover file of myself here, hope there's help for you. As for installing detals, it's alot outside.\n\nDownload link: [clover file of yoga 710](CLOVER.zip)\n","source":"_posts/hackintosh-of-yoga710.md","raw":"---\ntitle: MacOS Mojave Hackintosh for Lenovo Yoga710 [clover]\ndate: 2019-03-02 21:09:51\ntags: note\n---\nI've been attempt making my laptop work with mojave for like one month, and bought a DW1820 wireless card to fix network problem.  Also there was a lot of problem like brightness, bluetooth, app store, etc. It's all work now.\n<!--more-->\n\nThe most tricky part is to drive DW1820(What? I bought it for hackintosh!), I do found kext driver for my card from RehabMan, but seems not work at all. Every time I boot up I see this\n\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/hackintosh-of-yoga710/error1.jpg)\n\nMaybe something wrong with Bluetooth since it's connected via inner USB. But I fixed it by just delete `BrcmPatchRAM2.kext` and `BrcmFirmwareData.kext`, and add the address of bluetooth's USB port to `FakePCIID.kext`, it workd fine then. no  need of other kext driver.\n\n#### Here's my hardware:\n{% note info %}\n**Processor**: Intel Core i5-7200U\n**Graphics**: Intel HD Graphics 620, NVDIA Geforce 940MX\n**Memory**: 4096 MB, 2133 MHz, DDR4, 1/1 slots occupied, Single-Channel\n**Display**: 14 inch 16:9, 1920 x 1080 pixel 157 PPI, Multitouch\n**Mainboard**: Intel Kaby Lake-U Premium PCH\n{% endnote %}\n\n{% note success %}\n#### What works well:\n- Graphics, Brightness(and save brightness)\n- Keyboard & Trackpad\n- Audio\n- Battery\n- Airprot\n- Bluetooth\n- HDMI output with audio\n- Headphone jack include microphone\n{% endnote %}\n\n{% note danger %}\n#### What is not working:\n- NVDIA Geforce 940MX\n- Touch screen\n- Sleep function(just about work, it wake immediately after sleep)\n- SD card reader\n{% endnote %}\n\n{% note default %}\n#### Something you need attention:\nbrightness can be adjust at setting, you can add a key map yourself.\nYou can enable HIDPI :[one-key-hidpi](https://github.com/xzhih/one-key-hidpi)\n{% endnote %}\n\nI'm just put the clover file of myself here, hope there's help for you. As for installing detals, it's alot outside.\n\nDownload link: [clover file of yoga 710](CLOVER.zip)\n","slug":"hackintosh-of-yoga710","published":1,"updated":"2022-06-03T16:41:20.467Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn200096z0hd6iz47cy","content":"<p>I’ve been attempt making my laptop work with mojave for like one month, and bought a DW1820 wireless card to fix network problem.  Also there was a lot of problem like brightness, bluetooth, app store, etc. It’s all work now.</p>\n<span id=\"more\"></span>\n\n<p>The most tricky part is to drive DW1820(What? I bought it for hackintosh!), I do found kext driver for my card from RehabMan, but seems not work at all. Every time I boot up I see this</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/hackintosh-of-yoga710/error1.jpg\"></p>\n<p>Maybe something wrong with Bluetooth since it’s connected via inner USB. But I fixed it by just delete <code>BrcmPatchRAM2.kext</code> and <code>BrcmFirmwareData.kext</code>, and add the address of bluetooth’s USB port to <code>FakePCIID.kext</code>, it workd fine then. no  need of other kext driver.</p>\n<h4 id=\"Here’s-my-hardware\"><a href=\"#Here’s-my-hardware\" class=\"headerlink\" title=\"Here’s my hardware:\"></a>Here’s my hardware:</h4><div class=\"note info\"><p><strong>Processor</strong>: Intel Core i5-7200U<br><strong>Graphics</strong>: Intel HD Graphics 620, NVDIA Geforce 940MX<br><strong>Memory</strong>: 4096 MB, 2133 MHz, DDR4, 1&#x2F;1 slots occupied, Single-Channel<br><strong>Display</strong>: 14 inch 16:9, 1920 x 1080 pixel 157 PPI, Multitouch<br><strong>Mainboard</strong>: Intel Kaby Lake-U Premium PCH</p>\n</div>\n\n<div class=\"note success\"><h4 id=\"What-works-well\"><a href=\"#What-works-well\" class=\"headerlink\" title=\"What works well:\"></a>What works well:</h4><ul>\n<li>Graphics, Brightness(and save brightness)</li>\n<li>Keyboard &amp; Trackpad</li>\n<li>Audio</li>\n<li>Battery</li>\n<li>Airprot</li>\n<li>Bluetooth</li>\n<li>HDMI output with audio</li>\n<li>Headphone jack include microphone</li>\n</ul>\n</div>\n\n<div class=\"note danger\"><h4 id=\"What-is-not-working\"><a href=\"#What-is-not-working\" class=\"headerlink\" title=\"What is not working:\"></a>What is not working:</h4><ul>\n<li>NVDIA Geforce 940MX</li>\n<li>Touch screen</li>\n<li>Sleep function(just about work, it wake immediately after sleep)</li>\n<li>SD card reader</li>\n</ul>\n</div>\n\n<div class=\"note default\"><h4 id=\"Something-you-need-attention\"><a href=\"#Something-you-need-attention\" class=\"headerlink\" title=\"Something you need attention:\"></a>Something you need attention:</h4><p>brightness can be adjust at setting, you can add a key map yourself.<br>You can enable HIDPI :<a href=\"https://github.com/xzhih/one-key-hidpi\">one-key-hidpi</a></p>\n</div>\n\n<p>I’m just put the clover file of myself here, hope there’s help for you. As for installing detals, it’s alot outside.</p>\n<p>Download link: <a href=\"CLOVER.zip\">clover file of yoga 710</a></p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>I’ve been attempt making my laptop work with mojave for like one month, and bought a DW1820 wireless card to fix network problem.  Also there was a lot of problem like brightness, bluetooth, app store, etc. It’s all work now.</p>","more":"<p>The most tricky part is to drive DW1820(What? I bought it for hackintosh!), I do found kext driver for my card from RehabMan, but seems not work at all. Every time I boot up I see this</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/hackintosh-of-yoga710/error1.jpg\"></p>\n<p>Maybe something wrong with Bluetooth since it’s connected via inner USB. But I fixed it by just delete <code>BrcmPatchRAM2.kext</code> and <code>BrcmFirmwareData.kext</code>, and add the address of bluetooth’s USB port to <code>FakePCIID.kext</code>, it workd fine then. no  need of other kext driver.</p>\n<h4 id=\"Here’s-my-hardware\"><a href=\"#Here’s-my-hardware\" class=\"headerlink\" title=\"Here’s my hardware:\"></a>Here’s my hardware:</h4><div class=\"note info\"><p><strong>Processor</strong>: Intel Core i5-7200U<br><strong>Graphics</strong>: Intel HD Graphics 620, NVDIA Geforce 940MX<br><strong>Memory</strong>: 4096 MB, 2133 MHz, DDR4, 1&#x2F;1 slots occupied, Single-Channel<br><strong>Display</strong>: 14 inch 16:9, 1920 x 1080 pixel 157 PPI, Multitouch<br><strong>Mainboard</strong>: Intel Kaby Lake-U Premium PCH</p>\n</div>\n\n<div class=\"note success\"><h4 id=\"What-works-well\"><a href=\"#What-works-well\" class=\"headerlink\" title=\"What works well:\"></a>What works well:</h4><ul>\n<li>Graphics, Brightness(and save brightness)</li>\n<li>Keyboard &amp; Trackpad</li>\n<li>Audio</li>\n<li>Battery</li>\n<li>Airprot</li>\n<li>Bluetooth</li>\n<li>HDMI output with audio</li>\n<li>Headphone jack include microphone</li>\n</ul>\n</div>\n\n<div class=\"note danger\"><h4 id=\"What-is-not-working\"><a href=\"#What-is-not-working\" class=\"headerlink\" title=\"What is not working:\"></a>What is not working:</h4><ul>\n<li>NVDIA Geforce 940MX</li>\n<li>Touch screen</li>\n<li>Sleep function(just about work, it wake immediately after sleep)</li>\n<li>SD card reader</li>\n</ul>\n</div>\n\n<div class=\"note default\"><h4 id=\"Something-you-need-attention\"><a href=\"#Something-you-need-attention\" class=\"headerlink\" title=\"Something you need attention:\"></a>Something you need attention:</h4><p>brightness can be adjust at setting, you can add a key map yourself.<br>You can enable HIDPI :<a href=\"https://github.com/xzhih/one-key-hidpi\">one-key-hidpi</a></p>\n</div>\n\n<p>I’m just put the clover file of myself here, hope there’s help for you. As for installing detals, it’s alot outside.</p>\n<p>Download link: <a href=\"CLOVER.zip\">clover file of yoga 710</a></p>"},{"title":"通过Nginx转发Minecraft服务器流量达到加速的目的(Nginx转发TCP)","date":"2018-10-21T08:25:01.000Z","_content":"阿里云学生机10块一个月挺便宜了，就是内存2G对于一个Minecraft服务器来说有点小\n而我还有个谷歌云服务器在台湾，配置不错内存也够，问题就是网络延迟太大\n把Minecraft服务器运行在那里实际玩下来发现延迟不能忍受\n从我的电脑Ping台湾服务器有250ms，Ping阿里云20ms，阿里云Ping台湾服务器，50ms\n用小学老师教我的加法一算发现，50+20小于250啊\n于是就有了标题这个想法\n<!--more-->\n对于流量转发除了SS和Frp其他我还真不知道（**去看我的[frp教程](/frp-for-mc/)吧，真的，Nginx反向代理太难用了**）\n\n网上查了可以用firewalld做端口转发，我试了把tcp和udp的25565端口都转发到台湾服务器\n没用，可能是原理不对\n\n再一查看到Nginx反向代理可以做这种事情\n大概就是编辑站点配置文件，在server{}里面加上\n\n```nginx\n    listen 25565;\n    location / {\n      # 代理的地址\n      proxy_pass http://35.xx.xx.23:25565;\n    }\n```\n\n我确实这样做了因为前面不加`http://`配置文件不让过，结果一试当然没有用\n\n# 正确的方法在这里\n\n后来找到了Nginx转发tcp的文章，总算是找对方向了\n我的Nginx版本1.14，默认是支持TCP流量转发的，只需要在**Nginx的**配置文件(Nginx.conf)里面加如下面几行就可以：\n\n```nginx\nstream {\n    server {\n        listen 25565;\n        proxy_pass 35.xx.xx.23:25565;\n    }\n}\n```\n\n加在events后面\n\n是的，就是这么简单，这篇文章能教你的已经结束了\n\n而我自己的折腾还在后面，因为我没有把前面listen 25565的站点删掉，没删掉！！\n导致我不管怎么改Nginx的配置都是说连不上\n折腾了一晚上+一小个下午共计两个小时，的人生\n终于在今天也就是写这篇文章前发现了，把那个站点删掉，终于是能连上了\n感动得我\n掀了桌子\n昔日的卡顿\n完全没了影子\n那么以后\n终于能和小伙伴愉快的玩mc了\n开心","source":"_posts/nginx建立TCP代理.md","raw":"---\ntitle: 通过Nginx转发Minecraft服务器流量达到加速的目的(Nginx转发TCP)\ndate: 2018-10-21 16:25:01\ntags: 云服务器\n---\n阿里云学生机10块一个月挺便宜了，就是内存2G对于一个Minecraft服务器来说有点小\n而我还有个谷歌云服务器在台湾，配置不错内存也够，问题就是网络延迟太大\n把Minecraft服务器运行在那里实际玩下来发现延迟不能忍受\n从我的电脑Ping台湾服务器有250ms，Ping阿里云20ms，阿里云Ping台湾服务器，50ms\n用小学老师教我的加法一算发现，50+20小于250啊\n于是就有了标题这个想法\n<!--more-->\n对于流量转发除了SS和Frp其他我还真不知道（**去看我的[frp教程](/frp-for-mc/)吧，真的，Nginx反向代理太难用了**）\n\n网上查了可以用firewalld做端口转发，我试了把tcp和udp的25565端口都转发到台湾服务器\n没用，可能是原理不对\n\n再一查看到Nginx反向代理可以做这种事情\n大概就是编辑站点配置文件，在server{}里面加上\n\n```nginx\n    listen 25565;\n    location / {\n      # 代理的地址\n      proxy_pass http://35.xx.xx.23:25565;\n    }\n```\n\n我确实这样做了因为前面不加`http://`配置文件不让过，结果一试当然没有用\n\n# 正确的方法在这里\n\n后来找到了Nginx转发tcp的文章，总算是找对方向了\n我的Nginx版本1.14，默认是支持TCP流量转发的，只需要在**Nginx的**配置文件(Nginx.conf)里面加如下面几行就可以：\n\n```nginx\nstream {\n    server {\n        listen 25565;\n        proxy_pass 35.xx.xx.23:25565;\n    }\n}\n```\n\n加在events后面\n\n是的，就是这么简单，这篇文章能教你的已经结束了\n\n而我自己的折腾还在后面，因为我没有把前面listen 25565的站点删掉，没删掉！！\n导致我不管怎么改Nginx的配置都是说连不上\n折腾了一晚上+一小个下午共计两个小时，的人生\n终于在今天也就是写这篇文章前发现了，把那个站点删掉，终于是能连上了\n感动得我\n掀了桌子\n昔日的卡顿\n完全没了影子\n那么以后\n终于能和小伙伴愉快的玩mc了\n开心","slug":"nginx建立TCP代理","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn3000a6z0hf2319qne","content":"<p>阿里云学生机10块一个月挺便宜了，就是内存2G对于一个Minecraft服务器来说有点小<br>而我还有个谷歌云服务器在台湾，配置不错内存也够，问题就是网络延迟太大<br>把Minecraft服务器运行在那里实际玩下来发现延迟不能忍受<br>从我的电脑Ping台湾服务器有250ms，Ping阿里云20ms，阿里云Ping台湾服务器，50ms<br>用小学老师教我的加法一算发现，50+20小于250啊<br>于是就有了标题这个想法</p>\n<span id=\"more\"></span>\n<p>对于流量转发除了SS和Frp其他我还真不知道（<strong>去看我的<a href=\"/frp-for-mc/\">frp教程</a>吧，真的，Nginx反向代理太难用了</strong>）</p>\n<p>网上查了可以用firewalld做端口转发，我试了把tcp和udp的25565端口都转发到台湾服务器<br>没用，可能是原理不对</p>\n<p>再一查看到Nginx反向代理可以做这种事情<br>大概就是编辑站点配置文件，在server{}里面加上</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">25565</span>;</span><br><span class=\"line\"><span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">  <span class=\"comment\"># 代理的地址</span></span><br><span class=\"line\">  <span class=\"attribute\">proxy_pass</span> http://35.xx.xx.23:25565;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我确实这样做了因为前面不加<code>http://</code>配置文件不让过，结果一试当然没有用</p>\n<h1 id=\"正确的方法在这里\"><a href=\"#正确的方法在这里\" class=\"headerlink\" title=\"正确的方法在这里\"></a>正确的方法在这里</h1><p>后来找到了Nginx转发tcp的文章，总算是找对方向了<br>我的Nginx版本1.14，默认是支持TCP流量转发的，只需要在<strong>Nginx的</strong>配置文件(Nginx.conf)里面加如下面几行就可以：</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">stream</span> &#123;</span><br><span class=\"line\">    <span class=\"section\">server</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">listen</span> <span class=\"number\">25565</span>;</span><br><span class=\"line\">        <span class=\"attribute\">proxy_pass</span> <span class=\"number\">35</span>.xx.xx.<span class=\"number\">23</span>:<span class=\"number\">25565</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>加在events后面</p>\n<p>是的，就是这么简单，这篇文章能教你的已经结束了</p>\n<p>而我自己的折腾还在后面，因为我没有把前面listen 25565的站点删掉，没删掉！！<br>导致我不管怎么改Nginx的配置都是说连不上<br>折腾了一晚上+一小个下午共计两个小时，的人生<br>终于在今天也就是写这篇文章前发现了，把那个站点删掉，终于是能连上了<br>感动得我<br>掀了桌子<br>昔日的卡顿<br>完全没了影子<br>那么以后<br>终于能和小伙伴愉快的玩mc了<br>开心</p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>阿里云学生机10块一个月挺便宜了，就是内存2G对于一个Minecraft服务器来说有点小<br>而我还有个谷歌云服务器在台湾，配置不错内存也够，问题就是网络延迟太大<br>把Minecraft服务器运行在那里实际玩下来发现延迟不能忍受<br>从我的电脑Ping台湾服务器有250ms，Ping阿里云20ms，阿里云Ping台湾服务器，50ms<br>用小学老师教我的加法一算发现，50+20小于250啊<br>于是就有了标题这个想法</p>","more":"<p>对于流量转发除了SS和Frp其他我还真不知道（<strong>去看我的<a href=\"/frp-for-mc/\">frp教程</a>吧，真的，Nginx反向代理太难用了</strong>）</p>\n<p>网上查了可以用firewalld做端口转发，我试了把tcp和udp的25565端口都转发到台湾服务器<br>没用，可能是原理不对</p>\n<p>再一查看到Nginx反向代理可以做这种事情<br>大概就是编辑站点配置文件，在server{}里面加上</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">25565</span>;</span><br><span class=\"line\"><span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">  <span class=\"comment\"># 代理的地址</span></span><br><span class=\"line\">  <span class=\"attribute\">proxy_pass</span> http://35.xx.xx.23:25565;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我确实这样做了因为前面不加<code>http://</code>配置文件不让过，结果一试当然没有用</p>\n<h1 id=\"正确的方法在这里\"><a href=\"#正确的方法在这里\" class=\"headerlink\" title=\"正确的方法在这里\"></a>正确的方法在这里</h1><p>后来找到了Nginx转发tcp的文章，总算是找对方向了<br>我的Nginx版本1.14，默认是支持TCP流量转发的，只需要在<strong>Nginx的</strong>配置文件(Nginx.conf)里面加如下面几行就可以：</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">stream</span> &#123;</span><br><span class=\"line\">    <span class=\"section\">server</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">listen</span> <span class=\"number\">25565</span>;</span><br><span class=\"line\">        <span class=\"attribute\">proxy_pass</span> <span class=\"number\">35</span>.xx.xx.<span class=\"number\">23</span>:<span class=\"number\">25565</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>加在events后面</p>\n<p>是的，就是这么简单，这篇文章能教你的已经结束了</p>\n<p>而我自己的折腾还在后面，因为我没有把前面listen 25565的站点删掉，没删掉！！<br>导致我不管怎么改Nginx的配置都是说连不上<br>折腾了一晚上+一小个下午共计两个小时，的人生<br>终于在今天也就是写这篇文章前发现了，把那个站点删掉，终于是能连上了<br>感动得我<br>掀了桌子<br>昔日的卡顿<br>完全没了影子<br>那么以后<br>终于能和小伙伴愉快的玩mc了<br>开心</p>"},{"title":"小米6刷入miui欧洲版以及安装小米钱包、应用商店APP,开启全盘加密","date":"2018-12-18T08:03:00.000Z","_content":"{% note info no-icon %}\n[miui.eu](https://xiaomi.eu/community/forums/miui-rom-releases.103/)，一个真正没有广告的系统，比国际版还要纯净\n{% endnote %}\n\n我一开始照着知乎[这个教程](https://www.zhihu.com/question/50231539)刷的，刷了后死活开不了机，也就是卡在了MI界面，后来在miui欧洲论坛找到了[这个](https://xiaomi.eu/community/threads/bootloop-problem-while-flashing-eu-stable.46593/)答案，完全符合我的情况，不能直接从国内版刷成欧洲版，要先刷个国际版，在国际版的基础上才能刷欧洲版。\n\n> miui欧洲版自带人脸解锁，抬起亮屏，还有谷歌的Smart Lock，挺有意思。\n\n<!--more-->\n\n----\n\n> 2020-02-20 更新:\n> \n> 不再跟随官方miui的链接, 因为官方已经不再更新开发板的链接, 找了一个第三方列表: [小米6 MIUI开发版下载索引 (卡刷包)](https://miuiver.com/sagit_developer_recovery/). 现在还是每周自动生成一次, 发布在这里👉[releases 页面](https://github.com/xiaoxx970/mipay-extract/releases), 要注意自从9.8.15后面的版本我都没有自己测试过, 出了问题开机卡米什么的一般清data可以解决.\n\n> 2019-08-18 更新：\n>\n> 现在已经半夜1点，我的小米6正在通过线刷刷国内版miui，起因是这次更新miui9.8.15版本后出了一点问题怎么也开不了机，具体的问题应该就是换行符的问题，我刚通过脚本自动获取链接的方式做到持续集成，可以全自动生成刷机包而不用每次改两个链接以及git commit,tag,push等，现在只要在持续集成那边开个定时，就可以每周自动出炉修复刷机包并且上传到GitHub的release页面，可惜我再也用不到了（大概），还需要的朋友记得在评论区告诉我，我会考虑加上其他机型或者出个持续集成的教程。\n>\n> 链接在这里：https://github.com/xiaoxx970/mipay-extract/releases\n>\n> 现在已经开启了每周更新，不用我动就会保持最新版本的，用着miui欧洲版的同学每次更新前去这个页面下载一下就可以刷机了。 \n\n首先要说的是，要折腾，先备份。\n如果你用了谷歌验证器，可以象我一样换成Authy，通过手机登录，不用担心换手机找不回来\n微信可以通过Windows端备份聊天记录\n相册短信便签什么的就交给小米云，差不多就这些\n\n其次要说的是，等下用到的所有提取出来的刷机包，在每一次更新系统后都会失效，你可以选择再次刷入。\n特别地，关于支付安全，eu固件默认关闭了全盘强制加密（FBE）功能，这跟国内固件不一样，最直接的影响就是进入恢复模式不用解密，数据暴露在捡到你手机的人面前，所以我是选择刷入了开启加密的补丁包，同样的每一次更新系统就必须在更新后重新刷入`force-fbe`包，否则无法开机。\n\n# 请选择你的选择↓\n\n{% tabs fbe %}\n<!-- tab 开启全盘加密 -->\n\n下面从第一步，你还是个国内miui系统开始\n\n# 解锁bootloader\n\n看这里👉 http://www.miui.com/unlock/index.html\n\n# 刷入国际版ROM\n\n{% note info %}\n根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试\n{% endnote%}\n\n欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了\n   - 去下载线刷包：[线刷包地址](http://en.miui.com/download.html)\n   - 手机音量下+电源键开机，进入Fastboot模式\n   - 下载小米的[通用刷机工具](http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip)\n   - 按照教程一步一步往下做\n   - **注意**软件打开右下角不要选`全部删除并lock`，选择`全部删除`就可以了\n   - 线刷具体教程：http://www.miui.com/shuaji-393.html\n\n# 不用开机，继续刷入twrp\n怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。\n如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。\n1. [twrp官方下载](https://twrp.me/Devices/)\n\n    选择你的机型对应下载下来\n\n2. 打开adb终端\n\n    adb终端的位置在`\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android`里面，进入到`Android`文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd/power shell窗口，就可以使用adb了。\n\n3. 终端输入命令\n\n    ```bash\n    fastboot flash recovery twrp.img\n    fastboot boot twrp.img\n    ```\n    `twrp.img` 是替换成你的twrp包的路径和名称。\n   \n   > 第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。\n\n# 进入twrp，刷eu固件\n1. 去下载miui欧洲版：[miui欧洲版发布页面](https://xiaomi.eu/community/link-forums/roms-download.73/)\n\n2. 格式化data分区\n\n3. 连接电脑，把eu固件拷入sdcard目录\n   \n   手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP\n   \n4. 选择eu包刷机\n\n   {% note primary %}因为你选了要开启全盘加密\n\n   刷到这里的时候手机先放一边, 刷完不要开机, 下面操作电脑弄出修复包一起刷了以后再开机\n\n   {% endnote %}\n\n# 提取加密包以及mipay\n> 要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：[MIUI国际版mi pay解决方案](https://www.yipkwong.com/2018/06/06/167/)，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。\n\n使用：[Mi Pay Extractor](https://github.com/linusyang92/mipay-extract)，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。\n1. 下载zip包: [repo的下载链接](https://github.com/linusyang92/mipay-extract/archive/master.zip)\n\n   linux用户可以clone\n   \n    ```bash\n    git clone https://github.com/linusyang92/mipay-extract.git\n    ```\n\n2. 下载国内的miui最新卡刷包，放入同一目录\n\n2. miui欧洲版卡刷包，也放在同一目录\n\n   ![目录截图](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg)\n\n4. 运行`extract.bat`(双击)\n\n   会生成一个卡刷包`mipay-MIxxx.zip`\n\n   {% note default %}\n\n   如果出现下面这样的错误：\n\n   ```bash\n    extract.sh: line 2: $'\\r': command not found\n    extract.sh: line 3: cd: $'.\\r': No such file or directory\n    extract.sh: line 4: $'\\r': command not found\n    extract.sh: line 6: $'\\r': command not found\n    extract.sh: line 18: $'\\r': command not found\n    extract.sh: line 19: syntax error near unexpected token `$'{\\r''\n    'xtract.sh: line 19: `exists() {\n    请按任意键继续. . .\n   ```\n\n   那就是因为`extract.sh`文件用的换行符不对，把原来的换行符`CRLF`改成`LF`后保存就可以正常运行了\n\n   {% endnote %}\n\n   Windows下双击`extract.bat`就可以开始提取，会要几分钟时间。\n   ![bat-run](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg)这样就说明提取成功，现在目录下会有`mipay-MIxxx.zip`,这就是一个卡刷包，通过twrp可以直接刷入\n\n5. 运行`cleaner-fix.bat`(双击)\n\n    {% note primary %}\n\n    这里就是生成开启默认加密的刷机包 `force-fbe`\n    {% endnote %}\n\n    还可以生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。\n\n6. 对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，在cmd运行`extract.bat --appvault`可以生成这样的修复包，也就是替换成跟国内一样的信息助手\n\nFinally，我们有了四个准备卡刷的包：\n![目录截图2](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg)全部还是通过MTP放进手机，一个一个刷就是了\n\n{% note warning %}如果刷机的时候遇到255错误\n\n简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的`CRLF`，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹`META-INF`一路点进去，最后看到了一个叫做`update-binary`的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了`CRLF`换行符导致错误的。用VScode打开转换成`LF`后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。\n\n{% endnote %}\n\n# 完成, 开机\n\n刷好后就可以开机\n\n选择语言，连WiFi，登账号\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg)\n\n这时候如果进设置就会看到手机已加密\n\n> 是用来看的, 要是看到没加密不能在这里选开启加密, 不然会出问题\n>\n> (如果有人试了不刷加密包来到这里可以开启加密记得告诉我)\n\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen.png)\n\n好了这样就完事了, 可以继续看下面, 下个国产的应用商店\n\n<!-- endtab -->\n\n<!-- tab 不开启全盘加密 -->\n\n下面从第一步，你还是个国内miui系统开始\n\n# 解锁bootloader\n\n看这里👉 http://www.miui.com/unlock/index.html\n\n# 刷入国际版ROM\n\n{% note info %}\n根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试\n{% endnote%}\n\n欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了\n\n   - 去下载线刷包：[线刷包地址](http://en.miui.com/download.html)\n   - 手机音量下+电源键开机，进入Fastboot模式\n   - 下载小米的[通用刷机工具](http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip)\n   - 按照教程一步一步往下做\n   - **注意**软件打开右下角不要选`全部删除并lock`，选择`全部删除`就可以了\n   - 线刷具体教程：http://www.miui.com/shuaji-393.html\n\n# 不用开机，继续刷入twrp\n\n怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。\n如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。\n\n1. [twrp官方下载](https://twrp.me/Devices/)\n\n    选择你的机型对应下载下来\n\n2. 打开adb终端\n\n    adb终端的位置在`\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android`里面，进入到`Android`文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd/power shell窗口，就可以使用adb了。\n\n3. 终端输入命令\n\n    ```bash\n    fastboot flash recovery twrp.img\n    fastboot boot twrp.img\n    ```\n    \n    `twrp.img` 是替换成你的twrp包的路径和名称。\n\n    > 第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。\n\n# 进入twrp，刷eu固件\n\n1. 去下载miui欧洲版：[miui欧洲版发布页面](https://xiaomi.eu/community/link-forums/roms-download.73/)\n3. 连接电脑，把eu固件拷入sdcard目录\n   手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP\n\n3. 从手机上点刷机，选择刷机包，完成，开机。\n\n到这里已经完成miui欧洲版刷机了，选择语言，连WiFi，登账号\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg)这是开机后的桌面\nmiui欧洲版阉割了很多比如小米钱包，里面的卡模拟的功能我用得到，包括公交卡什么的，所以接下来折腾如何装回这个应用\n\n# 提取Mipay安装包以及本土化修复包\n\n> 要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：[MIUI国际版mi pay解决方案](https://www.yipkwong.com/2018/06/06/167/)，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。\n\n使用：[Mi Pay Extractor](https://github.com/linusyang92/mipay-extract)，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。\n\n1. 下载zip包: [repo的下载链接](https://github.com/linusyang92/mipay-extract/archive/master.zip)\n\n   linux用户可以clone\n\n    ```bash\n    git clone https://github.com/linusyang92/mipay-extract.git\n    ```\n\n\n2. 下载国内的miui最新卡刷包，放入同一目录\n\n3. miui欧洲版卡刷包，也放在同一目录\n\n   ![目录截图](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg)\n\n4. 运行`extract.bat`(双击)\n\n   可以生成加密包和一个修复包\n\n   {% note default %}\n\n   如果出现下面这样的错误：\n\n   ```bash\n    extract.sh: line 2: $'\\r': command not found\n    extract.sh: line 3: cd: $'.\\r': No such file or directory\n    extract.sh: line 4: $'\\r': command not found\n    extract.sh: line 6: $'\\r': command not found\n    extract.sh: line 18: $'\\r': command not found\n    extract.sh: line 19: syntax error near unexpected token `$'{\\r''\n    'xtract.sh: line 19: `exists() {\n    请按任意键继续. . .\n   ```\n\n   那就是因为`extract.sh`文件用的换行符不对，把原来的换行符`CRLF`改成`LF`后保存就可以正常运行了\n\n   {% endnote %}   \n\n   ![bat-run](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg)\n\n   这样就说明提取成功，现在目录下会有`mipay-MIxxx.zip`,这就是一个卡刷包，通过twrp可以直接刷入\n\n5. 运行`cleaner-fix.bat`\n   生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。这个命令同时还会生成开启默认加密的刷机包。\n   \n6. 对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，`extract.bat --appvault`可以生成这样的修复包，也就是替换成跟国内一样的信息助手\n\nFinally，我们有了四个准备卡刷的包：\n![目录截图2](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg)全扔进手机，一个一个刷就是了\n\n{% note warning %}如果刷机的时候遇到255错误\n\n简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的`CRLF`，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹`META-INF`一路点进去，最后看到了一个叫做`update-binary`的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了`CRLF`换行符导致错误的。用VScode打开转换成`LF`后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。\n\n{% endnote %}\n\n<!-- endtab -->\n{% endtabs %}\n\n下面是安装小米应用商店，装了就可以用它来更新小米钱包，而不用每次想更新都去下载线刷包。\n\n下载地址：https://xiaomi-market.cn.uptodown.com/android\n\n不知道为什么这个网站是被墙了的，开全局去下\n\n然后就可以安装了，一切都非常完美，可以一键装应用和更新\n\n最后，终于写完了这个教程，自我感觉是很详细了，希望可以帮到跟我一样在折腾miui的人。我刷这个系统的初衷是国内版变得越来越难用，最主要的表现是经常熄屏自己莫名震动，还经常自己亮屏，打开了看也没有什么通知，后来上网一搜发现我不是一个人，这是小米系统本身的问题，那些震动是真的有通知不过之前被我从通知栏禁止了，可能禁止的层面不对，等通知到达了震动了系统才把通知删掉，这不是折磨人么。我就找能不能刷类似CM的原版安卓，然后就在知乎上看到了miui欧洲版，感觉对安卓的底层不会改太多，就折腾用欧洲版来了。现在用了两个星期，确实好用，字体不好看还换了个字体，外观上和国内版差别也不大。就是每次升级系统不是很方便就是了，之后会想办法用持续集成完成自动的提取。\n\n\n> 2019-4-23更新：总结一下用miui-eu时更新系统步骤\n>\n>    1. 下载eu包：https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/\n>\n>    2. 下载国内相同版本包：http://www.miui.com/download.html\n>\n>    3. 在`mipay-extract`文件夹中执行以下命令\n>       ```\n>       ./cleaner-fix.bat\n>       ./extract.bat --appvault\n>       ```\n>\n>    4. 生成的4个包加上下载下来的eu包拷贝进手机，重启进入twrp选择刷机包刷机\n>\n>       可以批量选择刷机包，顺序是eu包在最前面，其他的在后面刷。\n>\n>       > 我的[Release页面](https://github.com/xiaoxx970/mipay-extract/releases) ，如果你也是小米6就可以直接下载下来用","source":"_posts/miui-eu.md","raw":"title: 小米6刷入miui欧洲版以及安装小米钱包、应用商店APP,开启全盘加密\ntags:\n\n  - MIUI\ndate: 2018-12-18 16:03:00\n---\n{% note info no-icon %}\n[miui.eu](https://xiaomi.eu/community/forums/miui-rom-releases.103/)，一个真正没有广告的系统，比国际版还要纯净\n{% endnote %}\n\n我一开始照着知乎[这个教程](https://www.zhihu.com/question/50231539)刷的，刷了后死活开不了机，也就是卡在了MI界面，后来在miui欧洲论坛找到了[这个](https://xiaomi.eu/community/threads/bootloop-problem-while-flashing-eu-stable.46593/)答案，完全符合我的情况，不能直接从国内版刷成欧洲版，要先刷个国际版，在国际版的基础上才能刷欧洲版。\n\n> miui欧洲版自带人脸解锁，抬起亮屏，还有谷歌的Smart Lock，挺有意思。\n\n<!--more-->\n\n----\n\n> 2020-02-20 更新:\n> \n> 不再跟随官方miui的链接, 因为官方已经不再更新开发板的链接, 找了一个第三方列表: [小米6 MIUI开发版下载索引 (卡刷包)](https://miuiver.com/sagit_developer_recovery/). 现在还是每周自动生成一次, 发布在这里👉[releases 页面](https://github.com/xiaoxx970/mipay-extract/releases), 要注意自从9.8.15后面的版本我都没有自己测试过, 出了问题开机卡米什么的一般清data可以解决.\n\n> 2019-08-18 更新：\n>\n> 现在已经半夜1点，我的小米6正在通过线刷刷国内版miui，起因是这次更新miui9.8.15版本后出了一点问题怎么也开不了机，具体的问题应该就是换行符的问题，我刚通过脚本自动获取链接的方式做到持续集成，可以全自动生成刷机包而不用每次改两个链接以及git commit,tag,push等，现在只要在持续集成那边开个定时，就可以每周自动出炉修复刷机包并且上传到GitHub的release页面，可惜我再也用不到了（大概），还需要的朋友记得在评论区告诉我，我会考虑加上其他机型或者出个持续集成的教程。\n>\n> 链接在这里：https://github.com/xiaoxx970/mipay-extract/releases\n>\n> 现在已经开启了每周更新，不用我动就会保持最新版本的，用着miui欧洲版的同学每次更新前去这个页面下载一下就可以刷机了。 \n\n首先要说的是，要折腾，先备份。\n如果你用了谷歌验证器，可以象我一样换成Authy，通过手机登录，不用担心换手机找不回来\n微信可以通过Windows端备份聊天记录\n相册短信便签什么的就交给小米云，差不多就这些\n\n其次要说的是，等下用到的所有提取出来的刷机包，在每一次更新系统后都会失效，你可以选择再次刷入。\n特别地，关于支付安全，eu固件默认关闭了全盘强制加密（FBE）功能，这跟国内固件不一样，最直接的影响就是进入恢复模式不用解密，数据暴露在捡到你手机的人面前，所以我是选择刷入了开启加密的补丁包，同样的每一次更新系统就必须在更新后重新刷入`force-fbe`包，否则无法开机。\n\n# 请选择你的选择↓\n\n{% tabs fbe %}\n<!-- tab 开启全盘加密 -->\n\n下面从第一步，你还是个国内miui系统开始\n\n# 解锁bootloader\n\n看这里👉 http://www.miui.com/unlock/index.html\n\n# 刷入国际版ROM\n\n{% note info %}\n根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试\n{% endnote%}\n\n欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了\n   - 去下载线刷包：[线刷包地址](http://en.miui.com/download.html)\n   - 手机音量下+电源键开机，进入Fastboot模式\n   - 下载小米的[通用刷机工具](http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip)\n   - 按照教程一步一步往下做\n   - **注意**软件打开右下角不要选`全部删除并lock`，选择`全部删除`就可以了\n   - 线刷具体教程：http://www.miui.com/shuaji-393.html\n\n# 不用开机，继续刷入twrp\n怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。\n如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。\n1. [twrp官方下载](https://twrp.me/Devices/)\n\n    选择你的机型对应下载下来\n\n2. 打开adb终端\n\n    adb终端的位置在`\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android`里面，进入到`Android`文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd/power shell窗口，就可以使用adb了。\n\n3. 终端输入命令\n\n    ```bash\n    fastboot flash recovery twrp.img\n    fastboot boot twrp.img\n    ```\n    `twrp.img` 是替换成你的twrp包的路径和名称。\n   \n   > 第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。\n\n# 进入twrp，刷eu固件\n1. 去下载miui欧洲版：[miui欧洲版发布页面](https://xiaomi.eu/community/link-forums/roms-download.73/)\n\n2. 格式化data分区\n\n3. 连接电脑，把eu固件拷入sdcard目录\n   \n   手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP\n   \n4. 选择eu包刷机\n\n   {% note primary %}因为你选了要开启全盘加密\n\n   刷到这里的时候手机先放一边, 刷完不要开机, 下面操作电脑弄出修复包一起刷了以后再开机\n\n   {% endnote %}\n\n# 提取加密包以及mipay\n> 要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：[MIUI国际版mi pay解决方案](https://www.yipkwong.com/2018/06/06/167/)，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。\n\n使用：[Mi Pay Extractor](https://github.com/linusyang92/mipay-extract)，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。\n1. 下载zip包: [repo的下载链接](https://github.com/linusyang92/mipay-extract/archive/master.zip)\n\n   linux用户可以clone\n   \n    ```bash\n    git clone https://github.com/linusyang92/mipay-extract.git\n    ```\n\n2. 下载国内的miui最新卡刷包，放入同一目录\n\n2. miui欧洲版卡刷包，也放在同一目录\n\n   ![目录截图](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg)\n\n4. 运行`extract.bat`(双击)\n\n   会生成一个卡刷包`mipay-MIxxx.zip`\n\n   {% note default %}\n\n   如果出现下面这样的错误：\n\n   ```bash\n    extract.sh: line 2: $'\\r': command not found\n    extract.sh: line 3: cd: $'.\\r': No such file or directory\n    extract.sh: line 4: $'\\r': command not found\n    extract.sh: line 6: $'\\r': command not found\n    extract.sh: line 18: $'\\r': command not found\n    extract.sh: line 19: syntax error near unexpected token `$'{\\r''\n    'xtract.sh: line 19: `exists() {\n    请按任意键继续. . .\n   ```\n\n   那就是因为`extract.sh`文件用的换行符不对，把原来的换行符`CRLF`改成`LF`后保存就可以正常运行了\n\n   {% endnote %}\n\n   Windows下双击`extract.bat`就可以开始提取，会要几分钟时间。\n   ![bat-run](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg)这样就说明提取成功，现在目录下会有`mipay-MIxxx.zip`,这就是一个卡刷包，通过twrp可以直接刷入\n\n5. 运行`cleaner-fix.bat`(双击)\n\n    {% note primary %}\n\n    这里就是生成开启默认加密的刷机包 `force-fbe`\n    {% endnote %}\n\n    还可以生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。\n\n6. 对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，在cmd运行`extract.bat --appvault`可以生成这样的修复包，也就是替换成跟国内一样的信息助手\n\nFinally，我们有了四个准备卡刷的包：\n![目录截图2](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg)全部还是通过MTP放进手机，一个一个刷就是了\n\n{% note warning %}如果刷机的时候遇到255错误\n\n简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的`CRLF`，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹`META-INF`一路点进去，最后看到了一个叫做`update-binary`的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了`CRLF`换行符导致错误的。用VScode打开转换成`LF`后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。\n\n{% endnote %}\n\n# 完成, 开机\n\n刷好后就可以开机\n\n选择语言，连WiFi，登账号\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg)\n\n这时候如果进设置就会看到手机已加密\n\n> 是用来看的, 要是看到没加密不能在这里选开启加密, 不然会出问题\n>\n> (如果有人试了不刷加密包来到这里可以开启加密记得告诉我)\n\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen.png)\n\n好了这样就完事了, 可以继续看下面, 下个国产的应用商店\n\n<!-- endtab -->\n\n<!-- tab 不开启全盘加密 -->\n\n下面从第一步，你还是个国内miui系统开始\n\n# 解锁bootloader\n\n看这里👉 http://www.miui.com/unlock/index.html\n\n# 刷入国际版ROM\n\n{% note info %}\n根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试\n{% endnote%}\n\n欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了\n\n   - 去下载线刷包：[线刷包地址](http://en.miui.com/download.html)\n   - 手机音量下+电源键开机，进入Fastboot模式\n   - 下载小米的[通用刷机工具](http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip)\n   - 按照教程一步一步往下做\n   - **注意**软件打开右下角不要选`全部删除并lock`，选择`全部删除`就可以了\n   - 线刷具体教程：http://www.miui.com/shuaji-393.html\n\n# 不用开机，继续刷入twrp\n\n怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。\n如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。\n\n1. [twrp官方下载](https://twrp.me/Devices/)\n\n    选择你的机型对应下载下来\n\n2. 打开adb终端\n\n    adb终端的位置在`\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android`里面，进入到`Android`文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd/power shell窗口，就可以使用adb了。\n\n3. 终端输入命令\n\n    ```bash\n    fastboot flash recovery twrp.img\n    fastboot boot twrp.img\n    ```\n    \n    `twrp.img` 是替换成你的twrp包的路径和名称。\n\n    > 第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。\n\n# 进入twrp，刷eu固件\n\n1. 去下载miui欧洲版：[miui欧洲版发布页面](https://xiaomi.eu/community/link-forums/roms-download.73/)\n3. 连接电脑，把eu固件拷入sdcard目录\n   手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP\n\n3. 从手机上点刷机，选择刷机包，完成，开机。\n\n到这里已经完成miui欧洲版刷机了，选择语言，连WiFi，登账号\n![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg)这是开机后的桌面\nmiui欧洲版阉割了很多比如小米钱包，里面的卡模拟的功能我用得到，包括公交卡什么的，所以接下来折腾如何装回这个应用\n\n# 提取Mipay安装包以及本土化修复包\n\n> 要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：[MIUI国际版mi pay解决方案](https://www.yipkwong.com/2018/06/06/167/)，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。\n\n使用：[Mi Pay Extractor](https://github.com/linusyang92/mipay-extract)，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。\n\n1. 下载zip包: [repo的下载链接](https://github.com/linusyang92/mipay-extract/archive/master.zip)\n\n   linux用户可以clone\n\n    ```bash\n    git clone https://github.com/linusyang92/mipay-extract.git\n    ```\n\n\n2. 下载国内的miui最新卡刷包，放入同一目录\n\n3. miui欧洲版卡刷包，也放在同一目录\n\n   ![目录截图](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg)\n\n4. 运行`extract.bat`(双击)\n\n   可以生成加密包和一个修复包\n\n   {% note default %}\n\n   如果出现下面这样的错误：\n\n   ```bash\n    extract.sh: line 2: $'\\r': command not found\n    extract.sh: line 3: cd: $'.\\r': No such file or directory\n    extract.sh: line 4: $'\\r': command not found\n    extract.sh: line 6: $'\\r': command not found\n    extract.sh: line 18: $'\\r': command not found\n    extract.sh: line 19: syntax error near unexpected token `$'{\\r''\n    'xtract.sh: line 19: `exists() {\n    请按任意键继续. . .\n   ```\n\n   那就是因为`extract.sh`文件用的换行符不对，把原来的换行符`CRLF`改成`LF`后保存就可以正常运行了\n\n   {% endnote %}   \n\n   ![bat-run](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg)\n\n   这样就说明提取成功，现在目录下会有`mipay-MIxxx.zip`,这就是一个卡刷包，通过twrp可以直接刷入\n\n5. 运行`cleaner-fix.bat`\n   生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。这个命令同时还会生成开启默认加密的刷机包。\n   \n6. 对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，`extract.bat --appvault`可以生成这样的修复包，也就是替换成跟国内一样的信息助手\n\nFinally，我们有了四个准备卡刷的包：\n![目录截图2](https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg)全扔进手机，一个一个刷就是了\n\n{% note warning %}如果刷机的时候遇到255错误\n\n简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的`CRLF`，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹`META-INF`一路点进去，最后看到了一个叫做`update-binary`的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了`CRLF`换行符导致错误的。用VScode打开转换成`LF`后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。\n\n{% endnote %}\n\n<!-- endtab -->\n{% endtabs %}\n\n下面是安装小米应用商店，装了就可以用它来更新小米钱包，而不用每次想更新都去下载线刷包。\n\n下载地址：https://xiaomi-market.cn.uptodown.com/android\n\n不知道为什么这个网站是被墙了的，开全局去下\n\n然后就可以安装了，一切都非常完美，可以一键装应用和更新\n\n最后，终于写完了这个教程，自我感觉是很详细了，希望可以帮到跟我一样在折腾miui的人。我刷这个系统的初衷是国内版变得越来越难用，最主要的表现是经常熄屏自己莫名震动，还经常自己亮屏，打开了看也没有什么通知，后来上网一搜发现我不是一个人，这是小米系统本身的问题，那些震动是真的有通知不过之前被我从通知栏禁止了，可能禁止的层面不对，等通知到达了震动了系统才把通知删掉，这不是折磨人么。我就找能不能刷类似CM的原版安卓，然后就在知乎上看到了miui欧洲版，感觉对安卓的底层不会改太多，就折腾用欧洲版来了。现在用了两个星期，确实好用，字体不好看还换了个字体，外观上和国内版差别也不大。就是每次升级系统不是很方便就是了，之后会想办法用持续集成完成自动的提取。\n\n\n> 2019-4-23更新：总结一下用miui-eu时更新系统步骤\n>\n>    1. 下载eu包：https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/\n>\n>    2. 下载国内相同版本包：http://www.miui.com/download.html\n>\n>    3. 在`mipay-extract`文件夹中执行以下命令\n>       ```\n>       ./cleaner-fix.bat\n>       ./extract.bat --appvault\n>       ```\n>\n>    4. 生成的4个包加上下载下来的eu包拷贝进手机，重启进入twrp选择刷机包刷机\n>\n>       可以批量选择刷机包，顺序是eu包在最前面，其他的在后面刷。\n>\n>       > 我的[Release页面](https://github.com/xiaoxx970/mipay-extract/releases) ，如果你也是小米6就可以直接下载下来用","slug":"miui-eu","published":1,"updated":"2022-06-03T16:41:20.632Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn3000d6z0h8bw8ax5c","content":"<div class=\"note info no-icon\"><p><a href=\"https://xiaomi.eu/community/forums/miui-rom-releases.103/\">miui.eu</a>，一个真正没有广告的系统，比国际版还要纯净</p>\n</div>\n\n<p>我一开始照着知乎<a href=\"https://www.zhihu.com/question/50231539\">这个教程</a>刷的，刷了后死活开不了机，也就是卡在了MI界面，后来在miui欧洲论坛找到了<a href=\"https://xiaomi.eu/community/threads/bootloop-problem-while-flashing-eu-stable.46593/\">这个</a>答案，完全符合我的情况，不能直接从国内版刷成欧洲版，要先刷个国际版，在国际版的基础上才能刷欧洲版。</p>\n<blockquote>\n<p>miui欧洲版自带人脸解锁，抬起亮屏，还有谷歌的Smart Lock，挺有意思。</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<hr>\n<blockquote>\n<p>2020-02-20 更新:</p>\n<p>不再跟随官方miui的链接, 因为官方已经不再更新开发板的链接, 找了一个第三方列表: <a href=\"https://miuiver.com/sagit_developer_recovery/\">小米6 MIUI开发版下载索引 (卡刷包)</a>. 现在还是每周自动生成一次, 发布在这里👉<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">releases 页面</a>, 要注意自从9.8.15后面的版本我都没有自己测试过, 出了问题开机卡米什么的一般清data可以解决.</p>\n</blockquote>\n<blockquote>\n<p>2019-08-18 更新：</p>\n<p>现在已经半夜1点，我的小米6正在通过线刷刷国内版miui，起因是这次更新miui9.8.15版本后出了一点问题怎么也开不了机，具体的问题应该就是换行符的问题，我刚通过脚本自动获取链接的方式做到持续集成，可以全自动生成刷机包而不用每次改两个链接以及git commit,tag,push等，现在只要在持续集成那边开个定时，就可以每周自动出炉修复刷机包并且上传到GitHub的release页面，可惜我再也用不到了（大概），还需要的朋友记得在评论区告诉我，我会考虑加上其他机型或者出个持续集成的教程。</p>\n<p>链接在这里：<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">https://github.com/xiaoxx970/mipay-extract/releases</a></p>\n<p>现在已经开启了每周更新，不用我动就会保持最新版本的，用着miui欧洲版的同学每次更新前去这个页面下载一下就可以刷机了。 </p>\n</blockquote>\n<p>首先要说的是，要折腾，先备份。<br>如果你用了谷歌验证器，可以象我一样换成Authy，通过手机登录，不用担心换手机找不回来<br>微信可以通过Windows端备份聊天记录<br>相册短信便签什么的就交给小米云，差不多就这些</p>\n<p>其次要说的是，等下用到的所有提取出来的刷机包，在每一次更新系统后都会失效，你可以选择再次刷入。<br>特别地，关于支付安全，eu固件默认关闭了全盘强制加密（FBE）功能，这跟国内固件不一样，最直接的影响就是进入恢复模式不用解密，数据暴露在捡到你手机的人面前，所以我是选择刷入了开启加密的补丁包，同样的每一次更新系统就必须在更新后重新刷入<code>force-fbe</code>包，否则无法开机。</p>\n<h1 id=\"请选择你的选择↓\"><a href=\"#请选择你的选择↓\" class=\"headerlink\" title=\"请选择你的选择↓\"></a>请选择你的选择↓</h1><div class=\"tabs\" id=\"fbe\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#fbe-1\">开启全盘加密</a></li><li class=\"tab\"><a href=\"#fbe-2\">不开启全盘加密</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"fbe-1\"><p>下面从第一步，你还是个国内miui系统开始</p>\n<h1 id=\"解锁bootloader\"><a href=\"#解锁bootloader\" class=\"headerlink\" title=\"解锁bootloader\"></a>解锁bootloader</h1><p>看这里👉 <a href=\"http://www.miui.com/unlock/index.html\">http://www.miui.com/unlock/index.html</a></p>\n<h1 id=\"刷入国际版ROM\"><a href=\"#刷入国际版ROM\" class=\"headerlink\" title=\"刷入国际版ROM\"></a>刷入国际版ROM</h1><div class=\"note info\"><p>根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试</p>\n</div>\n\n<p>欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了</p>\n<ul>\n<li>去下载线刷包：<a href=\"http://en.miui.com/download.html\">线刷包地址</a></li>\n<li>手机音量下+电源键开机，进入Fastboot模式</li>\n<li>下载小米的<a href=\"http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip\">通用刷机工具</a></li>\n<li>按照教程一步一步往下做</li>\n<li><strong>注意</strong>软件打开右下角不要选<code>全部删除并lock</code>，选择<code>全部删除</code>就可以了</li>\n<li>线刷具体教程：<a href=\"http://www.miui.com/shuaji-393.html\">http://www.miui.com/shuaji-393.html</a></li>\n</ul>\n<h1 id=\"不用开机，继续刷入twrp\"><a href=\"#不用开机，继续刷入twrp\" class=\"headerlink\" title=\"不用开机，继续刷入twrp\"></a>不用开机，继续刷入twrp</h1><p>怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。<br>如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。</p>\n<ol>\n<li><p><a href=\"https://twrp.me/Devices/\">twrp官方下载</a></p>\n<p> 选择你的机型对应下载下来</p>\n</li>\n<li><p>打开adb终端</p>\n<p> adb终端的位置在<code>\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android</code>里面，进入到<code>Android</code>文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd&#x2F;power shell窗口，就可以使用adb了。</p>\n</li>\n<li><p>终端输入命令</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash recovery twrp.img</span><br><span class=\"line\">fastboot boot twrp.img</span><br></pre></td></tr></table></figure>\n<p> <code>twrp.img</code> 是替换成你的twrp包的路径和名称。</p>\n<blockquote>\n<p>第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。</p>\n</blockquote>\n</li>\n</ol>\n<h1 id=\"进入twrp，刷eu固件\"><a href=\"#进入twrp，刷eu固件\" class=\"headerlink\" title=\"进入twrp，刷eu固件\"></a>进入twrp，刷eu固件</h1><ol>\n<li><p>去下载miui欧洲版：<a href=\"https://xiaomi.eu/community/link-forums/roms-download.73/\">miui欧洲版发布页面</a></p>\n</li>\n<li><p>格式化data分区</p>\n</li>\n<li><p>连接电脑，把eu固件拷入sdcard目录</p>\n<p>手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP</p>\n</li>\n<li><p>选择eu包刷机</p>\n<div class=\"note primary\"><p>因为你选了要开启全盘加密</p></li>\n</ol>\n<p>   刷到这里的时候手机先放一边, 刷完不要开机, 下面操作电脑弄出修复包一起刷了以后再开机</p>\n</div>\n\n<h1 id=\"提取加密包以及mipay\"><a href=\"#提取加密包以及mipay\" class=\"headerlink\" title=\"提取加密包以及mipay\"></a>提取加密包以及mipay</h1><blockquote>\n<p>要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：<a href=\"https://www.yipkwong.com/2018/06/06/167/\">MIUI国际版mi pay解决方案</a>，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。</p>\n</blockquote>\n<p>使用：<a href=\"https://github.com/linusyang92/mipay-extract\">Mi Pay Extractor</a>，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。</p>\n<ol>\n<li><p>下载zip包: <a href=\"https://github.com/linusyang92/mipay-extract/archive/master.zip\">repo的下载链接</a></p>\n<p>linux用户可以clone</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/linusyang92/mipay-extract.git</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载国内的miui最新卡刷包，放入同一目录</p>\n</li>\n<li><p>miui欧洲版卡刷包，也放在同一目录</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg\" alt=\"目录截图\"></p>\n</li>\n<li><p>运行<code>extract.bat</code>(双击)</p>\n<p>会生成一个卡刷包<code>mipay-MIxxx.zip</code></p>\n<div class=\"note default\"><p>如果出现下面这样的错误：</p></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract.sh: line 2: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 3: <span class=\"built_in\">cd</span>: $<span class=\"string\">&#x27;.\\r&#x27;</span>: No such file or directory</span><br><span class=\"line\">extract.sh: line 4: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 6: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 18: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 19: syntax error near unexpected token `$<span class=\"string\">&#x27;&#123;\\r&#x27;</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span>xtract.sh: line 19: `<span class=\"function\"><span class=\"title\">exists</span></span>() &#123;</span><br><span class=\"line\">请按任意键继续. . .</span><br></pre></td></tr></table></figure>\n\n<p>那就是因为<code>extract.sh</code>文件用的换行符不对，把原来的换行符<code>CRLF</code>改成<code>LF</code>后保存就可以正常运行了</p>\n</div>\n\n<p>   Windows下双击<code>extract.bat</code>就可以开始提取，会要几分钟时间。<br>   <img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg\" alt=\"bat-run\">这样就说明提取成功，现在目录下会有<code>mipay-MIxxx.zip</code>,这就是一个卡刷包，通过twrp可以直接刷入</p>\n<ol start=\"5\">\n<li><p>运行<code>cleaner-fix.bat</code>(双击)</p>\n <div class=\"note primary\"><p>这里就是生成开启默认加密的刷机包 <code>force-fbe</code></p></li>\n</ol>\n</div>\n\n<pre><code>还可以生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。\n</code></pre>\n<ol start=\"6\">\n<li>对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，在cmd运行<code>extract.bat --appvault</code>可以生成这样的修复包，也就是替换成跟国内一样的信息助手</li>\n</ol>\n<p>Finally，我们有了四个准备卡刷的包：<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg\" alt=\"目录截图2\">全部还是通过MTP放进手机，一个一个刷就是了</p>\n<div class=\"note warning\"><p>如果刷机的时候遇到255错误</p>\n<p>简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的<code>CRLF</code>，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹<code>META-INF</code>一路点进去，最后看到了一个叫做<code>update-binary</code>的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了<code>CRLF</code>换行符导致错误的。用VScode打开转换成<code>LF</code>后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。</p>\n</div>\n\n<h1 id=\"完成-开机\"><a href=\"#完成-开机\" class=\"headerlink\" title=\"完成, 开机\"></a>完成, 开机</h1><p>刷好后就可以开机</p>\n<p>选择语言，连WiFi，登账号<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg\"></p>\n<p>这时候如果进设置就会看到手机已加密</p>\n<blockquote>\n<p>是用来看的, 要是看到没加密不能在这里选开启加密, 不然会出问题</p>\n<p>(如果有人试了不刷加密包来到这里可以开启加密记得告诉我)</p>\n</blockquote>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen.png\"></p>\n<p>好了这样就完事了, 可以继续看下面, 下个国产的应用商店</p></div><div class=\"tab-pane\" id=\"fbe-2\"><p>下面从第一步，你还是个国内miui系统开始</p>\n<h1 id=\"解锁bootloader\"><a href=\"#解锁bootloader\" class=\"headerlink\" title=\"解锁bootloader\"></a>解锁bootloader</h1><p>看这里👉 <a href=\"http://www.miui.com/unlock/index.html\">http://www.miui.com/unlock/index.html</a></p>\n<h1 id=\"刷入国际版ROM\"><a href=\"#刷入国际版ROM\" class=\"headerlink\" title=\"刷入国际版ROM\"></a>刷入国际版ROM</h1><div class=\"note info\"><p>根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试</p>\n</div>\n\n<p>欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了</p>\n<ul>\n<li>去下载线刷包：<a href=\"http://en.miui.com/download.html\">线刷包地址</a></li>\n<li>手机音量下+电源键开机，进入Fastboot模式</li>\n<li>下载小米的<a href=\"http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip\">通用刷机工具</a></li>\n<li>按照教程一步一步往下做</li>\n<li><strong>注意</strong>软件打开右下角不要选<code>全部删除并lock</code>，选择<code>全部删除</code>就可以了</li>\n<li>线刷具体教程：<a href=\"http://www.miui.com/shuaji-393.html\">http://www.miui.com/shuaji-393.html</a></li>\n</ul>\n<h1 id=\"不用开机，继续刷入twrp\"><a href=\"#不用开机，继续刷入twrp\" class=\"headerlink\" title=\"不用开机，继续刷入twrp\"></a>不用开机，继续刷入twrp</h1><p>怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。<br>如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。</p>\n<ol>\n<li><p><a href=\"https://twrp.me/Devices/\">twrp官方下载</a></p>\n<p> 选择你的机型对应下载下来</p>\n</li>\n<li><p>打开adb终端</p>\n<p> adb终端的位置在<code>\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android</code>里面，进入到<code>Android</code>文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd&#x2F;power shell窗口，就可以使用adb了。</p>\n</li>\n<li><p>终端输入命令</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash recovery twrp.img</span><br><span class=\"line\">fastboot boot twrp.img</span><br></pre></td></tr></table></figure>\n<p> <code>twrp.img</code> 是替换成你的twrp包的路径和名称。</p>\n<blockquote>\n<p>第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。</p>\n</blockquote>\n</li>\n</ol>\n<h1 id=\"进入twrp，刷eu固件\"><a href=\"#进入twrp，刷eu固件\" class=\"headerlink\" title=\"进入twrp，刷eu固件\"></a>进入twrp，刷eu固件</h1><ol>\n<li><p>去下载miui欧洲版：<a href=\"https://xiaomi.eu/community/link-forums/roms-download.73/\">miui欧洲版发布页面</a></p>\n</li>\n<li><p>连接电脑，把eu固件拷入sdcard目录<br>手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP</p>\n</li>\n<li><p>从手机上点刷机，选择刷机包，完成，开机。</p>\n</li>\n</ol>\n<p>到这里已经完成miui欧洲版刷机了，选择语言，连WiFi，登账号<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg\">这是开机后的桌面<br>miui欧洲版阉割了很多比如小米钱包，里面的卡模拟的功能我用得到，包括公交卡什么的，所以接下来折腾如何装回这个应用</p>\n<h1 id=\"提取Mipay安装包以及本土化修复包\"><a href=\"#提取Mipay安装包以及本土化修复包\" class=\"headerlink\" title=\"提取Mipay安装包以及本土化修复包\"></a>提取Mipay安装包以及本土化修复包</h1><blockquote>\n<p>要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：<a href=\"https://www.yipkwong.com/2018/06/06/167/\">MIUI国际版mi pay解决方案</a>，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。</p>\n</blockquote>\n<p>使用：<a href=\"https://github.com/linusyang92/mipay-extract\">Mi Pay Extractor</a>，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。</p>\n<ol>\n<li><p>下载zip包: <a href=\"https://github.com/linusyang92/mipay-extract/archive/master.zip\">repo的下载链接</a></p>\n<p>linux用户可以clone</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/linusyang92/mipay-extract.git</span><br></pre></td></tr></table></figure>\n\n</li>\n<li><p>下载国内的miui最新卡刷包，放入同一目录</p>\n</li>\n<li><p>miui欧洲版卡刷包，也放在同一目录</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg\" alt=\"目录截图\"></p>\n</li>\n<li><p>运行<code>extract.bat</code>(双击)</p>\n<p>可以生成加密包和一个修复包</p>\n<div class=\"note default\"><p>如果出现下面这样的错误：</p></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract.sh: line 2: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 3: <span class=\"built_in\">cd</span>: $<span class=\"string\">&#x27;.\\r&#x27;</span>: No such file or directory</span><br><span class=\"line\">extract.sh: line 4: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 6: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 18: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 19: syntax error near unexpected token `$<span class=\"string\">&#x27;&#123;\\r&#x27;</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span>xtract.sh: line 19: `<span class=\"function\"><span class=\"title\">exists</span></span>() &#123;</span><br><span class=\"line\">请按任意键继续. . .</span><br></pre></td></tr></table></figure>\n\n<p>那就是因为<code>extract.sh</code>文件用的换行符不对，把原来的换行符<code>CRLF</code>改成<code>LF</code>后保存就可以正常运行了</p>\n</div>   \n\n<p>   <img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg\" alt=\"bat-run\"></p>\n<p>   这样就说明提取成功，现在目录下会有<code>mipay-MIxxx.zip</code>,这就是一个卡刷包，通过twrp可以直接刷入</p>\n<ol start=\"5\">\n<li><p>运行<code>cleaner-fix.bat</code><br>生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。这个命令同时还会生成开启默认加密的刷机包。</p>\n</li>\n<li><p>对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，<code>extract.bat --appvault</code>可以生成这样的修复包，也就是替换成跟国内一样的信息助手</p>\n</li>\n</ol>\n<p>Finally，我们有了四个准备卡刷的包：<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg\" alt=\"目录截图2\">全扔进手机，一个一个刷就是了</p>\n<div class=\"note warning\"><p>如果刷机的时候遇到255错误</p>\n<p>简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的<code>CRLF</code>，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹<code>META-INF</code>一路点进去，最后看到了一个叫做<code>update-binary</code>的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了<code>CRLF</code>换行符导致错误的。用VScode打开转换成<code>LF</code>后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。</p>\n</div></div></div></div>\n\n<p>下面是安装小米应用商店，装了就可以用它来更新小米钱包，而不用每次想更新都去下载线刷包。</p>\n<p>下载地址：<a href=\"https://xiaomi-market.cn.uptodown.com/android\">https://xiaomi-market.cn.uptodown.com/android</a></p>\n<p>不知道为什么这个网站是被墙了的，开全局去下</p>\n<p>然后就可以安装了，一切都非常完美，可以一键装应用和更新</p>\n<p>最后，终于写完了这个教程，自我感觉是很详细了，希望可以帮到跟我一样在折腾miui的人。我刷这个系统的初衷是国内版变得越来越难用，最主要的表现是经常熄屏自己莫名震动，还经常自己亮屏，打开了看也没有什么通知，后来上网一搜发现我不是一个人，这是小米系统本身的问题，那些震动是真的有通知不过之前被我从通知栏禁止了，可能禁止的层面不对，等通知到达了震动了系统才把通知删掉，这不是折磨人么。我就找能不能刷类似CM的原版安卓，然后就在知乎上看到了miui欧洲版，感觉对安卓的底层不会改太多，就折腾用欧洲版来了。现在用了两个星期，确实好用，字体不好看还换了个字体，外观上和国内版差别也不大。就是每次升级系统不是很方便就是了，之后会想办法用持续集成完成自动的提取。</p>\n<blockquote>\n<p>2019-4-23更新：总结一下用miui-eu时更新系统步骤</p>\n<ol>\n<li><p>下载eu包：<a href=\"https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/\">https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/</a></p>\n</li>\n<li><p>下载国内相同版本包：<a href=\"http://www.miui.com/download.html\">http://www.miui.com/download.html</a></p>\n</li>\n<li><p>在<code>mipay-extract</code>文件夹中执行以下命令</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">./cleaner-fix.bat</span></span><br><span class=\"line\"><span class=\"string\">./extract.bat</span> <span class=\"params\">--appvault</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>生成的4个包加上下载下来的eu包拷贝进手机，重启进入twrp选择刷机包刷机</p>\n<p>可以批量选择刷机包，顺序是eu包在最前面，其他的在后面刷。</p>\n<blockquote>\n<p>我的<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">Release页面</a> ，如果你也是小米6就可以直接下载下来用</p>\n</blockquote>\n</li>\n</ol>\n</blockquote>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<div class=\"note info no-icon\"><p><a href=\"https://xiaomi.eu/community/forums/miui-rom-releases.103/\">miui.eu</a>，一个真正没有广告的系统，比国际版还要纯净</p>\n</div>\n\n<p>我一开始照着知乎<a href=\"https://www.zhihu.com/question/50231539\">这个教程</a>刷的，刷了后死活开不了机，也就是卡在了MI界面，后来在miui欧洲论坛找到了<a href=\"https://xiaomi.eu/community/threads/bootloop-problem-while-flashing-eu-stable.46593/\">这个</a>答案，完全符合我的情况，不能直接从国内版刷成欧洲版，要先刷个国际版，在国际版的基础上才能刷欧洲版。</p>\n<blockquote>\n<p>miui欧洲版自带人脸解锁，抬起亮屏，还有谷歌的Smart Lock，挺有意思。</p>\n</blockquote>","more":"<hr>\n<blockquote>\n<p>2020-02-20 更新:</p>\n<p>不再跟随官方miui的链接, 因为官方已经不再更新开发板的链接, 找了一个第三方列表: <a href=\"https://miuiver.com/sagit_developer_recovery/\">小米6 MIUI开发版下载索引 (卡刷包)</a>. 现在还是每周自动生成一次, 发布在这里👉<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">releases 页面</a>, 要注意自从9.8.15后面的版本我都没有自己测试过, 出了问题开机卡米什么的一般清data可以解决.</p>\n</blockquote>\n<blockquote>\n<p>2019-08-18 更新：</p>\n<p>现在已经半夜1点，我的小米6正在通过线刷刷国内版miui，起因是这次更新miui9.8.15版本后出了一点问题怎么也开不了机，具体的问题应该就是换行符的问题，我刚通过脚本自动获取链接的方式做到持续集成，可以全自动生成刷机包而不用每次改两个链接以及git commit,tag,push等，现在只要在持续集成那边开个定时，就可以每周自动出炉修复刷机包并且上传到GitHub的release页面，可惜我再也用不到了（大概），还需要的朋友记得在评论区告诉我，我会考虑加上其他机型或者出个持续集成的教程。</p>\n<p>链接在这里：<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">https://github.com/xiaoxx970/mipay-extract/releases</a></p>\n<p>现在已经开启了每周更新，不用我动就会保持最新版本的，用着miui欧洲版的同学每次更新前去这个页面下载一下就可以刷机了。 </p>\n</blockquote>\n<p>首先要说的是，要折腾，先备份。<br>如果你用了谷歌验证器，可以象我一样换成Authy，通过手机登录，不用担心换手机找不回来<br>微信可以通过Windows端备份聊天记录<br>相册短信便签什么的就交给小米云，差不多就这些</p>\n<p>其次要说的是，等下用到的所有提取出来的刷机包，在每一次更新系统后都会失效，你可以选择再次刷入。<br>特别地，关于支付安全，eu固件默认关闭了全盘强制加密（FBE）功能，这跟国内固件不一样，最直接的影响就是进入恢复模式不用解密，数据暴露在捡到你手机的人面前，所以我是选择刷入了开启加密的补丁包，同样的每一次更新系统就必须在更新后重新刷入<code>force-fbe</code>包，否则无法开机。</p>\n<h1 id=\"请选择你的选择↓\"><a href=\"#请选择你的选择↓\" class=\"headerlink\" title=\"请选择你的选择↓\"></a>请选择你的选择↓</h1><div class=\"tabs\" id=\"fbe\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a href=\"#fbe-1\">开启全盘加密</a></li><li class=\"tab\"><a href=\"#fbe-2\">不开启全盘加密</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"fbe-1\"><p>下面从第一步，你还是个国内miui系统开始</p>\n<h1 id=\"解锁bootloader\"><a href=\"#解锁bootloader\" class=\"headerlink\" title=\"解锁bootloader\"></a>解锁bootloader</h1><p>看这里👉 <a href=\"http://www.miui.com/unlock/index.html\">http://www.miui.com/unlock/index.html</a></p>\n<h1 id=\"刷入国际版ROM\"><a href=\"#刷入国际版ROM\" class=\"headerlink\" title=\"刷入国际版ROM\"></a>刷入国际版ROM</h1><div class=\"note info\"><p>根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试</p>\n</div>\n\n<p>欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了</p>\n<ul>\n<li>去下载线刷包：<a href=\"http://en.miui.com/download.html\">线刷包地址</a></li>\n<li>手机音量下+电源键开机，进入Fastboot模式</li>\n<li>下载小米的<a href=\"http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip\">通用刷机工具</a></li>\n<li>按照教程一步一步往下做</li>\n<li><strong>注意</strong>软件打开右下角不要选<code>全部删除并lock</code>，选择<code>全部删除</code>就可以了</li>\n<li>线刷具体教程：<a href=\"http://www.miui.com/shuaji-393.html\">http://www.miui.com/shuaji-393.html</a></li>\n</ul>\n<h1 id=\"不用开机，继续刷入twrp\"><a href=\"#不用开机，继续刷入twrp\" class=\"headerlink\" title=\"不用开机，继续刷入twrp\"></a>不用开机，继续刷入twrp</h1><p>怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。<br>如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。</p>\n<ol>\n<li><p><a href=\"https://twrp.me/Devices/\">twrp官方下载</a></p>\n<p> 选择你的机型对应下载下来</p>\n</li>\n<li><p>打开adb终端</p>\n<p> adb终端的位置在<code>\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android</code>里面，进入到<code>Android</code>文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd&#x2F;power shell窗口，就可以使用adb了。</p>\n</li>\n<li><p>终端输入命令</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash recovery twrp.img</span><br><span class=\"line\">fastboot boot twrp.img</span><br></pre></td></tr></table></figure>\n<p> <code>twrp.img</code> 是替换成你的twrp包的路径和名称。</p>\n<blockquote>\n<p>第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。</p>\n</blockquote>\n</li>\n</ol>\n<h1 id=\"进入twrp，刷eu固件\"><a href=\"#进入twrp，刷eu固件\" class=\"headerlink\" title=\"进入twrp，刷eu固件\"></a>进入twrp，刷eu固件</h1><ol>\n<li><p>去下载miui欧洲版：<a href=\"https://xiaomi.eu/community/link-forums/roms-download.73/\">miui欧洲版发布页面</a></p>\n</li>\n<li><p>格式化data分区</p>\n</li>\n<li><p>连接电脑，把eu固件拷入sdcard目录</p>\n<p>手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP</p>\n</li>\n<li><p>选择eu包刷机</p>\n<div class=\"note primary\"><p>因为你选了要开启全盘加密</p></li>\n</ol>\n<p>   刷到这里的时候手机先放一边, 刷完不要开机, 下面操作电脑弄出修复包一起刷了以后再开机</p>\n</div>\n\n<h1 id=\"提取加密包以及mipay\"><a href=\"#提取加密包以及mipay\" class=\"headerlink\" title=\"提取加密包以及mipay\"></a>提取加密包以及mipay</h1><blockquote>\n<p>要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：<a href=\"https://www.yipkwong.com/2018/06/06/167/\">MIUI国际版mi pay解决方案</a>，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。</p>\n</blockquote>\n<p>使用：<a href=\"https://github.com/linusyang92/mipay-extract\">Mi Pay Extractor</a>，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。</p>\n<ol>\n<li><p>下载zip包: <a href=\"https://github.com/linusyang92/mipay-extract/archive/master.zip\">repo的下载链接</a></p>\n<p>linux用户可以clone</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/linusyang92/mipay-extract.git</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载国内的miui最新卡刷包，放入同一目录</p>\n</li>\n<li><p>miui欧洲版卡刷包，也放在同一目录</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg\" alt=\"目录截图\"></p>\n</li>\n<li><p>运行<code>extract.bat</code>(双击)</p>\n<p>会生成一个卡刷包<code>mipay-MIxxx.zip</code></p>\n<div class=\"note default\"><p>如果出现下面这样的错误：</p></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract.sh: line 2: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 3: <span class=\"built_in\">cd</span>: $<span class=\"string\">&#x27;.\\r&#x27;</span>: No such file or directory</span><br><span class=\"line\">extract.sh: line 4: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 6: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 18: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 19: syntax error near unexpected token `$<span class=\"string\">&#x27;&#123;\\r&#x27;</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span>xtract.sh: line 19: `<span class=\"function\"><span class=\"title\">exists</span></span>() &#123;</span><br><span class=\"line\">请按任意键继续. . .</span><br></pre></td></tr></table></figure>\n\n<p>那就是因为<code>extract.sh</code>文件用的换行符不对，把原来的换行符<code>CRLF</code>改成<code>LF</code>后保存就可以正常运行了</p>\n</div>\n\n<p>   Windows下双击<code>extract.bat</code>就可以开始提取，会要几分钟时间。<br>   <img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg\" alt=\"bat-run\">这样就说明提取成功，现在目录下会有<code>mipay-MIxxx.zip</code>,这就是一个卡刷包，通过twrp可以直接刷入</p>\n<ol start=\"5\">\n<li><p>运行<code>cleaner-fix.bat</code>(双击)</p>\n <div class=\"note primary\"><p>这里就是生成开启默认加密的刷机包 <code>force-fbe</code></p></li>\n</ol>\n</div>\n\n<pre><code>还可以生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。\n</code></pre>\n<ol start=\"6\">\n<li>对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，在cmd运行<code>extract.bat --appvault</code>可以生成这样的修复包，也就是替换成跟国内一样的信息助手</li>\n</ol>\n<p>Finally，我们有了四个准备卡刷的包：<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg\" alt=\"目录截图2\">全部还是通过MTP放进手机，一个一个刷就是了</p>\n<div class=\"note warning\"><p>如果刷机的时候遇到255错误</p>\n<p>简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的<code>CRLF</code>，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹<code>META-INF</code>一路点进去，最后看到了一个叫做<code>update-binary</code>的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了<code>CRLF</code>换行符导致错误的。用VScode打开转换成<code>LF</code>后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。</p>\n</div>\n\n<h1 id=\"完成-开机\"><a href=\"#完成-开机\" class=\"headerlink\" title=\"完成, 开机\"></a>完成, 开机</h1><p>刷好后就可以开机</p>\n<p>选择语言，连WiFi，登账号<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg\"></p>\n<p>这时候如果进设置就会看到手机已加密</p>\n<blockquote>\n<p>是用来看的, 要是看到没加密不能在这里选开启加密, 不然会出问题</p>\n<p>(如果有人试了不刷加密包来到这里可以开启加密记得告诉我)</p>\n</blockquote>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen.png\"></p>\n<p>好了这样就完事了, 可以继续看下面, 下个国产的应用商店</p></div><div class=\"tab-pane\" id=\"fbe-2\"><p>下面从第一步，你还是个国内miui系统开始</p>\n<h1 id=\"解锁bootloader\"><a href=\"#解锁bootloader\" class=\"headerlink\" title=\"解锁bootloader\"></a>解锁bootloader</h1><p>看这里👉 <a href=\"http://www.miui.com/unlock/index.html\">http://www.miui.com/unlock/index.html</a></p>\n<h1 id=\"刷入国际版ROM\"><a href=\"#刷入国际版ROM\" class=\"headerlink\" title=\"刷入国际版ROM\"></a>刷入国际版ROM</h1><div class=\"note info\"><p>根据评论，可以直接刷欧洲版，只要刷完欧洲版，清理一下缓存就行了，所以这步可跳过试试</p>\n</div>\n\n<p>欧洲版和国内版系统分区不一样（我猜的），直接卡刷欧洲版我试过没法开机（可能还是因为FBE的缘故？），反正为了保证成功就先刷国际版ROM，顺便把系统和数据也清了</p>\n<ul>\n<li>去下载线刷包：<a href=\"http://en.miui.com/download.html\">线刷包地址</a></li>\n<li>手机音量下+电源键开机，进入Fastboot模式</li>\n<li>下载小米的<a href=\"http://bigota.d.miui.com/tools/MiFlash2018-5-28-0.zip\">通用刷机工具</a></li>\n<li>按照教程一步一步往下做</li>\n<li><strong>注意</strong>软件打开右下角不要选<code>全部删除并lock</code>，选择<code>全部删除</code>就可以了</li>\n<li>线刷具体教程：<a href=\"http://www.miui.com/shuaji-393.html\">http://www.miui.com/shuaji-393.html</a></li>\n</ul>\n<h1 id=\"不用开机，继续刷入twrp\"><a href=\"#不用开机，继续刷入twrp\" class=\"headerlink\" title=\"不用开机，继续刷入twrp\"></a>不用开机，继续刷入twrp</h1><p>怎么做到的呢，就是线刷软件提示刷入成功，手机重启的时候，还是按住音量下+电源键开机，进入Fastboot模式，通过ADB(刚才下载的通用刷机工具里有)终端命令来刷入。<br>如果还是不小心开机了没关系，等下刷系统的时候在twrp里面双清一下就可以了。</p>\n<ol>\n<li><p><a href=\"https://twrp.me/Devices/\">twrp官方下载</a></p>\n<p> 选择你的机型对应下载下来</p>\n</li>\n<li><p>打开adb终端</p>\n<p> adb终端的位置在<code>\\MiFlash2018-5-28-0\\Source\\ThirdParty\\Google\\Android</code>里面，进入到<code>Android</code>文件夹，鼠标在空白的地方按住Shift以后右键，选择在此处打开cmd&#x2F;power shell窗口，就可以使用adb了。</p>\n</li>\n<li><p>终端输入命令</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash recovery twrp.img</span><br><span class=\"line\">fastboot boot twrp.img</span><br></pre></td></tr></table></figure>\n<p> <code>twrp.img</code> 是替换成你的twrp包的路径和名称。</p>\n<blockquote>\n<p>第二条命令执行完后手机就会自己重启到twrp界面，可以设置成中文。</p>\n</blockquote>\n</li>\n</ol>\n<h1 id=\"进入twrp，刷eu固件\"><a href=\"#进入twrp，刷eu固件\" class=\"headerlink\" title=\"进入twrp，刷eu固件\"></a>进入twrp，刷eu固件</h1><ol>\n<li><p>去下载miui欧洲版：<a href=\"https://xiaomi.eu/community/link-forums/roms-download.73/\">miui欧洲版发布页面</a></p>\n</li>\n<li><p>连接电脑，把eu固件拷入sdcard目录<br>手机在twrp界面，电脑上应该能看到手机，不能的话在手机点挂载，然后点开启MTP</p>\n</li>\n<li><p>从手机上点刷机，选择刷机包，完成，开机。</p>\n</li>\n</ol>\n<p>到这里已经完成miui欧洲版刷机了，选择语言，连WiFi，登账号<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/screen1.jpg\">这是开机后的桌面<br>miui欧洲版阉割了很多比如小米钱包，里面的卡模拟的功能我用得到，包括公交卡什么的，所以接下来折腾如何装回这个应用</p>\n<h1 id=\"提取Mipay安装包以及本土化修复包\"><a href=\"#提取Mipay安装包以及本土化修复包\" class=\"headerlink\" title=\"提取Mipay安装包以及本土化修复包\"></a>提取Mipay安装包以及本土化修复包</h1><blockquote>\n<p>要从中国版固件的system.img里面提取软件包，还要通过Root权限把软件包写入System分区，这里有一个教程：<a href=\"https://www.yipkwong.com/2018/06/06/167/\">MIUI国际版mi pay解决方案</a>，里面叙述了详细经过，但是我没用这个方法，虽然尝试过但是卡在了挂载镜像那一步。</p>\n</blockquote>\n<p>使用：<a href=\"https://github.com/linusyang92/mipay-extract\">Mi Pay Extractor</a>，是一个提取脚本，可以自动提取出卡刷包中的MiPay软件和日历、天气等。</p>\n<ol>\n<li><p>下载zip包: <a href=\"https://github.com/linusyang92/mipay-extract/archive/master.zip\">repo的下载链接</a></p>\n<p>linux用户可以clone</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/linusyang92/mipay-extract.git</span><br></pre></td></tr></table></figure>\n\n</li>\n<li><p>下载国内的miui最新卡刷包，放入同一目录</p>\n</li>\n<li><p>miui欧洲版卡刷包，也放在同一目录</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/git-clone.jpg\" alt=\"目录截图\"></p>\n</li>\n<li><p>运行<code>extract.bat</code>(双击)</p>\n<p>可以生成加密包和一个修复包</p>\n<div class=\"note default\"><p>如果出现下面这样的错误：</p></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract.sh: line 2: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 3: <span class=\"built_in\">cd</span>: $<span class=\"string\">&#x27;.\\r&#x27;</span>: No such file or directory</span><br><span class=\"line\">extract.sh: line 4: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 6: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 18: $<span class=\"string\">&#x27;\\r&#x27;</span>: <span class=\"built_in\">command</span> not found</span><br><span class=\"line\">extract.sh: line 19: syntax error near unexpected token `$<span class=\"string\">&#x27;&#123;\\r&#x27;</span><span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span>xtract.sh: line 19: `<span class=\"function\"><span class=\"title\">exists</span></span>() &#123;</span><br><span class=\"line\">请按任意键继续. . .</span><br></pre></td></tr></table></figure>\n\n<p>那就是因为<code>extract.sh</code>文件用的换行符不对，把原来的换行符<code>CRLF</code>改成<code>LF</code>后保存就可以正常运行了</p>\n</div>   \n\n<p>   <img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/bat-run.jpg\" alt=\"bat-run\"></p>\n<p>   这样就说明提取成功，现在目录下会有<code>mipay-MIxxx.zip</code>,这就是一个卡刷包，通过twrp可以直接刷入</p>\n<ol start=\"5\">\n<li><p>运行<code>cleaner-fix.bat</code><br>生成修复日历和天气的刷机包，具体说就是让日历显示农历，天气app换回国内的。这个命令同时还会生成开启默认加密的刷机包。</p>\n</li>\n<li><p>对于想在负一屏还能用微信支付宝扫码快捷键的，以及查快递，<code>extract.bat --appvault</code>可以生成这样的修复包，也就是替换成跟国内一样的信息助手</p>\n</li>\n</ol>\n<p>Finally，我们有了四个准备卡刷的包：<br><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/blog-img/miui-eu/mipay-extract.jpg\" alt=\"目录截图2\">全扔进手机，一个一个刷就是了</p>\n<div class=\"note warning\"><p>如果刷机的时候遇到255错误</p>\n<p>简单来说就是以上这四个包，没一个能刷成功的，网上搜255错误，原因很多，没有一个能解决我的问题的，于是我慢慢想起了前面提到的<code>CRLF</code>，说不定又是这个东西在捣鬼。打开zip包，第一个文件夹<code>META-INF</code>一路点进去，最后看到了一个叫做<code>update-binary</code>的文件，这个文件类似于脚本，在刷机的时候执行的，和其他能刷成功的一对比发现确实是因为用了<code>CRLF</code>换行符导致错误的。用VScode打开转换成<code>LF</code>后保存，更新压缩包，这次就没有任何毛病了,在twrp下开启MTP把刷机包存到手机，可以全部成功刷入。</p>\n</div></div></div></div>\n\n<p>下面是安装小米应用商店，装了就可以用它来更新小米钱包，而不用每次想更新都去下载线刷包。</p>\n<p>下载地址：<a href=\"https://xiaomi-market.cn.uptodown.com/android\">https://xiaomi-market.cn.uptodown.com/android</a></p>\n<p>不知道为什么这个网站是被墙了的，开全局去下</p>\n<p>然后就可以安装了，一切都非常完美，可以一键装应用和更新</p>\n<p>最后，终于写完了这个教程，自我感觉是很详细了，希望可以帮到跟我一样在折腾miui的人。我刷这个系统的初衷是国内版变得越来越难用，最主要的表现是经常熄屏自己莫名震动，还经常自己亮屏，打开了看也没有什么通知，后来上网一搜发现我不是一个人，这是小米系统本身的问题，那些震动是真的有通知不过之前被我从通知栏禁止了，可能禁止的层面不对，等通知到达了震动了系统才把通知删掉，这不是折磨人么。我就找能不能刷类似CM的原版安卓，然后就在知乎上看到了miui欧洲版，感觉对安卓的底层不会改太多，就折腾用欧洲版来了。现在用了两个星期，确实好用，字体不好看还换了个字体，外观上和国内版差别也不大。就是每次升级系统不是很方便就是了，之后会想办法用持续集成完成自动的提取。</p>\n<blockquote>\n<p>2019-4-23更新：总结一下用miui-eu时更新系统步骤</p>\n<ol>\n<li><p>下载eu包：<a href=\"https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/\">https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-WEEKLY-RELEASES/</a></p>\n</li>\n<li><p>下载国内相同版本包：<a href=\"http://www.miui.com/download.html\">http://www.miui.com/download.html</a></p>\n</li>\n<li><p>在<code>mipay-extract</code>文件夹中执行以下命令</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">./cleaner-fix.bat</span></span><br><span class=\"line\"><span class=\"string\">./extract.bat</span> <span class=\"params\">--appvault</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>生成的4个包加上下载下来的eu包拷贝进手机，重启进入twrp选择刷机包刷机</p>\n<p>可以批量选择刷机包，顺序是eu包在最前面，其他的在后面刷。</p>\n<blockquote>\n<p>我的<a href=\"https://github.com/xiaoxx970/mipay-extract/releases\">Release页面</a> ，如果你也是小米6就可以直接下载下来用</p>\n</blockquote>\n</li>\n</ol>\n</blockquote>"},{"title":"装了armbian的Orange pi折腾记录(外接HDMI屏幕分辨率调节及屏幕旋转)","date":"2018-10-08T15:26:00.000Z","_content":"\n* ### Armbian orange pi 调节分辨率\n\n    ```bash\n    h3disp -m 1080p60 -c 1\n    ```\n\n* ### 动态开启/关闭HDMI输出\n    ```bash\n    sudo su\n    cd /sys/kernel/debug/dispdbg/\n    echo \"switch\" > command\n    echo \"disp\" > name\n    echo \"0 10\" > param\n    echo \"1\" > start\n    ```\n    把parm部分的0改成4就是打开HDMI输出，第二个数字10代表输出分辨率为1080p60，换成5则代表720p60。\n<!--more-->\n    全部模式列表：\n    ```bash\n    0 480i\n    1 576i\n    2 480p\n    3 576p\n    4 720p 50Hz\n    5 720p 60Hz\n    6 1080i 50 Hz\n    7 1080i 60 Hz\n    8 1080p 24 Hz\n    9 1080p 50 Hz\n    10 1080p 60 Hz\n    ```\n    各种详细设置:[Fine-Tuning](https://docs.armbian.com/User-Guide_Fine-Tuning/)\n\n* ### 屏幕旋转\n    编辑配置文件：\n    ```bash\n    sudo nano /etc/X11/xorg.conf.d/01-armbian-defaults.conf\n    ```\n    在末尾加入下面的代码:\n    ```bash\n    # Append\n    Section \"Device\"\n    Identifier \"default\"\n    Driver \"fbdev\"\n    Option \"Rotate\" \"CCW\"\n    EndSection\n    ```\n    保存后重启，重启后屏幕就旋转成竖的了。 你可以通过改变``CCW``到``CW``来改变旋转方向。\n___\n\n* ### python log用法\n    ```py\n    import logging\n    logging.basicConfig(filename='/root/screen.log', level=logging.INFO, format='%(asctime)s %(message)s', datefmt='[%Y-%m-%d %I:%M:%S %p]')\n    logging.info('hi')\n    ```\n    输出(文件：screen.log)：\n    ``[2018-10-08 09:36:36 PM] hi``\n    其他用法还有：\n    ```py\n    logging.debug(\"debug\") \n    logging.info(\"info\") \n    logging.warning(\"warning\") \n    logging.error(\"error\")\n    logging.critical(\"critical\")\n    ```\n    参照：https://docs.python.org/2/howto/logging.html\n\n    进程管理工具Supervisor:[管理Python](https://www.restran.net/2015/10/04/supervisord-tutorial/)\n\n> 习得以上知识所用的时间：230分钟","source":"_posts/orangepi折腾记录.md","raw":"---\ntitle: 装了armbian的Orange pi折腾记录(外接HDMI屏幕分辨率调节及屏幕旋转)\ndate: 2018-10-8 23:26:00\ntags: 各种Pi\n---\n\n* ### Armbian orange pi 调节分辨率\n\n    ```bash\n    h3disp -m 1080p60 -c 1\n    ```\n\n* ### 动态开启/关闭HDMI输出\n    ```bash\n    sudo su\n    cd /sys/kernel/debug/dispdbg/\n    echo \"switch\" > command\n    echo \"disp\" > name\n    echo \"0 10\" > param\n    echo \"1\" > start\n    ```\n    把parm部分的0改成4就是打开HDMI输出，第二个数字10代表输出分辨率为1080p60，换成5则代表720p60。\n<!--more-->\n    全部模式列表：\n    ```bash\n    0 480i\n    1 576i\n    2 480p\n    3 576p\n    4 720p 50Hz\n    5 720p 60Hz\n    6 1080i 50 Hz\n    7 1080i 60 Hz\n    8 1080p 24 Hz\n    9 1080p 50 Hz\n    10 1080p 60 Hz\n    ```\n    各种详细设置:[Fine-Tuning](https://docs.armbian.com/User-Guide_Fine-Tuning/)\n\n* ### 屏幕旋转\n    编辑配置文件：\n    ```bash\n    sudo nano /etc/X11/xorg.conf.d/01-armbian-defaults.conf\n    ```\n    在末尾加入下面的代码:\n    ```bash\n    # Append\n    Section \"Device\"\n    Identifier \"default\"\n    Driver \"fbdev\"\n    Option \"Rotate\" \"CCW\"\n    EndSection\n    ```\n    保存后重启，重启后屏幕就旋转成竖的了。 你可以通过改变``CCW``到``CW``来改变旋转方向。\n___\n\n* ### python log用法\n    ```py\n    import logging\n    logging.basicConfig(filename='/root/screen.log', level=logging.INFO, format='%(asctime)s %(message)s', datefmt='[%Y-%m-%d %I:%M:%S %p]')\n    logging.info('hi')\n    ```\n    输出(文件：screen.log)：\n    ``[2018-10-08 09:36:36 PM] hi``\n    其他用法还有：\n    ```py\n    logging.debug(\"debug\") \n    logging.info(\"info\") \n    logging.warning(\"warning\") \n    logging.error(\"error\")\n    logging.critical(\"critical\")\n    ```\n    参照：https://docs.python.org/2/howto/logging.html\n\n    进程管理工具Supervisor:[管理Python](https://www.restran.net/2015/10/04/supervisord-tutorial/)\n\n> 习得以上知识所用的时间：230分钟","slug":"orangepi折腾记录","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn3000e6z0h7zwqb05f","content":"<ul>\n<li><h3 id=\"Armbian-orange-pi-调节分辨率\"><a href=\"#Armbian-orange-pi-调节分辨率\" class=\"headerlink\" title=\"Armbian orange pi 调节分辨率\"></a>Armbian orange pi 调节分辨率</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h3disp -m 1080p60 -c 1</span><br></pre></td></tr></table></figure>\n</li>\n<li><h3 id=\"动态开启-x2F-关闭HDMI输出\"><a href=\"#动态开启-x2F-关闭HDMI输出\" class=\"headerlink\" title=\"动态开启&#x2F;关闭HDMI输出\"></a>动态开启&#x2F;关闭HDMI输出</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo su</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /sys/kernel/debug/dispdbg/</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;switch&quot;</span> &gt; <span class=\"built_in\">command</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;disp&quot;</span> &gt; name</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;0 10&quot;</span> &gt; param</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;1&quot;</span> &gt; start</span><br></pre></td></tr></table></figure>\n<p>  把parm部分的0改成4就是打开HDMI输出，第二个数字10代表输出分辨率为1080p60，换成5则代表720p60。</p>\n<span id=\"more\"></span>\n<p>  全部模式列表：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 480i</span><br><span class=\"line\">1 576i</span><br><span class=\"line\">2 480p</span><br><span class=\"line\">3 576p</span><br><span class=\"line\">4 720p 50Hz</span><br><span class=\"line\">5 720p 60Hz</span><br><span class=\"line\">6 1080i 50 Hz</span><br><span class=\"line\">7 1080i 60 Hz</span><br><span class=\"line\">8 1080p 24 Hz</span><br><span class=\"line\">9 1080p 50 Hz</span><br><span class=\"line\">10 1080p 60 Hz</span><br></pre></td></tr></table></figure>\n<p>  各种详细设置:<a href=\"https://docs.armbian.com/User-Guide_Fine-Tuning/\">Fine-Tuning</a></p>\n</li>\n<li><h3 id=\"屏幕旋转\"><a href=\"#屏幕旋转\" class=\"headerlink\" title=\"屏幕旋转\"></a>屏幕旋转</h3><p>  编辑配置文件：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/X11/xorg.conf.d/01-armbian-defaults.conf</span><br></pre></td></tr></table></figure>\n<p>  在末尾加入下面的代码:</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Append</span></span><br><span class=\"line\">Section <span class=\"string\">&quot;Device&quot;</span></span><br><span class=\"line\">Identifier <span class=\"string\">&quot;default&quot;</span></span><br><span class=\"line\">Driver <span class=\"string\">&quot;fbdev&quot;</span></span><br><span class=\"line\">Option <span class=\"string\">&quot;Rotate&quot;</span> <span class=\"string\">&quot;CCW&quot;</span></span><br><span class=\"line\">EndSection</span><br></pre></td></tr></table></figure>\n<p>  保存后重启，重启后屏幕就旋转成竖的了。 你可以通过改变<code>CCW</code>到<code>CW</code>来改变旋转方向。</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li><h3 id=\"python-log用法\"><a href=\"#python-log用法\" class=\"headerlink\" title=\"python log用法\"></a>python log用法</h3>  <figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(filename=<span class=\"string\">&#x27;/root/screen.log&#x27;</span>, level=logging.INFO, <span class=\"built_in\">format</span>=<span class=\"string\">&#x27;%(asctime)s %(message)s&#x27;</span>, datefmt=<span class=\"string\">&#x27;[%Y-%m-%d %I:%M:%S %p]&#x27;</span>)</span><br><span class=\"line\">logging.info(<span class=\"string\">&#x27;hi&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>  输出(文件：screen.log)：<br>  <code>[2018-10-08 09:36:36 PM] hi</code><br>  其他用法还有：</p>\n  <figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">logging.debug(<span class=\"string\">&quot;debug&quot;</span>) </span><br><span class=\"line\">logging.info(<span class=\"string\">&quot;info&quot;</span>) </span><br><span class=\"line\">logging.warning(<span class=\"string\">&quot;warning&quot;</span>) </span><br><span class=\"line\">logging.error(<span class=\"string\">&quot;error&quot;</span>)</span><br><span class=\"line\">logging.critical(<span class=\"string\">&quot;critical&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>  参照：<a href=\"https://docs.python.org/2/howto/logging.html\">https://docs.python.org/2/howto/logging.html</a></p>\n<p>  进程管理工具Supervisor:<a href=\"https://www.restran.net/2015/10/04/supervisord-tutorial/\">管理Python</a></p>\n</li>\n</ul>\n<blockquote>\n<p>习得以上知识所用的时间：230分钟</p>\n</blockquote>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<ul>\n<li><h3 id=\"Armbian-orange-pi-调节分辨率\"><a href=\"#Armbian-orange-pi-调节分辨率\" class=\"headerlink\" title=\"Armbian orange pi 调节分辨率\"></a>Armbian orange pi 调节分辨率</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h3disp -m 1080p60 -c 1</span><br></pre></td></tr></table></figure>\n</li>\n<li><h3 id=\"动态开启-x2F-关闭HDMI输出\"><a href=\"#动态开启-x2F-关闭HDMI输出\" class=\"headerlink\" title=\"动态开启&#x2F;关闭HDMI输出\"></a>动态开启&#x2F;关闭HDMI输出</h3>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo su</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /sys/kernel/debug/dispdbg/</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;switch&quot;</span> &gt; <span class=\"built_in\">command</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;disp&quot;</span> &gt; name</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;0 10&quot;</span> &gt; param</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;1&quot;</span> &gt; start</span><br></pre></td></tr></table></figure>\n<p>  把parm部分的0改成4就是打开HDMI输出，第二个数字10代表输出分辨率为1080p60，换成5则代表720p60。</p>","more":"<p>  全部模式列表：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 480i</span><br><span class=\"line\">1 576i</span><br><span class=\"line\">2 480p</span><br><span class=\"line\">3 576p</span><br><span class=\"line\">4 720p 50Hz</span><br><span class=\"line\">5 720p 60Hz</span><br><span class=\"line\">6 1080i 50 Hz</span><br><span class=\"line\">7 1080i 60 Hz</span><br><span class=\"line\">8 1080p 24 Hz</span><br><span class=\"line\">9 1080p 50 Hz</span><br><span class=\"line\">10 1080p 60 Hz</span><br></pre></td></tr></table></figure>\n<p>  各种详细设置:<a href=\"https://docs.armbian.com/User-Guide_Fine-Tuning/\">Fine-Tuning</a></p>\n</li>\n<li><h3 id=\"屏幕旋转\"><a href=\"#屏幕旋转\" class=\"headerlink\" title=\"屏幕旋转\"></a>屏幕旋转</h3><p>  编辑配置文件：</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/X11/xorg.conf.d/01-armbian-defaults.conf</span><br></pre></td></tr></table></figure>\n<p>  在末尾加入下面的代码:</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Append</span></span><br><span class=\"line\">Section <span class=\"string\">&quot;Device&quot;</span></span><br><span class=\"line\">Identifier <span class=\"string\">&quot;default&quot;</span></span><br><span class=\"line\">Driver <span class=\"string\">&quot;fbdev&quot;</span></span><br><span class=\"line\">Option <span class=\"string\">&quot;Rotate&quot;</span> <span class=\"string\">&quot;CCW&quot;</span></span><br><span class=\"line\">EndSection</span><br></pre></td></tr></table></figure>\n<p>  保存后重启，重启后屏幕就旋转成竖的了。 你可以通过改变<code>CCW</code>到<code>CW</code>来改变旋转方向。</p>\n</li>\n</ul>\n<hr>\n<ul>\n<li><h3 id=\"python-log用法\"><a href=\"#python-log用法\" class=\"headerlink\" title=\"python log用法\"></a>python log用法</h3>  <figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(filename=<span class=\"string\">&#x27;/root/screen.log&#x27;</span>, level=logging.INFO, <span class=\"built_in\">format</span>=<span class=\"string\">&#x27;%(asctime)s %(message)s&#x27;</span>, datefmt=<span class=\"string\">&#x27;[%Y-%m-%d %I:%M:%S %p]&#x27;</span>)</span><br><span class=\"line\">logging.info(<span class=\"string\">&#x27;hi&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>  输出(文件：screen.log)：<br>  <code>[2018-10-08 09:36:36 PM] hi</code><br>  其他用法还有：</p>\n  <figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">logging.debug(<span class=\"string\">&quot;debug&quot;</span>) </span><br><span class=\"line\">logging.info(<span class=\"string\">&quot;info&quot;</span>) </span><br><span class=\"line\">logging.warning(<span class=\"string\">&quot;warning&quot;</span>) </span><br><span class=\"line\">logging.error(<span class=\"string\">&quot;error&quot;</span>)</span><br><span class=\"line\">logging.critical(<span class=\"string\">&quot;critical&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>  参照：<a href=\"https://docs.python.org/2/howto/logging.html\">https://docs.python.org/2/howto/logging.html</a></p>\n<p>  进程管理工具Supervisor:<a href=\"https://www.restran.net/2015/10/04/supervisord-tutorial/\">管理Python</a></p>\n</li>\n</ul>\n<blockquote>\n<p>习得以上知识所用的时间：230分钟</p>\n</blockquote>"},{"title":"树莓派：samba文件共享、frp内网穿透、lighttpd、aria2c下载器（AriaNg前端）安装教程","date":"2018-03-11T17:08:00.000Z","_content":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近拿到了一个树莓派3B，想要做成NAS以及下载机，我这个人平时喜欢看美剧，每次下载都要先开电脑打开浏览器找资源迅雷下载，有时候用手机找到资源了还是得开电脑，毕竟手机不适合用来下BT，于是有了这个想法，一开始还装了[Nextcloud的树莓派版](https://ownyourbits.com/nextcloudpi/)(需要的童鞋可以进去看（需翻墙）)（2018-12-20更新：现在看官网把这个部分已经做的很完善了，占用可能也不高了），网盘下载前端倒是什么都有了，就是觉着太臃肿，web服务器用的居然还是apache，占用可想而知，到后来每次链接ssh都要接近半分钟，运行一个python脚本更是要到一分钟，那就是几行的脚本啊。后来想nextcloud其实没什么用，我只要能下载和共享文件就可以了。  \n<!--more-->\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;于是就有了这个教程，我打算用lighttpd作web服务器，上面放hexo博客（毕竟有了frp）和[aria2c前端](http://ariang.mayswind.net/zh_Hans/)，通过frp连接到我的阿里云主机，那里有公网IP，这样一来我可以在任何地方访问我的树莓派叫它下美剧，真是很幸福的一件事。  \n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;废话不多说，下面开始教程，我用的系统是raspbian-stretch-lite，最少占用嘛，桌面也是不需要的。  \n\n# **第一部分：samba文件共享**\n\n* ## 挂载硬盘  \n\n查看设备列表：\n\n```bash\nsudo fdisk -l\n```\n\n这时候会列出所有挂载的设备（告诉我你已经插上硬盘了）然后找到硬盘的标识，一般是/dev/sda1，然后记下来  \n挂载硬盘：\n\n```bash\nsudo mount /dev/sda1 /media\n```\n\n查看现有磁盘信息，看是否挂载成功:\n\n```bash\ndf -T\n```\n\n* ## 更换软件安装源到国内  \n\n少数情况后面的安装会出现apt-get install安装失败，这个时候就需要把安装源替换成国内源，速度也会更快  \n\n备份原列表\n\n```bash\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak\n```\n\n编辑文件：\n\n```bash\nsudo sed -i 's#://raspbian.raspberrypi.org#s://mirrors.tuna.tsinghua.edu.cn/raspbian#g' /etc/apt/sources.list\nsudo sed -i 's#://archive.raspberrypi.org/debian#s://mirrors.tuna.tsinghua.edu.cn/raspberrypi#g' /etc/apt/sources.list.d/raspi.list\n```\n\n然后执行更新让更改生效:\n\n```bash\nsudo apt-get update\n```\n\n* ## samba安装及配置\n\n根据需要修改下面配置文件  \n[MyNAS]是电脑上可以看到的名称  \n共享路径是挂载硬盘的路径所以我用的是/media  \n其他可以不用管  \n全部复制到终端即可：  \n（我用了echo命令来写配置文件，当然用nano、vim、vi都是可以的，看各位喜欢）\n\n```bash\nsudo apt-get install samba -y #安装samba\nsudo echo \"\n    # 分享名称\n    [MyNAS]\n    # 说明信息\n    comment = NAS Storage\n    # 可以访问的用户\n    valid users = pi,root\n    # 共享文件的路径。\n    path = /media\n    # 可被其他人看到资源名称（非内容）\n    browseable = yes\n    # 可写\n    writable = yes\n    # 新建文件的权限为 664\n    create mask = 0664\n    # 新建目录的权限为 775\n    directory mask = 0775\n\"  >> /etc/samba/smb.conf\n\n```\n\n测试配置文件是否有错误，根据提示做相应修改：\n\n```bash\ntestparm\n```\n添加登陆账户并创建密码，必须是 linux 已存在的用户，密码不一定要和系统一样，只是登录samba用的。\n\n```bash\nsudo smbpasswd -a pi\n```\n\n输入两次密码  \n\n重载 samba 服务：\n\n```bash\nsudo service samba reload\n```\n\n让samba开机启动：\n\n```bash\nsudo update-rc.d samba defaults\n```\n\n# **第二部分：aria2下载器**\n\n* ## aria2配置及安装\n\n安装aria2\n\n```bash\nsudo apt-get install aria2 -y\n```\n\n创建 session 和配置文件：\n\n```bash\nmkdir ~/.aria2\ntouch ~/.aria2/aria2.session\ntouch ~/.aria2/aria2.conf\n```\n\n写入配置文件aria2.conf,注意如果用户名不是pi的话需要改下面的对应文件路径：\n\n```bash\necho \"\n\n## 文件保存相关 ##\n\n# 文件保存目录\ndir=/media/Download\n# 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M\ndisk-cache=32M\n# 断点续传\ncontinue=true\n\n# 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc\n# 预分配所需时间: none < falloc ? trunc < prealloc\n# falloc和trunc则需要文件系统和内核支持\n# NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项\n#file-allocation=falloc\n\n## 下载连接相关 ##\n\n# 最大同时下载任务数, 运行时可修改, 默认:5\n#max-concurrent-downloads=5\n# 同一服务器连接数, 添加时可指定, 默认:1\nmax-connection-per-server=15\n# 整体下载速度限制, 运行时可修改, 默认:0（不限制）\n#max-overall-download-limit=0\n# 单个任务下载速度限制, 默认:0（不限制）\n#max-download-limit=0\n# 整体上传速度限制, 运行时可修改, 默认:0（不限制）\n#max-overall-upload-limit=0\n# 单个任务上传速度限制, 默认:0（不限制）\n#max-upload-limit=0\n# 禁用IPv6, 默认:false\ndisable-ipv6=true\n\n# 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M\n# 假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载\nmin-split-size=10M\n# 单个任务最大线程数, 添加时可指定, 默认:5\nsplit=10\n\n## 进度保存相关 ##\n\n# 从会话文件中读取下载任务\ninput-file=/home/pi/.aria2/aria2.session\n# 在Aria2退出时保存错误的、未完成的下载任务到会话文件\nsave-session=/home/pi/.aria2/aria2.session\n# 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0\nsave-session-interval=60\n\n## RPC相关设置 ##\n\n# 启用RPC, 默认:false\nenable-rpc=true\n# 允许所有来源, 默认:false\nrpc-allow-origin-all=true\n# 允许外部访问, 默认:false\nrpc-listen-all=true\n# RPC端口, 仅当默认端口被占用时修改\n# rpc-listen-port=6800\n# 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项\n#rpc-secret=<TOKEN>\n\n## BT/PT下载相关 ##\n\n# 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true\n#follow-torrent=true\n# 客户端伪装, PT需要\npeer-id-prefix=-TR2770-\nuser-agent=Transmission/2.77\n# 强制保存会话, 即使任务已经完成, 默认:false\n# 较新的版本开启后会在任务完成后依然保留.aria2文件\n#force-save=false\n# 继续之前的BT任务时, 无需再次校验, 默认:false\nbt-seed-unverified=true\n# 保存磁力链接元数据为种子文件(.torrent文件), 默认:false\nbt-save-metadata=true\n\" >> ~/.aria2/aria2.conf\n```\n\n然后执行：\n\n```bash\naria2c --conf-path=/home/pi/.aria2/aria2.conf -D\n```\n\n没有任何提示则表示成功，Ctrl+C退出。  \n接下来作为服务添加开机自启，注意路径是否正确：\n\n```bash\nsudo tee /etc/init.d/aria2c <<-'EOF'\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          aria2\n# Required-Start:    $remote_fs $network\n# Required-Stop:     $remote_fs $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Aria2 Downloader\n### END INIT INFO\ndo_start()\n{\n        echo -n \"Starting aria2c\"\n             su pi -c \"aria2c --conf-path=/home/pi/.aria2/aria2.conf &\"\n#这里的路径只能用绝对路径所以用户名不是pi的记得来这里修改\n}\ndo_stop()\n{\n     echo -n \"Shutting down aria2c \"\n        pkill -f aria2c\n}\ndo_restart() {\n    do_stop\n    sleep 1\n    do_start\n}\ncase \"$1\" in\nstart)\n   do_start\n   ;;\nstop)\n   do_stop\n   ;;\nstatus)\n  exit $?\n  ;;\nrestart)\n  do_restart\n  ;;\n*)\n   echo \"Usage: service aria2c {start|stop|status|restart}\" >&2\n   exit 1\n   ;;\nesac\nexit\nEOF\nsudo chmod +x /etc/init.d/aria2c\nsudo update-rc.d aria2c defaults\nsudo service aria2c start\n```\n\n这个时候aria2已经添加到开机启动并已经启动  \n以后想要管理aria2只需要输入对应命令即可\n\n```bash\n#启动aria2服务\nsudo service aria2c start \n#停止aria2服务\nsudo service aria2c stop \n#查看aria2服务状态\nsudo service aria2c status \n```\n同样的命令把aria2c替换成其他名称用来管理samba和等下要装的frp都是可以的  \n\n> 参考：https://www.jianshu.com/p/03f8022453a5\n\n* ## 网页前端（lighttpd和[ariaNg](http://ariang.mayswind.net/zh_Hans/)）\n\n安装lighttpd并设为默认启动：  \n\n```bash\nsudo apt-get install lighttpd -y\nsudo update-rc.d lighttpd defaults\n```\n\n安装好lighttpd后默认已经开启网页服务，接下来放aria2前端\n\n```bash\ncd /var/www/html\nsudo wget https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip\nsudo unzip aria-ng-0.4.0.zip\n#顺便删除压缩包\nrm aria-ng-0.4.0.zip\n```\n\n现在用浏览器打开树莓派IP，你就可以看到一个漂亮的前端,以后就用它管理下载  \n至此，一个内网NAS已经搭建完成，轻量化，超小占用。  \n当然还没完，我们要做的是能从外网访问的下载器。\n</br>\n\n# **第三部分：内网穿透frp**  \n\n关于frp\n\n英文全称：fast reverse proxy\n中文全称：快速反向代理\n简称：frp\nfrp 是一个可用于内网穿透的高性能反向代理应用，支持 tcp, udp, http, https 协议.\n\nfrp 的作用\n利用处于内网或防火墙后的机器，对外网环境提供 http 或 https 服务。\n对于 http, https 服务支持基于域名的虚拟主机，支持自定义域名绑定，使多个域名可以共用一个80端口。\n利用处于内网或防火墙后的机器，对外网环境提供 tcp 和 udp 服务，例如在家里通过 ssh 访问处于公司内网环境内的主机。\n\nfrp为免费且开源项目，需要自己利用一台拥有公网IP机器搭建服务端，以部署内网穿透项目。\n\n项目链接：https://github.com/fatedier/frp/\n\n科普完了,没有公网IP服务器的童鞋这里推荐一个免费的公共服务:https://www.nat.ee/\n\n* ## frp客户端安装\n\n可以自己到[releases](http://github.com/fatedier/frp/releases)页面找最新版链接\n\n```bash\ncd ~\nwget http://github.com/fatedier/frp/releases/download/v0.16.0/frp_0.16.0_linux_arm.tar.gz\ntar -xvf frp_0.16.0_linux_arm.tar.gz\nsudo mv frp_0.16.0_linux_arm/ /etc/frp\n```\n\n编辑配置文件\n\n```bash\nsudo nano /etc/frp/frpc.ini\n```\n\n根据nat.ee提供的配置文件,这里提供一个http的例子  \n把中文都换掉,自定义域太简单可能会因为被占用无法启动,记得换个复杂点的\n\n```bash\n#http-自定义配置-示例\n[common]\nserver_addr = nat.ee\nserver_port = 7000\nprivilege_token = www.nat.ee\nuser = 自定义用户名称\n\n[自定义服务名称]\ntype = http\nlocal_port = 80\nlocal_ip = 127.0.0.1\ncustom_domains = 自定义域.nat.ee\n```  \n\nCtrl+O保存，Ctrl+X退出  \n测试一下是否运行正常:  \n\n```bash\nsudo /etc/frp/frpc -c /etc/frp/frpc.ini\n```\n\n如果输出结果带有\"start proxy success\"则表示连接成功  \nCtrl+C关闭  \n添加frp为服务并自动启动:  \n(我在里面加了判断网络是否连接的脚本\"net_ts\",终于解决了开机启动时没网络导致启动失败的问题)\n\n```bash\nsudo tee /etc/init.d/frp <<-'EOF'\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:         frp\n# Required-Start:    $network $local_fs $remote_fs $named $portmap $syslog\n# Required-Stop::    $network $local_fs $remote_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start frp at boot time\n# Description:       A porxy clint\n### END INIT INFO\nnet_ts()\n{\n    #超时时间\n    timeout=5\n\n    #目标网站\n    target=baidu.com\n\n    #获取响应状态码\n    ret_code=`curl -I -s --connect-timeout $timeout $target -w %{http_code} | tail -n1`\n\n    if [ \"x$ret_code\" = \"x200\" ]; then\n        echo 网络畅通\n\tnetstate='1'\n    else\n        echo 网络不畅通\n\tnetstate='0'\n    fi\n}\ndo_start()\n{\n        echo \"starting frp.\"\n        /etc/frp/frpc -c /etc/frp/frpc.ini &\n\n}\ndo_stop()\n{\n      pkill -f /etc/frp/frpc\n      echo \"stop complete.\"\n}\ndo_restart() {\n    do_stop\n    sleep 1\n    do_start\n}\ncase \"$1\" in\nstart)\n  net_ts\n#这里验证网络是否连通，连通了才启动frp\n  while [ $netstate -lt 0 ];\n  do\n    echo 请检查网络，将在5秒后重试\n    sleep 5\n    net_ts\n  done\n  do_start\n   ;;\nstop)\n   do_stop\n   ;;\nstatus)\n  exit $?\n  ;;\nrestart)\n  do_restart\n  ;;\n*)\n   echo \"Usage:service frp {start|stop|restart|status}\" >&2\n   exit 1\n   ;;\nesac\nexit 0\nEOF\n\nsudo chmod +x /etc/init.d/frp\nsudo systemctl daemon-reload\nsudo update-rc.d frp defaults\nsudo service frp start\n```\n\nfrp服务已经启动  \n现在试试能否从外网访问  \n一切正常的话你就可以从外网看到刚才那个漂亮的前端  \n开始你的下载吧  \nfrp还有很多玩法，有兴趣的朋友可以去项目地址看看，有中文说明.  \n\n**第一次写教程,写的不好的地方请多包涵,之后我还会写在树莓派上安装hexo博客的教程,记得来看哦.**\n","source":"_posts/raspberrypi-how.md","raw":"---\ntitle: 树莓派：samba文件共享、frp内网穿透、lighttpd、aria2c下载器（AriaNg前端）安装教程\ndate: 2018-3-12 1:08:00\ntags: \n  - 各种Pi\n  - systemctl\n---\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近拿到了一个树莓派3B，想要做成NAS以及下载机，我这个人平时喜欢看美剧，每次下载都要先开电脑打开浏览器找资源迅雷下载，有时候用手机找到资源了还是得开电脑，毕竟手机不适合用来下BT，于是有了这个想法，一开始还装了[Nextcloud的树莓派版](https://ownyourbits.com/nextcloudpi/)(需要的童鞋可以进去看（需翻墙）)（2018-12-20更新：现在看官网把这个部分已经做的很完善了，占用可能也不高了），网盘下载前端倒是什么都有了，就是觉着太臃肿，web服务器用的居然还是apache，占用可想而知，到后来每次链接ssh都要接近半分钟，运行一个python脚本更是要到一分钟，那就是几行的脚本啊。后来想nextcloud其实没什么用，我只要能下载和共享文件就可以了。  \n<!--more-->\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;于是就有了这个教程，我打算用lighttpd作web服务器，上面放hexo博客（毕竟有了frp）和[aria2c前端](http://ariang.mayswind.net/zh_Hans/)，通过frp连接到我的阿里云主机，那里有公网IP，这样一来我可以在任何地方访问我的树莓派叫它下美剧，真是很幸福的一件事。  \n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;废话不多说，下面开始教程，我用的系统是raspbian-stretch-lite，最少占用嘛，桌面也是不需要的。  \n\n# **第一部分：samba文件共享**\n\n* ## 挂载硬盘  \n\n查看设备列表：\n\n```bash\nsudo fdisk -l\n```\n\n这时候会列出所有挂载的设备（告诉我你已经插上硬盘了）然后找到硬盘的标识，一般是/dev/sda1，然后记下来  \n挂载硬盘：\n\n```bash\nsudo mount /dev/sda1 /media\n```\n\n查看现有磁盘信息，看是否挂载成功:\n\n```bash\ndf -T\n```\n\n* ## 更换软件安装源到国内  \n\n少数情况后面的安装会出现apt-get install安装失败，这个时候就需要把安装源替换成国内源，速度也会更快  \n\n备份原列表\n\n```bash\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak\n```\n\n编辑文件：\n\n```bash\nsudo sed -i 's#://raspbian.raspberrypi.org#s://mirrors.tuna.tsinghua.edu.cn/raspbian#g' /etc/apt/sources.list\nsudo sed -i 's#://archive.raspberrypi.org/debian#s://mirrors.tuna.tsinghua.edu.cn/raspberrypi#g' /etc/apt/sources.list.d/raspi.list\n```\n\n然后执行更新让更改生效:\n\n```bash\nsudo apt-get update\n```\n\n* ## samba安装及配置\n\n根据需要修改下面配置文件  \n[MyNAS]是电脑上可以看到的名称  \n共享路径是挂载硬盘的路径所以我用的是/media  \n其他可以不用管  \n全部复制到终端即可：  \n（我用了echo命令来写配置文件，当然用nano、vim、vi都是可以的，看各位喜欢）\n\n```bash\nsudo apt-get install samba -y #安装samba\nsudo echo \"\n    # 分享名称\n    [MyNAS]\n    # 说明信息\n    comment = NAS Storage\n    # 可以访问的用户\n    valid users = pi,root\n    # 共享文件的路径。\n    path = /media\n    # 可被其他人看到资源名称（非内容）\n    browseable = yes\n    # 可写\n    writable = yes\n    # 新建文件的权限为 664\n    create mask = 0664\n    # 新建目录的权限为 775\n    directory mask = 0775\n\"  >> /etc/samba/smb.conf\n\n```\n\n测试配置文件是否有错误，根据提示做相应修改：\n\n```bash\ntestparm\n```\n添加登陆账户并创建密码，必须是 linux 已存在的用户，密码不一定要和系统一样，只是登录samba用的。\n\n```bash\nsudo smbpasswd -a pi\n```\n\n输入两次密码  \n\n重载 samba 服务：\n\n```bash\nsudo service samba reload\n```\n\n让samba开机启动：\n\n```bash\nsudo update-rc.d samba defaults\n```\n\n# **第二部分：aria2下载器**\n\n* ## aria2配置及安装\n\n安装aria2\n\n```bash\nsudo apt-get install aria2 -y\n```\n\n创建 session 和配置文件：\n\n```bash\nmkdir ~/.aria2\ntouch ~/.aria2/aria2.session\ntouch ~/.aria2/aria2.conf\n```\n\n写入配置文件aria2.conf,注意如果用户名不是pi的话需要改下面的对应文件路径：\n\n```bash\necho \"\n\n## 文件保存相关 ##\n\n# 文件保存目录\ndir=/media/Download\n# 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M\ndisk-cache=32M\n# 断点续传\ncontinue=true\n\n# 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc\n# 预分配所需时间: none < falloc ? trunc < prealloc\n# falloc和trunc则需要文件系统和内核支持\n# NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项\n#file-allocation=falloc\n\n## 下载连接相关 ##\n\n# 最大同时下载任务数, 运行时可修改, 默认:5\n#max-concurrent-downloads=5\n# 同一服务器连接数, 添加时可指定, 默认:1\nmax-connection-per-server=15\n# 整体下载速度限制, 运行时可修改, 默认:0（不限制）\n#max-overall-download-limit=0\n# 单个任务下载速度限制, 默认:0（不限制）\n#max-download-limit=0\n# 整体上传速度限制, 运行时可修改, 默认:0（不限制）\n#max-overall-upload-limit=0\n# 单个任务上传速度限制, 默认:0（不限制）\n#max-upload-limit=0\n# 禁用IPv6, 默认:false\ndisable-ipv6=true\n\n# 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M\n# 假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载\nmin-split-size=10M\n# 单个任务最大线程数, 添加时可指定, 默认:5\nsplit=10\n\n## 进度保存相关 ##\n\n# 从会话文件中读取下载任务\ninput-file=/home/pi/.aria2/aria2.session\n# 在Aria2退出时保存错误的、未完成的下载任务到会话文件\nsave-session=/home/pi/.aria2/aria2.session\n# 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0\nsave-session-interval=60\n\n## RPC相关设置 ##\n\n# 启用RPC, 默认:false\nenable-rpc=true\n# 允许所有来源, 默认:false\nrpc-allow-origin-all=true\n# 允许外部访问, 默认:false\nrpc-listen-all=true\n# RPC端口, 仅当默认端口被占用时修改\n# rpc-listen-port=6800\n# 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项\n#rpc-secret=<TOKEN>\n\n## BT/PT下载相关 ##\n\n# 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true\n#follow-torrent=true\n# 客户端伪装, PT需要\npeer-id-prefix=-TR2770-\nuser-agent=Transmission/2.77\n# 强制保存会话, 即使任务已经完成, 默认:false\n# 较新的版本开启后会在任务完成后依然保留.aria2文件\n#force-save=false\n# 继续之前的BT任务时, 无需再次校验, 默认:false\nbt-seed-unverified=true\n# 保存磁力链接元数据为种子文件(.torrent文件), 默认:false\nbt-save-metadata=true\n\" >> ~/.aria2/aria2.conf\n```\n\n然后执行：\n\n```bash\naria2c --conf-path=/home/pi/.aria2/aria2.conf -D\n```\n\n没有任何提示则表示成功，Ctrl+C退出。  \n接下来作为服务添加开机自启，注意路径是否正确：\n\n```bash\nsudo tee /etc/init.d/aria2c <<-'EOF'\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          aria2\n# Required-Start:    $remote_fs $network\n# Required-Stop:     $remote_fs $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Aria2 Downloader\n### END INIT INFO\ndo_start()\n{\n        echo -n \"Starting aria2c\"\n             su pi -c \"aria2c --conf-path=/home/pi/.aria2/aria2.conf &\"\n#这里的路径只能用绝对路径所以用户名不是pi的记得来这里修改\n}\ndo_stop()\n{\n     echo -n \"Shutting down aria2c \"\n        pkill -f aria2c\n}\ndo_restart() {\n    do_stop\n    sleep 1\n    do_start\n}\ncase \"$1\" in\nstart)\n   do_start\n   ;;\nstop)\n   do_stop\n   ;;\nstatus)\n  exit $?\n  ;;\nrestart)\n  do_restart\n  ;;\n*)\n   echo \"Usage: service aria2c {start|stop|status|restart}\" >&2\n   exit 1\n   ;;\nesac\nexit\nEOF\nsudo chmod +x /etc/init.d/aria2c\nsudo update-rc.d aria2c defaults\nsudo service aria2c start\n```\n\n这个时候aria2已经添加到开机启动并已经启动  \n以后想要管理aria2只需要输入对应命令即可\n\n```bash\n#启动aria2服务\nsudo service aria2c start \n#停止aria2服务\nsudo service aria2c stop \n#查看aria2服务状态\nsudo service aria2c status \n```\n同样的命令把aria2c替换成其他名称用来管理samba和等下要装的frp都是可以的  \n\n> 参考：https://www.jianshu.com/p/03f8022453a5\n\n* ## 网页前端（lighttpd和[ariaNg](http://ariang.mayswind.net/zh_Hans/)）\n\n安装lighttpd并设为默认启动：  \n\n```bash\nsudo apt-get install lighttpd -y\nsudo update-rc.d lighttpd defaults\n```\n\n安装好lighttpd后默认已经开启网页服务，接下来放aria2前端\n\n```bash\ncd /var/www/html\nsudo wget https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip\nsudo unzip aria-ng-0.4.0.zip\n#顺便删除压缩包\nrm aria-ng-0.4.0.zip\n```\n\n现在用浏览器打开树莓派IP，你就可以看到一个漂亮的前端,以后就用它管理下载  \n至此，一个内网NAS已经搭建完成，轻量化，超小占用。  \n当然还没完，我们要做的是能从外网访问的下载器。\n</br>\n\n# **第三部分：内网穿透frp**  \n\n关于frp\n\n英文全称：fast reverse proxy\n中文全称：快速反向代理\n简称：frp\nfrp 是一个可用于内网穿透的高性能反向代理应用，支持 tcp, udp, http, https 协议.\n\nfrp 的作用\n利用处于内网或防火墙后的机器，对外网环境提供 http 或 https 服务。\n对于 http, https 服务支持基于域名的虚拟主机，支持自定义域名绑定，使多个域名可以共用一个80端口。\n利用处于内网或防火墙后的机器，对外网环境提供 tcp 和 udp 服务，例如在家里通过 ssh 访问处于公司内网环境内的主机。\n\nfrp为免费且开源项目，需要自己利用一台拥有公网IP机器搭建服务端，以部署内网穿透项目。\n\n项目链接：https://github.com/fatedier/frp/\n\n科普完了,没有公网IP服务器的童鞋这里推荐一个免费的公共服务:https://www.nat.ee/\n\n* ## frp客户端安装\n\n可以自己到[releases](http://github.com/fatedier/frp/releases)页面找最新版链接\n\n```bash\ncd ~\nwget http://github.com/fatedier/frp/releases/download/v0.16.0/frp_0.16.0_linux_arm.tar.gz\ntar -xvf frp_0.16.0_linux_arm.tar.gz\nsudo mv frp_0.16.0_linux_arm/ /etc/frp\n```\n\n编辑配置文件\n\n```bash\nsudo nano /etc/frp/frpc.ini\n```\n\n根据nat.ee提供的配置文件,这里提供一个http的例子  \n把中文都换掉,自定义域太简单可能会因为被占用无法启动,记得换个复杂点的\n\n```bash\n#http-自定义配置-示例\n[common]\nserver_addr = nat.ee\nserver_port = 7000\nprivilege_token = www.nat.ee\nuser = 自定义用户名称\n\n[自定义服务名称]\ntype = http\nlocal_port = 80\nlocal_ip = 127.0.0.1\ncustom_domains = 自定义域.nat.ee\n```  \n\nCtrl+O保存，Ctrl+X退出  \n测试一下是否运行正常:  \n\n```bash\nsudo /etc/frp/frpc -c /etc/frp/frpc.ini\n```\n\n如果输出结果带有\"start proxy success\"则表示连接成功  \nCtrl+C关闭  \n添加frp为服务并自动启动:  \n(我在里面加了判断网络是否连接的脚本\"net_ts\",终于解决了开机启动时没网络导致启动失败的问题)\n\n```bash\nsudo tee /etc/init.d/frp <<-'EOF'\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:         frp\n# Required-Start:    $network $local_fs $remote_fs $named $portmap $syslog\n# Required-Stop::    $network $local_fs $remote_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start frp at boot time\n# Description:       A porxy clint\n### END INIT INFO\nnet_ts()\n{\n    #超时时间\n    timeout=5\n\n    #目标网站\n    target=baidu.com\n\n    #获取响应状态码\n    ret_code=`curl -I -s --connect-timeout $timeout $target -w %{http_code} | tail -n1`\n\n    if [ \"x$ret_code\" = \"x200\" ]; then\n        echo 网络畅通\n\tnetstate='1'\n    else\n        echo 网络不畅通\n\tnetstate='0'\n    fi\n}\ndo_start()\n{\n        echo \"starting frp.\"\n        /etc/frp/frpc -c /etc/frp/frpc.ini &\n\n}\ndo_stop()\n{\n      pkill -f /etc/frp/frpc\n      echo \"stop complete.\"\n}\ndo_restart() {\n    do_stop\n    sleep 1\n    do_start\n}\ncase \"$1\" in\nstart)\n  net_ts\n#这里验证网络是否连通，连通了才启动frp\n  while [ $netstate -lt 0 ];\n  do\n    echo 请检查网络，将在5秒后重试\n    sleep 5\n    net_ts\n  done\n  do_start\n   ;;\nstop)\n   do_stop\n   ;;\nstatus)\n  exit $?\n  ;;\nrestart)\n  do_restart\n  ;;\n*)\n   echo \"Usage:service frp {start|stop|restart|status}\" >&2\n   exit 1\n   ;;\nesac\nexit 0\nEOF\n\nsudo chmod +x /etc/init.d/frp\nsudo systemctl daemon-reload\nsudo update-rc.d frp defaults\nsudo service frp start\n```\n\nfrp服务已经启动  \n现在试试能否从外网访问  \n一切正常的话你就可以从外网看到刚才那个漂亮的前端  \n开始你的下载吧  \nfrp还有很多玩法，有兴趣的朋友可以去项目地址看看，有中文说明.  \n\n**第一次写教程,写的不好的地方请多包涵,之后我还会写在树莓派上安装hexo博客的教程,记得来看哦.**\n","slug":"raspberrypi-how","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn4000g6z0hhsci7y2q","content":"<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近拿到了一个树莓派3B，想要做成NAS以及下载机，我这个人平时喜欢看美剧，每次下载都要先开电脑打开浏览器找资源迅雷下载，有时候用手机找到资源了还是得开电脑，毕竟手机不适合用来下BT，于是有了这个想法，一开始还装了<a href=\"https://ownyourbits.com/nextcloudpi/\">Nextcloud的树莓派版</a>(需要的童鞋可以进去看（需翻墙）)（2018-12-20更新：现在看官网把这个部分已经做的很完善了，占用可能也不高了），网盘下载前端倒是什么都有了，就是觉着太臃肿，web服务器用的居然还是apache，占用可想而知，到后来每次链接ssh都要接近半分钟，运行一个python脚本更是要到一分钟，那就是几行的脚本啊。后来想nextcloud其实没什么用，我只要能下载和共享文件就可以了。  </p>\n<span id=\"more\"></span>\n<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;于是就有了这个教程，我打算用lighttpd作web服务器，上面放hexo博客（毕竟有了frp）和<a href=\"http://ariang.mayswind.net/zh_Hans/\">aria2c前端</a>，通过frp连接到我的阿里云主机，那里有公网IP，这样一来我可以在任何地方访问我的树莓派叫它下美剧，真是很幸福的一件事。  </p>\n<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;废话不多说，下面开始教程，我用的系统是raspbian-stretch-lite，最少占用嘛，桌面也是不需要的。  </p>\n<h1 id=\"第一部分：samba文件共享\"><a href=\"#第一部分：samba文件共享\" class=\"headerlink\" title=\"第一部分：samba文件共享\"></a><strong>第一部分：samba文件共享</strong></h1><ul>\n<li><h2 id=\"挂载硬盘\"><a href=\"#挂载硬盘\" class=\"headerlink\" title=\"挂载硬盘\"></a>挂载硬盘</h2></li>\n</ul>\n<p>查看设备列表：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo fdisk -l</span><br></pre></td></tr></table></figure>\n\n<p>这时候会列出所有挂载的设备（告诉我你已经插上硬盘了）然后找到硬盘的标识，一般是&#x2F;dev&#x2F;sda1，然后记下来<br>挂载硬盘：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mount /dev/sda1 /media</span><br></pre></td></tr></table></figure>\n\n<p>查看现有磁盘信息，看是否挂载成功:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">df</span> -T</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><h2 id=\"更换软件安装源到国内\"><a href=\"#更换软件安装源到国内\" class=\"headerlink\" title=\"更换软件安装源到国内\"></a>更换软件安装源到国内</h2></li>\n</ul>\n<p>少数情况后面的安装会出现apt-get install安装失败，这个时候就需要把安装源替换成国内源，速度也会更快  </p>\n<p>备份原列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class=\"line\">sudo <span class=\"built_in\">cp</span> /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak</span><br></pre></td></tr></table></figure>\n\n<p>编辑文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sed -i <span class=\"string\">&#x27;s#://raspbian.raspberrypi.org#s://mirrors.tuna.tsinghua.edu.cn/raspbian#g&#x27;</span> /etc/apt/sources.list</span><br><span class=\"line\">sudo sed -i <span class=\"string\">&#x27;s#://archive.raspberrypi.org/debian#s://mirrors.tuna.tsinghua.edu.cn/raspberrypi#g&#x27;</span> /etc/apt/sources.list.d/raspi.list</span><br></pre></td></tr></table></figure>\n\n<p>然后执行更新让更改生效:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><h2 id=\"samba安装及配置\"><a href=\"#samba安装及配置\" class=\"headerlink\" title=\"samba安装及配置\"></a>samba安装及配置</h2></li>\n</ul>\n<p>根据需要修改下面配置文件<br>[MyNAS]是电脑上可以看到的名称<br>共享路径是挂载硬盘的路径所以我用的是&#x2F;media<br>其他可以不用管<br>全部复制到终端即可：<br>（我用了echo命令来写配置文件，当然用nano、vim、vi都是可以的，看各位喜欢）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install samba -y <span class=\"comment\">#安装samba</span></span><br><span class=\"line\">sudo <span class=\"built_in\">echo</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">    # 分享名称</span></span><br><span class=\"line\"><span class=\"string\">    [MyNAS]</span></span><br><span class=\"line\"><span class=\"string\">    # 说明信息</span></span><br><span class=\"line\"><span class=\"string\">    comment = NAS Storage</span></span><br><span class=\"line\"><span class=\"string\">    # 可以访问的用户</span></span><br><span class=\"line\"><span class=\"string\">    valid users = pi,root</span></span><br><span class=\"line\"><span class=\"string\">    # 共享文件的路径。</span></span><br><span class=\"line\"><span class=\"string\">    path = /media</span></span><br><span class=\"line\"><span class=\"string\">    # 可被其他人看到资源名称（非内容）</span></span><br><span class=\"line\"><span class=\"string\">    browseable = yes</span></span><br><span class=\"line\"><span class=\"string\">    # 可写</span></span><br><span class=\"line\"><span class=\"string\">    writable = yes</span></span><br><span class=\"line\"><span class=\"string\">    # 新建文件的权限为 664</span></span><br><span class=\"line\"><span class=\"string\">    create mask = 0664</span></span><br><span class=\"line\"><span class=\"string\">    # 新建目录的权限为 775</span></span><br><span class=\"line\"><span class=\"string\">    directory mask = 0775</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span>  &gt;&gt; /etc/samba/smb.conf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>测试配置文件是否有错误，根据提示做相应修改：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">testparm</span><br></pre></td></tr></table></figure>\n<p>添加登陆账户并创建密码，必须是 linux 已存在的用户，密码不一定要和系统一样，只是登录samba用的。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo smbpasswd -a pi</span><br></pre></td></tr></table></figure>\n\n<p>输入两次密码  </p>\n<p>重载 samba 服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service samba reload</span><br></pre></td></tr></table></figure>\n\n<p>让samba开机启动：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-rc.d samba defaults</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"第二部分：aria2下载器\"><a href=\"#第二部分：aria2下载器\" class=\"headerlink\" title=\"第二部分：aria2下载器\"></a><strong>第二部分：aria2下载器</strong></h1><ul>\n<li><h2 id=\"aria2配置及安装\"><a href=\"#aria2配置及安装\" class=\"headerlink\" title=\"aria2配置及安装\"></a>aria2配置及安装</h2></li>\n</ul>\n<p>安装aria2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install aria2 -y</span><br></pre></td></tr></table></figure>\n\n<p>创建 session 和配置文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> ~/.aria2</span><br><span class=\"line\"><span class=\"built_in\">touch</span> ~/.aria2/aria2.session</span><br><span class=\"line\"><span class=\"built_in\">touch</span> ~/.aria2/aria2.conf</span><br></pre></td></tr></table></figure>\n\n<p>写入配置文件aria2.conf,注意如果用户名不是pi的话需要改下面的对应文件路径：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 文件保存相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 文件保存目录</span></span><br><span class=\"line\"><span class=\"string\">dir=/media/Download</span></span><br><span class=\"line\"><span class=\"string\"># 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M</span></span><br><span class=\"line\"><span class=\"string\">disk-cache=32M</span></span><br><span class=\"line\"><span class=\"string\"># 断点续传</span></span><br><span class=\"line\"><span class=\"string\">continue=true</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc</span></span><br><span class=\"line\"><span class=\"string\"># 预分配所需时间: none &lt; falloc ? trunc &lt; prealloc</span></span><br><span class=\"line\"><span class=\"string\"># falloc和trunc则需要文件系统和内核支持</span></span><br><span class=\"line\"><span class=\"string\"># NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项</span></span><br><span class=\"line\"><span class=\"string\">#file-allocation=falloc</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 下载连接相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 最大同时下载任务数, 运行时可修改, 默认:5</span></span><br><span class=\"line\"><span class=\"string\">#max-concurrent-downloads=5</span></span><br><span class=\"line\"><span class=\"string\"># 同一服务器连接数, 添加时可指定, 默认:1</span></span><br><span class=\"line\"><span class=\"string\">max-connection-per-server=15</span></span><br><span class=\"line\"><span class=\"string\"># 整体下载速度限制, 运行时可修改, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-overall-download-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务下载速度限制, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-download-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 整体上传速度限制, 运行时可修改, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-overall-upload-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务上传速度限制, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-upload-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 禁用IPv6, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">disable-ipv6=true</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M</span></span><br><span class=\"line\"><span class=\"string\"># 假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载</span></span><br><span class=\"line\"><span class=\"string\">min-split-size=10M</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务最大线程数, 添加时可指定, 默认:5</span></span><br><span class=\"line\"><span class=\"string\">split=10</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 进度保存相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 从会话文件中读取下载任务</span></span><br><span class=\"line\"><span class=\"string\">input-file=/home/pi/.aria2/aria2.session</span></span><br><span class=\"line\"><span class=\"string\"># 在Aria2退出时保存错误的、未完成的下载任务到会话文件</span></span><br><span class=\"line\"><span class=\"string\">save-session=/home/pi/.aria2/aria2.session</span></span><br><span class=\"line\"><span class=\"string\"># 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span></span><br><span class=\"line\"><span class=\"string\">save-session-interval=60</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## RPC相关设置 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 启用RPC, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">enable-rpc=true</span></span><br><span class=\"line\"><span class=\"string\"># 允许所有来源, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">rpc-allow-origin-all=true</span></span><br><span class=\"line\"><span class=\"string\"># 允许外部访问, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">rpc-listen-all=true</span></span><br><span class=\"line\"><span class=\"string\"># RPC端口, 仅当默认端口被占用时修改</span></span><br><span class=\"line\"><span class=\"string\"># rpc-listen-port=6800</span></span><br><span class=\"line\"><span class=\"string\"># 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span></span><br><span class=\"line\"><span class=\"string\">#rpc-secret=&lt;TOKEN&gt;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## BT/PT下载相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true</span></span><br><span class=\"line\"><span class=\"string\">#follow-torrent=true</span></span><br><span class=\"line\"><span class=\"string\"># 客户端伪装, PT需要</span></span><br><span class=\"line\"><span class=\"string\">peer-id-prefix=-TR2770-</span></span><br><span class=\"line\"><span class=\"string\">user-agent=Transmission/2.77</span></span><br><span class=\"line\"><span class=\"string\"># 强制保存会话, 即使任务已经完成, 默认:false</span></span><br><span class=\"line\"><span class=\"string\"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span></span><br><span class=\"line\"><span class=\"string\">#force-save=false</span></span><br><span class=\"line\"><span class=\"string\"># 继续之前的BT任务时, 无需再次校验, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">bt-seed-unverified=true</span></span><br><span class=\"line\"><span class=\"string\"># 保存磁力链接元数据为种子文件(.torrent文件), 默认:false</span></span><br><span class=\"line\"><span class=\"string\">bt-save-metadata=true</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span> &gt;&gt; ~/.aria2/aria2.conf</span><br></pre></td></tr></table></figure>\n\n<p>然后执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aria2c --conf-path=/home/pi/.aria2/aria2.conf -D</span><br></pre></td></tr></table></figure>\n\n<p>没有任何提示则表示成功，Ctrl+C退出。<br>接下来作为服务添加开机自启，注意路径是否正确：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/init.d/aria2c &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### BEGIN INIT INFO</span></span><br><span class=\"line\"><span class=\"comment\"># Provides:          aria2</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Start:    $remote_fs $network</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Stop:     $remote_fs $network</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Start:     2 3 4 5</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Stop:      0 1 6</span></span><br><span class=\"line\"><span class=\"comment\"># Short-Description: Aria2 Downloader</span></span><br><span class=\"line\"><span class=\"comment\">### END INIT INFO</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_start</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -n <span class=\"string\">&quot;Starting aria2c&quot;</span></span><br><span class=\"line\">             su pi -c <span class=\"string\">&quot;aria2c --conf-path=/home/pi/.aria2/aria2.conf &amp;&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#这里的路径只能用绝对路径所以用户名不是pi的记得来这里修改</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_stop</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     <span class=\"built_in\">echo</span> -n <span class=\"string\">&quot;Shutting down aria2c &quot;</span></span><br><span class=\"line\">        pkill -f aria2c</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_restart</span></span>() &#123;</span><br><span class=\"line\">    do_stop</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\">    do_start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">start)</span><br><span class=\"line\">   do_start</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">stop)</span><br><span class=\"line\">   do_stop</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">status)</span><br><span class=\"line\">  <span class=\"built_in\">exit</span> $?</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">restart)</span><br><span class=\"line\">  do_restart</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage: service aria2c &#123;start|stop|status|restart&#125;&quot;</span> &gt;&amp;2</span><br><span class=\"line\">   <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">   ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /etc/init.d/aria2c</span><br><span class=\"line\">sudo update-rc.d aria2c defaults</span><br><span class=\"line\">sudo service aria2c start</span><br></pre></td></tr></table></figure>\n\n<p>这个时候aria2已经添加到开机启动并已经启动<br>以后想要管理aria2只需要输入对应命令即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启动aria2服务</span></span><br><span class=\"line\">sudo service aria2c start </span><br><span class=\"line\"><span class=\"comment\">#停止aria2服务</span></span><br><span class=\"line\">sudo service aria2c stop </span><br><span class=\"line\"><span class=\"comment\">#查看aria2服务状态</span></span><br><span class=\"line\">sudo service aria2c status </span><br></pre></td></tr></table></figure>\n<p>同样的命令把aria2c替换成其他名称用来管理samba和等下要装的frp都是可以的  </p>\n<blockquote>\n<p>参考：<a href=\"https://www.jianshu.com/p/03f8022453a5\">https://www.jianshu.com/p/03f8022453a5</a></p>\n</blockquote>\n<ul>\n<li><h2 id=\"网页前端（lighttpd和ariaNg）\"><a href=\"#网页前端（lighttpd和ariaNg）\" class=\"headerlink\" title=\"网页前端（lighttpd和ariaNg）\"></a>网页前端（lighttpd和<a href=\"http://ariang.mayswind.net/zh_Hans/\">ariaNg</a>）</h2></li>\n</ul>\n<p>安装lighttpd并设为默认启动：  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install lighttpd -y</span><br><span class=\"line\">sudo update-rc.d lighttpd defaults</span><br></pre></td></tr></table></figure>\n\n<p>安装好lighttpd后默认已经开启网页服务，接下来放aria2前端</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /var/www/html</span><br><span class=\"line\">sudo wget https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip</span><br><span class=\"line\">sudo unzip aria-ng-0.4.0.zip</span><br><span class=\"line\"><span class=\"comment\">#顺便删除压缩包</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> aria-ng-0.4.0.zip</span><br></pre></td></tr></table></figure>\n\n<p>现在用浏览器打开树莓派IP，你就可以看到一个漂亮的前端,以后就用它管理下载<br>至此，一个内网NAS已经搭建完成，轻量化，超小占用。<br>当然还没完，我们要做的是能从外网访问的下载器。<br></br></p>\n<h1 id=\"第三部分：内网穿透frp\"><a href=\"#第三部分：内网穿透frp\" class=\"headerlink\" title=\"第三部分：内网穿透frp\"></a><strong>第三部分：内网穿透frp</strong></h1><p>关于frp</p>\n<p>英文全称：fast reverse proxy<br>中文全称：快速反向代理<br>简称：frp<br>frp 是一个可用于内网穿透的高性能反向代理应用，支持 tcp, udp, http, https 协议.</p>\n<p>frp 的作用<br>利用处于内网或防火墙后的机器，对外网环境提供 http 或 https 服务。<br>对于 http, https 服务支持基于域名的虚拟主机，支持自定义域名绑定，使多个域名可以共用一个80端口。<br>利用处于内网或防火墙后的机器，对外网环境提供 tcp 和 udp 服务，例如在家里通过 ssh 访问处于公司内网环境内的主机。</p>\n<p>frp为免费且开源项目，需要自己利用一台拥有公网IP机器搭建服务端，以部署内网穿透项目。</p>\n<p>项目链接：<a href=\"https://github.com/fatedier/frp/\">https://github.com/fatedier/frp/</a></p>\n<p>科普完了,没有公网IP服务器的童鞋这里推荐一个免费的公共服务:<a href=\"https://www.nat.ee/\">https://www.nat.ee/</a></p>\n<ul>\n<li><h2 id=\"frp客户端安装\"><a href=\"#frp客户端安装\" class=\"headerlink\" title=\"frp客户端安装\"></a>frp客户端安装</h2></li>\n</ul>\n<p>可以自己到<a href=\"http://github.com/fatedier/frp/releases\">releases</a>页面找最新版链接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget http://github.com/fatedier/frp/releases/download/v0.16.0/frp_0.16.0_linux_arm.tar.gz</span><br><span class=\"line\">tar -xvf frp_0.16.0_linux_arm.tar.gz</span><br><span class=\"line\">sudo <span class=\"built_in\">mv</span> frp_0.16.0_linux_arm/ /etc/frp</span><br></pre></td></tr></table></figure>\n\n<p>编辑配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure>\n\n<p>根据nat.ee提供的配置文件,这里提供一个http的例子<br>把中文都换掉,自定义域太简单可能会因为被占用无法启动,记得换个复杂点的</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#http-自定义配置-示例</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = nat.ee</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">privilege_token = www.nat.ee</span><br><span class=\"line\">user = 自定义用户名称</span><br><span class=\"line\"></span><br><span class=\"line\">[自定义服务名称]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = http</span><br><span class=\"line\">local_port = 80</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">custom_domains = 自定义域.nat.ee</span><br><span class=\"line\">```  </span><br><span class=\"line\"></span><br><span class=\"line\">Ctrl+O保存，Ctrl+X退出  </span><br><span class=\"line\">测试一下是否运行正常:  </span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">sudo /etc/frp/frpc -c /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure>\n\n<p>如果输出结果带有”start proxy success”则表示连接成功<br>Ctrl+C关闭<br>添加frp为服务并自动启动:<br>(我在里面加了判断网络是否连接的脚本”net_ts”,终于解决了开机启动时没网络导致启动失败的问题)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/init.d/frp &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### BEGIN INIT INFO</span></span><br><span class=\"line\"><span class=\"comment\"># Provides:         frp</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Start:    $network $local_fs $remote_fs $named $portmap $syslog</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Stop::    $network $local_fs $remote_fs</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Start:     2 3 4 5</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Stop:      0 1 6</span></span><br><span class=\"line\"><span class=\"comment\"># Short-Description: Start frp at boot time</span></span><br><span class=\"line\"><span class=\"comment\"># Description:       A porxy clint</span></span><br><span class=\"line\"><span class=\"comment\">### END INIT INFO</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">net_ts</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">#超时时间</span></span><br><span class=\"line\">    <span class=\"built_in\">timeout</span>=5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#目标网站</span></span><br><span class=\"line\">    target=baidu.com</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#获取响应状态码</span></span><br><span class=\"line\">    ret_code=`curl -I -s --connect-timeout <span class=\"variable\">$timeout</span> <span class=\"variable\">$target</span> -w %&#123;http_code&#125; | <span class=\"built_in\">tail</span> -n1`</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;x<span class=\"variable\">$ret_code</span>&quot;</span> = <span class=\"string\">&quot;x200&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> 网络畅通</span><br><span class=\"line\">\tnetstate=<span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> 网络不畅通</span><br><span class=\"line\">\tnetstate=<span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_start</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">&quot;starting frp.&quot;</span></span><br><span class=\"line\">        /etc/frp/frpc -c /etc/frp/frpc.ini &amp;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_stop</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">      pkill -f /etc/frp/frpc</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> <span class=\"string\">&quot;stop complete.&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_restart</span></span>() &#123;</span><br><span class=\"line\">    do_stop</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\">    do_start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">start)</span><br><span class=\"line\">  net_ts</span><br><span class=\"line\"><span class=\"comment\">#这里验证网络是否连通，连通了才启动frp</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> [ <span class=\"variable\">$netstate</span> -lt 0 ];</span><br><span class=\"line\">  <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> 请检查网络，将在5秒后重试</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\">    net_ts</span><br><span class=\"line\">  <span class=\"keyword\">done</span></span><br><span class=\"line\">  do_start</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">stop)</span><br><span class=\"line\">   do_stop</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">status)</span><br><span class=\"line\">  <span class=\"built_in\">exit</span> $?</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">restart)</span><br><span class=\"line\">  do_restart</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage:service frp &#123;start|stop|restart|status&#125;&quot;</span> &gt;&amp;2</span><br><span class=\"line\">   <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">   ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /etc/init.d/frp</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo update-rc.d frp defaults</span><br><span class=\"line\">sudo service frp start</span><br></pre></td></tr></table></figure>\n\n<p>frp服务已经启动<br>现在试试能否从外网访问<br>一切正常的话你就可以从外网看到刚才那个漂亮的前端<br>开始你的下载吧<br>frp还有很多玩法，有兴趣的朋友可以去项目地址看看，有中文说明.  </p>\n<p><strong>第一次写教程,写的不好的地方请多包涵,之后我还会写在树莓派上安装hexo博客的教程,记得来看哦.</strong></p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近拿到了一个树莓派3B，想要做成NAS以及下载机，我这个人平时喜欢看美剧，每次下载都要先开电脑打开浏览器找资源迅雷下载，有时候用手机找到资源了还是得开电脑，毕竟手机不适合用来下BT，于是有了这个想法，一开始还装了<a href=\"https://ownyourbits.com/nextcloudpi/\">Nextcloud的树莓派版</a>(需要的童鞋可以进去看（需翻墙）)（2018-12-20更新：现在看官网把这个部分已经做的很完善了，占用可能也不高了），网盘下载前端倒是什么都有了，就是觉着太臃肿，web服务器用的居然还是apache，占用可想而知，到后来每次链接ssh都要接近半分钟，运行一个python脚本更是要到一分钟，那就是几行的脚本啊。后来想nextcloud其实没什么用，我只要能下载和共享文件就可以了。  </p>","more":"<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;于是就有了这个教程，我打算用lighttpd作web服务器，上面放hexo博客（毕竟有了frp）和<a href=\"http://ariang.mayswind.net/zh_Hans/\">aria2c前端</a>，通过frp连接到我的阿里云主机，那里有公网IP，这样一来我可以在任何地方访问我的树莓派叫它下美剧，真是很幸福的一件事。  </p>\n<p>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;废话不多说，下面开始教程，我用的系统是raspbian-stretch-lite，最少占用嘛，桌面也是不需要的。  </p>\n<h1 id=\"第一部分：samba文件共享\"><a href=\"#第一部分：samba文件共享\" class=\"headerlink\" title=\"第一部分：samba文件共享\"></a><strong>第一部分：samba文件共享</strong></h1><ul>\n<li><h2 id=\"挂载硬盘\"><a href=\"#挂载硬盘\" class=\"headerlink\" title=\"挂载硬盘\"></a>挂载硬盘</h2></li>\n</ul>\n<p>查看设备列表：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo fdisk -l</span><br></pre></td></tr></table></figure>\n\n<p>这时候会列出所有挂载的设备（告诉我你已经插上硬盘了）然后找到硬盘的标识，一般是&#x2F;dev&#x2F;sda1，然后记下来<br>挂载硬盘：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mount /dev/sda1 /media</span><br></pre></td></tr></table></figure>\n\n<p>查看现有磁盘信息，看是否挂载成功:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">df</span> -T</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><h2 id=\"更换软件安装源到国内\"><a href=\"#更换软件安装源到国内\" class=\"headerlink\" title=\"更换软件安装源到国内\"></a>更换软件安装源到国内</h2></li>\n</ul>\n<p>少数情况后面的安装会出现apt-get install安装失败，这个时候就需要把安装源替换成国内源，速度也会更快  </p>\n<p>备份原列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class=\"line\">sudo <span class=\"built_in\">cp</span> /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak</span><br></pre></td></tr></table></figure>\n\n<p>编辑文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sed -i <span class=\"string\">&#x27;s#://raspbian.raspberrypi.org#s://mirrors.tuna.tsinghua.edu.cn/raspbian#g&#x27;</span> /etc/apt/sources.list</span><br><span class=\"line\">sudo sed -i <span class=\"string\">&#x27;s#://archive.raspberrypi.org/debian#s://mirrors.tuna.tsinghua.edu.cn/raspberrypi#g&#x27;</span> /etc/apt/sources.list.d/raspi.list</span><br></pre></td></tr></table></figure>\n\n<p>然后执行更新让更改生效:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><h2 id=\"samba安装及配置\"><a href=\"#samba安装及配置\" class=\"headerlink\" title=\"samba安装及配置\"></a>samba安装及配置</h2></li>\n</ul>\n<p>根据需要修改下面配置文件<br>[MyNAS]是电脑上可以看到的名称<br>共享路径是挂载硬盘的路径所以我用的是&#x2F;media<br>其他可以不用管<br>全部复制到终端即可：<br>（我用了echo命令来写配置文件，当然用nano、vim、vi都是可以的，看各位喜欢）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install samba -y <span class=\"comment\">#安装samba</span></span><br><span class=\"line\">sudo <span class=\"built_in\">echo</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">    # 分享名称</span></span><br><span class=\"line\"><span class=\"string\">    [MyNAS]</span></span><br><span class=\"line\"><span class=\"string\">    # 说明信息</span></span><br><span class=\"line\"><span class=\"string\">    comment = NAS Storage</span></span><br><span class=\"line\"><span class=\"string\">    # 可以访问的用户</span></span><br><span class=\"line\"><span class=\"string\">    valid users = pi,root</span></span><br><span class=\"line\"><span class=\"string\">    # 共享文件的路径。</span></span><br><span class=\"line\"><span class=\"string\">    path = /media</span></span><br><span class=\"line\"><span class=\"string\">    # 可被其他人看到资源名称（非内容）</span></span><br><span class=\"line\"><span class=\"string\">    browseable = yes</span></span><br><span class=\"line\"><span class=\"string\">    # 可写</span></span><br><span class=\"line\"><span class=\"string\">    writable = yes</span></span><br><span class=\"line\"><span class=\"string\">    # 新建文件的权限为 664</span></span><br><span class=\"line\"><span class=\"string\">    create mask = 0664</span></span><br><span class=\"line\"><span class=\"string\">    # 新建目录的权限为 775</span></span><br><span class=\"line\"><span class=\"string\">    directory mask = 0775</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span>  &gt;&gt; /etc/samba/smb.conf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>测试配置文件是否有错误，根据提示做相应修改：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">testparm</span><br></pre></td></tr></table></figure>\n<p>添加登陆账户并创建密码，必须是 linux 已存在的用户，密码不一定要和系统一样，只是登录samba用的。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo smbpasswd -a pi</span><br></pre></td></tr></table></figure>\n\n<p>输入两次密码  </p>\n<p>重载 samba 服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service samba reload</span><br></pre></td></tr></table></figure>\n\n<p>让samba开机启动：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-rc.d samba defaults</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"第二部分：aria2下载器\"><a href=\"#第二部分：aria2下载器\" class=\"headerlink\" title=\"第二部分：aria2下载器\"></a><strong>第二部分：aria2下载器</strong></h1><ul>\n<li><h2 id=\"aria2配置及安装\"><a href=\"#aria2配置及安装\" class=\"headerlink\" title=\"aria2配置及安装\"></a>aria2配置及安装</h2></li>\n</ul>\n<p>安装aria2</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install aria2 -y</span><br></pre></td></tr></table></figure>\n\n<p>创建 session 和配置文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> ~/.aria2</span><br><span class=\"line\"><span class=\"built_in\">touch</span> ~/.aria2/aria2.session</span><br><span class=\"line\"><span class=\"built_in\">touch</span> ~/.aria2/aria2.conf</span><br></pre></td></tr></table></figure>\n\n<p>写入配置文件aria2.conf,注意如果用户名不是pi的话需要改下面的对应文件路径：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 文件保存相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 文件保存目录</span></span><br><span class=\"line\"><span class=\"string\">dir=/media/Download</span></span><br><span class=\"line\"><span class=\"string\"># 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M</span></span><br><span class=\"line\"><span class=\"string\">disk-cache=32M</span></span><br><span class=\"line\"><span class=\"string\"># 断点续传</span></span><br><span class=\"line\"><span class=\"string\">continue=true</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc</span></span><br><span class=\"line\"><span class=\"string\"># 预分配所需时间: none &lt; falloc ? trunc &lt; prealloc</span></span><br><span class=\"line\"><span class=\"string\"># falloc和trunc则需要文件系统和内核支持</span></span><br><span class=\"line\"><span class=\"string\"># NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项</span></span><br><span class=\"line\"><span class=\"string\">#file-allocation=falloc</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 下载连接相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 最大同时下载任务数, 运行时可修改, 默认:5</span></span><br><span class=\"line\"><span class=\"string\">#max-concurrent-downloads=5</span></span><br><span class=\"line\"><span class=\"string\"># 同一服务器连接数, 添加时可指定, 默认:1</span></span><br><span class=\"line\"><span class=\"string\">max-connection-per-server=15</span></span><br><span class=\"line\"><span class=\"string\"># 整体下载速度限制, 运行时可修改, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-overall-download-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务下载速度限制, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-download-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 整体上传速度限制, 运行时可修改, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-overall-upload-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务上传速度限制, 默认:0（不限制）</span></span><br><span class=\"line\"><span class=\"string\">#max-upload-limit=0</span></span><br><span class=\"line\"><span class=\"string\"># 禁用IPv6, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">disable-ipv6=true</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M</span></span><br><span class=\"line\"><span class=\"string\"># 假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载</span></span><br><span class=\"line\"><span class=\"string\">min-split-size=10M</span></span><br><span class=\"line\"><span class=\"string\"># 单个任务最大线程数, 添加时可指定, 默认:5</span></span><br><span class=\"line\"><span class=\"string\">split=10</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## 进度保存相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 从会话文件中读取下载任务</span></span><br><span class=\"line\"><span class=\"string\">input-file=/home/pi/.aria2/aria2.session</span></span><br><span class=\"line\"><span class=\"string\"># 在Aria2退出时保存错误的、未完成的下载任务到会话文件</span></span><br><span class=\"line\"><span class=\"string\">save-session=/home/pi/.aria2/aria2.session</span></span><br><span class=\"line\"><span class=\"string\"># 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span></span><br><span class=\"line\"><span class=\"string\">save-session-interval=60</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## RPC相关设置 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 启用RPC, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">enable-rpc=true</span></span><br><span class=\"line\"><span class=\"string\"># 允许所有来源, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">rpc-allow-origin-all=true</span></span><br><span class=\"line\"><span class=\"string\"># 允许外部访问, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">rpc-listen-all=true</span></span><br><span class=\"line\"><span class=\"string\"># RPC端口, 仅当默认端口被占用时修改</span></span><br><span class=\"line\"><span class=\"string\"># rpc-listen-port=6800</span></span><br><span class=\"line\"><span class=\"string\"># 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span></span><br><span class=\"line\"><span class=\"string\">#rpc-secret=&lt;TOKEN&gt;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">## BT/PT下载相关 ##</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true</span></span><br><span class=\"line\"><span class=\"string\">#follow-torrent=true</span></span><br><span class=\"line\"><span class=\"string\"># 客户端伪装, PT需要</span></span><br><span class=\"line\"><span class=\"string\">peer-id-prefix=-TR2770-</span></span><br><span class=\"line\"><span class=\"string\">user-agent=Transmission/2.77</span></span><br><span class=\"line\"><span class=\"string\"># 强制保存会话, 即使任务已经完成, 默认:false</span></span><br><span class=\"line\"><span class=\"string\"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span></span><br><span class=\"line\"><span class=\"string\">#force-save=false</span></span><br><span class=\"line\"><span class=\"string\"># 继续之前的BT任务时, 无需再次校验, 默认:false</span></span><br><span class=\"line\"><span class=\"string\">bt-seed-unverified=true</span></span><br><span class=\"line\"><span class=\"string\"># 保存磁力链接元数据为种子文件(.torrent文件), 默认:false</span></span><br><span class=\"line\"><span class=\"string\">bt-save-metadata=true</span></span><br><span class=\"line\"><span class=\"string\">&quot;</span> &gt;&gt; ~/.aria2/aria2.conf</span><br></pre></td></tr></table></figure>\n\n<p>然后执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aria2c --conf-path=/home/pi/.aria2/aria2.conf -D</span><br></pre></td></tr></table></figure>\n\n<p>没有任何提示则表示成功，Ctrl+C退出。<br>接下来作为服务添加开机自启，注意路径是否正确：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/init.d/aria2c &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### BEGIN INIT INFO</span></span><br><span class=\"line\"><span class=\"comment\"># Provides:          aria2</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Start:    $remote_fs $network</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Stop:     $remote_fs $network</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Start:     2 3 4 5</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Stop:      0 1 6</span></span><br><span class=\"line\"><span class=\"comment\"># Short-Description: Aria2 Downloader</span></span><br><span class=\"line\"><span class=\"comment\">### END INIT INFO</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_start</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -n <span class=\"string\">&quot;Starting aria2c&quot;</span></span><br><span class=\"line\">             su pi -c <span class=\"string\">&quot;aria2c --conf-path=/home/pi/.aria2/aria2.conf &amp;&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#这里的路径只能用绝对路径所以用户名不是pi的记得来这里修改</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_stop</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     <span class=\"built_in\">echo</span> -n <span class=\"string\">&quot;Shutting down aria2c &quot;</span></span><br><span class=\"line\">        pkill -f aria2c</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_restart</span></span>() &#123;</span><br><span class=\"line\">    do_stop</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\">    do_start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">start)</span><br><span class=\"line\">   do_start</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">stop)</span><br><span class=\"line\">   do_stop</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">status)</span><br><span class=\"line\">  <span class=\"built_in\">exit</span> $?</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">restart)</span><br><span class=\"line\">  do_restart</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage: service aria2c &#123;start|stop|status|restart&#125;&quot;</span> &gt;&amp;2</span><br><span class=\"line\">   <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">   ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /etc/init.d/aria2c</span><br><span class=\"line\">sudo update-rc.d aria2c defaults</span><br><span class=\"line\">sudo service aria2c start</span><br></pre></td></tr></table></figure>\n\n<p>这个时候aria2已经添加到开机启动并已经启动<br>以后想要管理aria2只需要输入对应命令即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启动aria2服务</span></span><br><span class=\"line\">sudo service aria2c start </span><br><span class=\"line\"><span class=\"comment\">#停止aria2服务</span></span><br><span class=\"line\">sudo service aria2c stop </span><br><span class=\"line\"><span class=\"comment\">#查看aria2服务状态</span></span><br><span class=\"line\">sudo service aria2c status </span><br></pre></td></tr></table></figure>\n<p>同样的命令把aria2c替换成其他名称用来管理samba和等下要装的frp都是可以的  </p>\n<blockquote>\n<p>参考：<a href=\"https://www.jianshu.com/p/03f8022453a5\">https://www.jianshu.com/p/03f8022453a5</a></p>\n</blockquote>\n<ul>\n<li><h2 id=\"网页前端（lighttpd和ariaNg）\"><a href=\"#网页前端（lighttpd和ariaNg）\" class=\"headerlink\" title=\"网页前端（lighttpd和ariaNg）\"></a>网页前端（lighttpd和<a href=\"http://ariang.mayswind.net/zh_Hans/\">ariaNg</a>）</h2></li>\n</ul>\n<p>安装lighttpd并设为默认启动：  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install lighttpd -y</span><br><span class=\"line\">sudo update-rc.d lighttpd defaults</span><br></pre></td></tr></table></figure>\n\n<p>安装好lighttpd后默认已经开启网页服务，接下来放aria2前端</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /var/www/html</span><br><span class=\"line\">sudo wget https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip</span><br><span class=\"line\">sudo unzip aria-ng-0.4.0.zip</span><br><span class=\"line\"><span class=\"comment\">#顺便删除压缩包</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> aria-ng-0.4.0.zip</span><br></pre></td></tr></table></figure>\n\n<p>现在用浏览器打开树莓派IP，你就可以看到一个漂亮的前端,以后就用它管理下载<br>至此，一个内网NAS已经搭建完成，轻量化，超小占用。<br>当然还没完，我们要做的是能从外网访问的下载器。<br></br></p>\n<h1 id=\"第三部分：内网穿透frp\"><a href=\"#第三部分：内网穿透frp\" class=\"headerlink\" title=\"第三部分：内网穿透frp\"></a><strong>第三部分：内网穿透frp</strong></h1><p>关于frp</p>\n<p>英文全称：fast reverse proxy<br>中文全称：快速反向代理<br>简称：frp<br>frp 是一个可用于内网穿透的高性能反向代理应用，支持 tcp, udp, http, https 协议.</p>\n<p>frp 的作用<br>利用处于内网或防火墙后的机器，对外网环境提供 http 或 https 服务。<br>对于 http, https 服务支持基于域名的虚拟主机，支持自定义域名绑定，使多个域名可以共用一个80端口。<br>利用处于内网或防火墙后的机器，对外网环境提供 tcp 和 udp 服务，例如在家里通过 ssh 访问处于公司内网环境内的主机。</p>\n<p>frp为免费且开源项目，需要自己利用一台拥有公网IP机器搭建服务端，以部署内网穿透项目。</p>\n<p>项目链接：<a href=\"https://github.com/fatedier/frp/\">https://github.com/fatedier/frp/</a></p>\n<p>科普完了,没有公网IP服务器的童鞋这里推荐一个免费的公共服务:<a href=\"https://www.nat.ee/\">https://www.nat.ee/</a></p>\n<ul>\n<li><h2 id=\"frp客户端安装\"><a href=\"#frp客户端安装\" class=\"headerlink\" title=\"frp客户端安装\"></a>frp客户端安装</h2></li>\n</ul>\n<p>可以自己到<a href=\"http://github.com/fatedier/frp/releases\">releases</a>页面找最新版链接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~</span><br><span class=\"line\">wget http://github.com/fatedier/frp/releases/download/v0.16.0/frp_0.16.0_linux_arm.tar.gz</span><br><span class=\"line\">tar -xvf frp_0.16.0_linux_arm.tar.gz</span><br><span class=\"line\">sudo <span class=\"built_in\">mv</span> frp_0.16.0_linux_arm/ /etc/frp</span><br></pre></td></tr></table></figure>\n\n<p>编辑配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure>\n\n<p>根据nat.ee提供的配置文件,这里提供一个http的例子<br>把中文都换掉,自定义域太简单可能会因为被占用无法启动,记得换个复杂点的</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#http-自定义配置-示例</span></span><br><span class=\"line\">[common]</span><br><span class=\"line\">server_addr = nat.ee</span><br><span class=\"line\">server_port = 7000</span><br><span class=\"line\">privilege_token = www.nat.ee</span><br><span class=\"line\">user = 自定义用户名称</span><br><span class=\"line\"></span><br><span class=\"line\">[自定义服务名称]</span><br><span class=\"line\"><span class=\"built_in\">type</span> = http</span><br><span class=\"line\">local_port = 80</span><br><span class=\"line\">local_ip = 127.0.0.1</span><br><span class=\"line\">custom_domains = 自定义域.nat.ee</span><br><span class=\"line\">```  </span><br><span class=\"line\"></span><br><span class=\"line\">Ctrl+O保存，Ctrl+X退出  </span><br><span class=\"line\">测试一下是否运行正常:  </span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">sudo /etc/frp/frpc -c /etc/frp/frpc.ini</span><br></pre></td></tr></table></figure>\n\n<p>如果输出结果带有”start proxy success”则表示连接成功<br>Ctrl+C关闭<br>添加frp为服务并自动启动:<br>(我在里面加了判断网络是否连接的脚本”net_ts”,终于解决了开机启动时没网络导致启动失败的问题)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">tee</span> /etc/init.d/frp &lt;&lt;-<span class=\"string\">&#x27;EOF&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### BEGIN INIT INFO</span></span><br><span class=\"line\"><span class=\"comment\"># Provides:         frp</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Start:    $network $local_fs $remote_fs $named $portmap $syslog</span></span><br><span class=\"line\"><span class=\"comment\"># Required-Stop::    $network $local_fs $remote_fs</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Start:     2 3 4 5</span></span><br><span class=\"line\"><span class=\"comment\"># Default-Stop:      0 1 6</span></span><br><span class=\"line\"><span class=\"comment\"># Short-Description: Start frp at boot time</span></span><br><span class=\"line\"><span class=\"comment\"># Description:       A porxy clint</span></span><br><span class=\"line\"><span class=\"comment\">### END INIT INFO</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">net_ts</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">#超时时间</span></span><br><span class=\"line\">    <span class=\"built_in\">timeout</span>=5</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#目标网站</span></span><br><span class=\"line\">    target=baidu.com</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#获取响应状态码</span></span><br><span class=\"line\">    ret_code=`curl -I -s --connect-timeout <span class=\"variable\">$timeout</span> <span class=\"variable\">$target</span> -w %&#123;http_code&#125; | <span class=\"built_in\">tail</span> -n1`</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;x<span class=\"variable\">$ret_code</span>&quot;</span> = <span class=\"string\">&quot;x200&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> 网络畅通</span><br><span class=\"line\">\tnetstate=<span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> 网络不畅通</span><br><span class=\"line\">\tnetstate=<span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_start</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">&quot;starting frp.&quot;</span></span><br><span class=\"line\">        /etc/frp/frpc -c /etc/frp/frpc.ini &amp;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_stop</span></span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">      pkill -f /etc/frp/frpc</span><br><span class=\"line\">      <span class=\"built_in\">echo</span> <span class=\"string\">&quot;stop complete.&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">do_restart</span></span>() &#123;</span><br><span class=\"line\">    do_stop</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\">    do_start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">start)</span><br><span class=\"line\">  net_ts</span><br><span class=\"line\"><span class=\"comment\">#这里验证网络是否连通，连通了才启动frp</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> [ <span class=\"variable\">$netstate</span> -lt 0 ];</span><br><span class=\"line\">  <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> 请检查网络，将在5秒后重试</span><br><span class=\"line\">    <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\">    net_ts</span><br><span class=\"line\">  <span class=\"keyword\">done</span></span><br><span class=\"line\">  do_start</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">stop)</span><br><span class=\"line\">   do_stop</span><br><span class=\"line\">   ;;</span><br><span class=\"line\">status)</span><br><span class=\"line\">  <span class=\"built_in\">exit</span> $?</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">restart)</span><br><span class=\"line\">  do_restart</span><br><span class=\"line\">  ;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage:service frp &#123;start|stop|restart|status&#125;&quot;</span> &gt;&amp;2</span><br><span class=\"line\">   <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">   ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /etc/init.d/frp</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo update-rc.d frp defaults</span><br><span class=\"line\">sudo service frp start</span><br></pre></td></tr></table></figure>\n\n<p>frp服务已经启动<br>现在试试能否从外网访问<br>一切正常的话你就可以从外网看到刚才那个漂亮的前端<br>开始你的下载吧<br>frp还有很多玩法，有兴趣的朋友可以去项目地址看看，有中文说明.  </p>\n<p><strong>第一次写教程,写的不好的地方请多包涵,之后我还会写在树莓派上安装hexo博客的教程,记得来看哦.</strong></p>"},{"title":"hexo new后自动打开你喜爱的编辑器","date":"2019-09-02T07:16:44.000Z","_content":"\n> 作为一个用hexo写博客的blogger，每次写文章都是件麻烦事：对我来说，要先用Code打开Hexo工作区，然后```Ctrl+` ```打开终端先pull一下，再开始`hexo new post something`，接下来去目录找到_posts，点进去打开刚创建的md，然后，才开始写文章。\n\n这篇post就是解决众多繁杂步骤中的一环：找md文件然后打开的过程。\n\n<!---more---->\n\n很简单，要做的就是写个脚本让`NodeJS`知道我什么时候新建了post，然后脚本帮我打开刚新建好的post.md，最主要的是，可以用自己喜爱的编辑器，比如说我用的是[Typora](https://typora.io/)。\n\n1. 在你的hexo目录下新建一个文件夹名叫`scripts`（你的hexo目录就是你执行hexo命令的目录）\n\n\t```bash\n\tmkdir scripts\n\tcd scripts\n\t```\n\n2. 在`scripts`文件夹里新建一个脚本文件叫做`AutoOpenEditor.js`（也可以是其他名字），内容如下：\n\n   ```js\n   let spawn = require('hexo-util/lib/spawn');\n   \n   hexo.on('new', (data) => {\n     spawn('C:/\\Program Files/\\Typora/\\Typora.exe', [data.path]);\n   });\n   ```\n\n   这几句话的大概意思就是，在检测到执行`hexo new`命令后，触发这个脚本，然后脚本执行`C:\\Program Files\\Typora\\Typora.exe [文件路径]`这个命令，`spawn()`里就是要执行的命令和参数，有斜杠的话需要用转义符。\n\n   这里我用的是Typora编辑器，你也可以让它用VScode来打开：\n\n   ```js\n   let spawn = require('hexo-util/lib/spawn');\n   \n   hexo.on('new', (data) => {\n     spawn('code','-r',[data.path]);\n   });\n   ```\n\n   这是针对在VScode里已经打开hexo目录工作区的情况，`-r`让code不打开新窗口，而是作为标签页打开。\n\n这样就可以了，以后每次`hexo new post`，都会在新建后帮你打开编辑器，虽然只是少了一小环，但是让你写博客更有动力了不是。","source":"_posts/open-your-farvorite-editor-after-new-hexo-post.md","raw":"---\ntitle: hexo new后自动打开你喜爱的编辑器\ndate: 2019-09-02 15:16:44\ntags: hexo_tricks\n---\n\n> 作为一个用hexo写博客的blogger，每次写文章都是件麻烦事：对我来说，要先用Code打开Hexo工作区，然后```Ctrl+` ```打开终端先pull一下，再开始`hexo new post something`，接下来去目录找到_posts，点进去打开刚创建的md，然后，才开始写文章。\n\n这篇post就是解决众多繁杂步骤中的一环：找md文件然后打开的过程。\n\n<!---more---->\n\n很简单，要做的就是写个脚本让`NodeJS`知道我什么时候新建了post，然后脚本帮我打开刚新建好的post.md，最主要的是，可以用自己喜爱的编辑器，比如说我用的是[Typora](https://typora.io/)。\n\n1. 在你的hexo目录下新建一个文件夹名叫`scripts`（你的hexo目录就是你执行hexo命令的目录）\n\n\t```bash\n\tmkdir scripts\n\tcd scripts\n\t```\n\n2. 在`scripts`文件夹里新建一个脚本文件叫做`AutoOpenEditor.js`（也可以是其他名字），内容如下：\n\n   ```js\n   let spawn = require('hexo-util/lib/spawn');\n   \n   hexo.on('new', (data) => {\n     spawn('C:/\\Program Files/\\Typora/\\Typora.exe', [data.path]);\n   });\n   ```\n\n   这几句话的大概意思就是，在检测到执行`hexo new`命令后，触发这个脚本，然后脚本执行`C:\\Program Files\\Typora\\Typora.exe [文件路径]`这个命令，`spawn()`里就是要执行的命令和参数，有斜杠的话需要用转义符。\n\n   这里我用的是Typora编辑器，你也可以让它用VScode来打开：\n\n   ```js\n   let spawn = require('hexo-util/lib/spawn');\n   \n   hexo.on('new', (data) => {\n     spawn('code','-r',[data.path]);\n   });\n   ```\n\n   这是针对在VScode里已经打开hexo目录工作区的情况，`-r`让code不打开新窗口，而是作为标签页打开。\n\n这样就可以了，以后每次`hexo new post`，都会在新建后帮你打开编辑器，虽然只是少了一小环，但是让你写博客更有动力了不是。","slug":"open-your-farvorite-editor-after-new-hexo-post","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn4000h6z0h6s229y3z","content":"<blockquote>\n<p>作为一个用hexo写博客的blogger，每次写文章都是件麻烦事：对我来说，要先用Code打开Hexo工作区，然后<code>Ctrl+` </code>打开终端先pull一下，再开始<code>hexo new post something</code>，接下来去目录找到_posts，点进去打开刚创建的md，然后，才开始写文章。</p>\n</blockquote>\n<p>这篇post就是解决众多繁杂步骤中的一环：找md文件然后打开的过程。</p>\n<!---more---->\n\n<p>很简单，要做的就是写个脚本让<code>NodeJS</code>知道我什么时候新建了post，然后脚本帮我打开刚新建好的post.md，最主要的是，可以用自己喜爱的编辑器，比如说我用的是<a href=\"https://typora.io/\">Typora</a>。</p>\n<ol>\n<li><p>在你的hexo目录下新建一个文件夹名叫<code>scripts</code>（你的hexo目录就是你执行hexo命令的目录）</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> scripts</span><br><span class=\"line\"><span class=\"built_in\">cd</span> scripts</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>scripts</code>文件夹里新建一个脚本文件叫做<code>AutoOpenEditor.js</code>（也可以是其他名字），内容如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;hexo-util/lib/spawn&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">hexo.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;new&#x27;</span>, <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">spawn</span>(<span class=\"string\">&#x27;C:/\\Program Files/\\Typora/\\Typora.exe&#x27;</span>, [data.<span class=\"property\">path</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>这几句话的大概意思就是，在检测到执行<code>hexo new</code>命令后，触发这个脚本，然后脚本执行<code>C:\\Program Files\\Typora\\Typora.exe [文件路径]</code>这个命令，<code>spawn()</code>里就是要执行的命令和参数，有斜杠的话需要用转义符。</p>\n<p>这里我用的是Typora编辑器，你也可以让它用VScode来打开：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;hexo-util/lib/spawn&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">hexo.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;new&#x27;</span>, <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">spawn</span>(<span class=\"string\">&#x27;code&#x27;</span>,<span class=\"string\">&#x27;-r&#x27;</span>,[data.<span class=\"property\">path</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>这是针对在VScode里已经打开hexo目录工作区的情况，<code>-r</code>让code不打开新窗口，而是作为标签页打开。</p>\n</li>\n</ol>\n<p>这样就可以了，以后每次<code>hexo new post</code>，都会在新建后帮你打开编辑器，虽然只是少了一小环，但是让你写博客更有动力了不是。</p>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"","more":"<blockquote>\n<p>作为一个用hexo写博客的blogger，每次写文章都是件麻烦事：对我来说，要先用Code打开Hexo工作区，然后<code>Ctrl+` </code>打开终端先pull一下，再开始<code>hexo new post something</code>，接下来去目录找到_posts，点进去打开刚创建的md，然后，才开始写文章。</p>\n</blockquote>\n<p>这篇post就是解决众多繁杂步骤中的一环：找md文件然后打开的过程。</p>\n<!---more---->\n\n<p>很简单，要做的就是写个脚本让<code>NodeJS</code>知道我什么时候新建了post，然后脚本帮我打开刚新建好的post.md，最主要的是，可以用自己喜爱的编辑器，比如说我用的是<a href=\"https://typora.io/\">Typora</a>。</p>\n<ol>\n<li><p>在你的hexo目录下新建一个文件夹名叫<code>scripts</code>（你的hexo目录就是你执行hexo命令的目录）</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> scripts</span><br><span class=\"line\"><span class=\"built_in\">cd</span> scripts</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>scripts</code>文件夹里新建一个脚本文件叫做<code>AutoOpenEditor.js</code>（也可以是其他名字），内容如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;hexo-util/lib/spawn&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">hexo.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;new&#x27;</span>, <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">spawn</span>(<span class=\"string\">&#x27;C:/\\Program Files/\\Typora/\\Typora.exe&#x27;</span>, [data.<span class=\"property\">path</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>这几句话的大概意思就是，在检测到执行<code>hexo new</code>命令后，触发这个脚本，然后脚本执行<code>C:\\Program Files\\Typora\\Typora.exe [文件路径]</code>这个命令，<code>spawn()</code>里就是要执行的命令和参数，有斜杠的话需要用转义符。</p>\n<p>这里我用的是Typora编辑器，你也可以让它用VScode来打开：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> spawn = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;hexo-util/lib/spawn&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">hexo.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;new&#x27;</span>, <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">spawn</span>(<span class=\"string\">&#x27;code&#x27;</span>,<span class=\"string\">&#x27;-r&#x27;</span>,[data.<span class=\"property\">path</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>这是针对在VScode里已经打开hexo目录工作区的情况，<code>-r</code>让code不打开新窗口，而是作为标签页打开。</p>\n</li>\n</ol>\n<p>这样就可以了，以后每次<code>hexo new post</code>，都会在新建后帮你打开编辑器，虽然只是少了一小环，但是让你写博客更有动力了不是。</p>\n"},{"title":"Octo4a 更进一步：在 Android 手机上运行 Octodash","date":"2022-06-04T13:53:43.000Z","_content":"\n\n\n我们都知道使用 [Octo4a](https://github.com/feelfreelinux/octo4a) APP 可以让 Android 手机安装 [Octoprint](https://octoprint.org/)（如果不知道的话去看看 [[YouTube]How to run OctoPrint on your phone!](https://www.youtube.com/watch?v=74xdib_-X38&ab_channel=ThomasSanladerer)），从而使用手机就可以控制你的 3D 打印机。但是要想在手机上操作打印机或者查看打印状态，还是只能通过打开 Octoprint 的管理网页来实现，虽然安装了 Custom UI 后可以优化在手机上的显示排版，但是始终还是需要滚动来看到更多信息，如果 [Octodash](https://unchartedbull.github.io/OctoDash/index.html) 也能运行在手机上的话，那就能好看和方便很多。如今我做到了，所以我和大家分享一下我的步骤，希望能够帮到你。\n\n![IMG_3031](use-octodash-on-your-android-phone/IMG_3031.jpeg)\n\n<!--more-->\n\n## 思路\n\n1. 你需要一个已经安装且配置完成的 Octoprint 在你的 Android 手机上\n2. 在手机上安装 [Termux](https://termux.com/)\n3. 在 Termux 中安装 Debain 系统的 chroot 版本\n4. 在 Debain 系统中安装 Octodash\n5. 在手机上安装 Xserver XSDL\n6. 测试在 Termux 中运行 Debain 下的 Octodash\n7. 在 Termux 中添加 Octodash 为服务，并开启自动启动\n8. 完成，在 Xserver XSDL 中使用 Octodash\n\n## 开始\n\n### 安装 Termux\n\n从  [`Github Releases`](https://github.com/termux/termux-app/releases) 下载安装最新版 Termux，有能力的话可以开启 `SSH` 服务器，方便从电脑上进行接下来的操作。\n\n### 安装并进入 Debain 系统\n\n```sh\npkg install proot-distro\nproot-distro install debian\nproot-distro login debian --termux-home\n```\n\n### 安装 Octodash\n\n- 安装依赖\n\n    对[安装指导](https://github.com/UnchartedBull/OctoDash/wiki/Installation#manual-installation)的命令作了一些修改以适应当前系统\n    \n    ```sh\n    apt update -y\n    apt install -y libgtk-3-0 libnotify4 libnss3 libxss1 libxtst6 xdg-utils libatspi2.0-0 libuuid1 libsecret-1-0 libasound2 libgirepository-1.0-1 gir1.2-glib-2.0 libayatana-appindicator3-1\n    ```\n    \n- 下载并安装最新版的 Octodash（替换下载链接为 [`Github Releases`](https://github.com/UnchartedBull/OctoDash/releases) 页面上最新版本的链接）\n\n    ```sh\n    wget -O octodash.deb https://github.com/UnchartedBull/OctoDash/releases/download/v2.3.1/octodash_2.3.1_arm64.deb\n    dpkg -i octodash.deb\n    ```\n\n- 安装 Xserver\n\n    ```sh\n    apt install -y xserver-xorg x11-xserver-utils xinit libgtk-3-0\n    ```\n\n### 安装 Xserver XSDL\n\n从  [`Google Play Store`](https://play.google.com/store/apps/details?id=x.org.server) 安装最新版 Xserver XSDL\n\n安装好后打开 APP，在初始化页面上点击 `更改设备配置` -> `鼠标模拟` -> `鼠标仿真模式` ，选择 `桌面版，无仿真`。\n\n完成后返回启动页面，等待启动完成后记下端口号，比如我的是 `4713`\n\n![Screenshot_2022-06-03-19-54-14-504_x.org.server](use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg)\n\n### 测试 Octodash\n\n回到 Termux 下的 Debian 系统中，创建脚本文件（如果不一样，替换端口号为你的端口号）\n\n```sh\ncat << EOF > /root/startdash.sh\n#!/bin/bash\nexport DISPLAY=127.0.0.1:0\nexport PLUSE_SERVER=tcp:127.0.0.1:4713\n\noctodash --no-sandbox 2>&1\nEOF\nchmod +x /root/startdash.sh\n```\n\n 运行脚本文件以测试 Octodash 是否正常运行\n\n```sh\n/root/startdash.sh\n```\n\n看到有信息输出且没有报错的话，切回 Xserver XSDL APP 查看此时是否显示了 Octodash 的初始页面\n\n![OctoPi with OctoDash on RPi 4 with HyperPixel 4.0 - Maurice Kevenaar's  Techblog](use-octodash-on-your-android-phone/332-OctoDashSetup-01.png)\n\n看到的话先不着急进行设置，测试通过后还需要下一步，把 Octodash 添加到 Termux 的服务中保证后台运行\n\n### 配置 Octodash 服务\n\n先 `Ctrl+C` 退出当前脚本，然后 `Ctrl+D` 退出当前终端，回到 Termux 终端后，继续后面的操作\n\n确保已经回到 Termux 系统后，安装 termux-services 包，使 Termux 支持服务\n\n```sh\npkg install termux-services\n```\n\n为 Octodash 创建服务\n\n```sh\nmkdir -p $PREFIX/var/service/octodash/log\nln -sf $PREFIX/share/termux-services/svlogger $PREFIX/var/service/octodash/log/run\ncat << EOF > $PREFIX/var/service/octodash/run\n#!/data/data/com.termux/files/usr/bin/sh\nexec proot-distro login debian --termux-home -- /root/startdash.sh\nEOF\nchmod +x $PREFIX/var/service/octodash/run\n```\n\n启动 Octodash 服务，并设置为自动启动\n\n```sh\nsv up octodash\nsv-enable octodash\n```\n\n> 日志文件位于 `$PREFIX/var/log/sv/octodash/current` \n>\n> `sv` 可以进行的操作\n>\n> ```\n> sv up octodash #启动服务\n> sv down octodash #停止服务\n> sv-disable octodash #关闭服务自动启动\n> ```\n\n### 完成\n\n现在可以回到 Xserver XSDL APP，继续 Octodash 的初始化，配置完成后就可以看到这样的界面\n\n> 如果打印机地址填写 127.0.0.1:5000 无法成功添加打印机的话，输入手机的内网 IP 进行连接即可成功添加\n\n![Screenshot_2022-06-03-17-06-38-324_x.org.server](use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg)\n\n大功告成，如果你也成功了，欢迎在评论区分享你的成果！\n\n## Notes\n\n在配置的过程中总结了一些问题的经验和提示：\n\n- 如果你的手机没有电池保护功能，会一直保持充电100%的话，过不久你的电池就会鼓包。建议下载 [Scene 4](https://github.com/helloklf/vtools) 手机管理工具，在工具中可以调整电池的充电策略，充电至90%后就停止充电，直道降至70%再继续充电，达到保护电池的目的。下载链接: https://github.com/helloklf/vtools/releases\n\n- Octo4a自带的 Webcam 服务器使用起来有以下问题（MI6 遇到的）：\n\n  - 无法设置分辨率，快照分辨率极低，导致生成的延时视频也是分辨率极低\n  - 可以设置视频时开启闪光灯，却不能设置快照时开启\n  - 每次触发快照都会发出相机的卡擦声，静音也无法关闭\n\n  综上我最后使用了单独的 Webcam 软件: [IP Webcam](https://play.google.com/store/apps/details?id=com.pas.webcam)，解决了以上的问题，它还可以在网页上修改配置，非常方便\n\n  > 如果你也更换了视频源，记得同时更新 Octodash 中的系统设置和延时插件的设置\n\n- 这篇文章提到的每一个 APP 都要设置后台锁定，且在关闭这几个 APP 的省电策略，以保持一直后台运行。\n","source":"_posts/use-octodash-on-your-android-phone.md","raw":"---\ntitle: Octo4a 更进一步：在 Android 手机上运行 Octodash\ndate: 2022-06-04 21:53:43\ntags: \n - 3D\n - Octoprint\n---\n\n\n\n我们都知道使用 [Octo4a](https://github.com/feelfreelinux/octo4a) APP 可以让 Android 手机安装 [Octoprint](https://octoprint.org/)（如果不知道的话去看看 [[YouTube]How to run OctoPrint on your phone!](https://www.youtube.com/watch?v=74xdib_-X38&ab_channel=ThomasSanladerer)），从而使用手机就可以控制你的 3D 打印机。但是要想在手机上操作打印机或者查看打印状态，还是只能通过打开 Octoprint 的管理网页来实现，虽然安装了 Custom UI 后可以优化在手机上的显示排版，但是始终还是需要滚动来看到更多信息，如果 [Octodash](https://unchartedbull.github.io/OctoDash/index.html) 也能运行在手机上的话，那就能好看和方便很多。如今我做到了，所以我和大家分享一下我的步骤，希望能够帮到你。\n\n![IMG_3031](use-octodash-on-your-android-phone/IMG_3031.jpeg)\n\n<!--more-->\n\n## 思路\n\n1. 你需要一个已经安装且配置完成的 Octoprint 在你的 Android 手机上\n2. 在手机上安装 [Termux](https://termux.com/)\n3. 在 Termux 中安装 Debain 系统的 chroot 版本\n4. 在 Debain 系统中安装 Octodash\n5. 在手机上安装 Xserver XSDL\n6. 测试在 Termux 中运行 Debain 下的 Octodash\n7. 在 Termux 中添加 Octodash 为服务，并开启自动启动\n8. 完成，在 Xserver XSDL 中使用 Octodash\n\n## 开始\n\n### 安装 Termux\n\n从  [`Github Releases`](https://github.com/termux/termux-app/releases) 下载安装最新版 Termux，有能力的话可以开启 `SSH` 服务器，方便从电脑上进行接下来的操作。\n\n### 安装并进入 Debain 系统\n\n```sh\npkg install proot-distro\nproot-distro install debian\nproot-distro login debian --termux-home\n```\n\n### 安装 Octodash\n\n- 安装依赖\n\n    对[安装指导](https://github.com/UnchartedBull/OctoDash/wiki/Installation#manual-installation)的命令作了一些修改以适应当前系统\n    \n    ```sh\n    apt update -y\n    apt install -y libgtk-3-0 libnotify4 libnss3 libxss1 libxtst6 xdg-utils libatspi2.0-0 libuuid1 libsecret-1-0 libasound2 libgirepository-1.0-1 gir1.2-glib-2.0 libayatana-appindicator3-1\n    ```\n    \n- 下载并安装最新版的 Octodash（替换下载链接为 [`Github Releases`](https://github.com/UnchartedBull/OctoDash/releases) 页面上最新版本的链接）\n\n    ```sh\n    wget -O octodash.deb https://github.com/UnchartedBull/OctoDash/releases/download/v2.3.1/octodash_2.3.1_arm64.deb\n    dpkg -i octodash.deb\n    ```\n\n- 安装 Xserver\n\n    ```sh\n    apt install -y xserver-xorg x11-xserver-utils xinit libgtk-3-0\n    ```\n\n### 安装 Xserver XSDL\n\n从  [`Google Play Store`](https://play.google.com/store/apps/details?id=x.org.server) 安装最新版 Xserver XSDL\n\n安装好后打开 APP，在初始化页面上点击 `更改设备配置` -> `鼠标模拟` -> `鼠标仿真模式` ，选择 `桌面版，无仿真`。\n\n完成后返回启动页面，等待启动完成后记下端口号，比如我的是 `4713`\n\n![Screenshot_2022-06-03-19-54-14-504_x.org.server](use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg)\n\n### 测试 Octodash\n\n回到 Termux 下的 Debian 系统中，创建脚本文件（如果不一样，替换端口号为你的端口号）\n\n```sh\ncat << EOF > /root/startdash.sh\n#!/bin/bash\nexport DISPLAY=127.0.0.1:0\nexport PLUSE_SERVER=tcp:127.0.0.1:4713\n\noctodash --no-sandbox 2>&1\nEOF\nchmod +x /root/startdash.sh\n```\n\n 运行脚本文件以测试 Octodash 是否正常运行\n\n```sh\n/root/startdash.sh\n```\n\n看到有信息输出且没有报错的话，切回 Xserver XSDL APP 查看此时是否显示了 Octodash 的初始页面\n\n![OctoPi with OctoDash on RPi 4 with HyperPixel 4.0 - Maurice Kevenaar's  Techblog](use-octodash-on-your-android-phone/332-OctoDashSetup-01.png)\n\n看到的话先不着急进行设置，测试通过后还需要下一步，把 Octodash 添加到 Termux 的服务中保证后台运行\n\n### 配置 Octodash 服务\n\n先 `Ctrl+C` 退出当前脚本，然后 `Ctrl+D` 退出当前终端，回到 Termux 终端后，继续后面的操作\n\n确保已经回到 Termux 系统后，安装 termux-services 包，使 Termux 支持服务\n\n```sh\npkg install termux-services\n```\n\n为 Octodash 创建服务\n\n```sh\nmkdir -p $PREFIX/var/service/octodash/log\nln -sf $PREFIX/share/termux-services/svlogger $PREFIX/var/service/octodash/log/run\ncat << EOF > $PREFIX/var/service/octodash/run\n#!/data/data/com.termux/files/usr/bin/sh\nexec proot-distro login debian --termux-home -- /root/startdash.sh\nEOF\nchmod +x $PREFIX/var/service/octodash/run\n```\n\n启动 Octodash 服务，并设置为自动启动\n\n```sh\nsv up octodash\nsv-enable octodash\n```\n\n> 日志文件位于 `$PREFIX/var/log/sv/octodash/current` \n>\n> `sv` 可以进行的操作\n>\n> ```\n> sv up octodash #启动服务\n> sv down octodash #停止服务\n> sv-disable octodash #关闭服务自动启动\n> ```\n\n### 完成\n\n现在可以回到 Xserver XSDL APP，继续 Octodash 的初始化，配置完成后就可以看到这样的界面\n\n> 如果打印机地址填写 127.0.0.1:5000 无法成功添加打印机的话，输入手机的内网 IP 进行连接即可成功添加\n\n![Screenshot_2022-06-03-17-06-38-324_x.org.server](use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg)\n\n大功告成，如果你也成功了，欢迎在评论区分享你的成果！\n\n## Notes\n\n在配置的过程中总结了一些问题的经验和提示：\n\n- 如果你的手机没有电池保护功能，会一直保持充电100%的话，过不久你的电池就会鼓包。建议下载 [Scene 4](https://github.com/helloklf/vtools) 手机管理工具，在工具中可以调整电池的充电策略，充电至90%后就停止充电，直道降至70%再继续充电，达到保护电池的目的。下载链接: https://github.com/helloklf/vtools/releases\n\n- Octo4a自带的 Webcam 服务器使用起来有以下问题（MI6 遇到的）：\n\n  - 无法设置分辨率，快照分辨率极低，导致生成的延时视频也是分辨率极低\n  - 可以设置视频时开启闪光灯，却不能设置快照时开启\n  - 每次触发快照都会发出相机的卡擦声，静音也无法关闭\n\n  综上我最后使用了单独的 Webcam 软件: [IP Webcam](https://play.google.com/store/apps/details?id=com.pas.webcam)，解决了以上的问题，它还可以在网页上修改配置，非常方便\n\n  > 如果你也更换了视频源，记得同时更新 Octodash 中的系统设置和延时插件的设置\n\n- 这篇文章提到的每一个 APP 都要设置后台锁定，且在关闭这几个 APP 的省电策略，以保持一直后台运行。\n","slug":"use-octodash-on-your-android-phone","published":1,"updated":"2022-06-04T15:44:55.180Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn4000j6z0h90hdh9cb","content":"<p>我们都知道使用 <a href=\"https://github.com/feelfreelinux/octo4a\">Octo4a</a> APP 可以让 Android 手机安装 <a href=\"https://octoprint.org/\">Octoprint</a>（如果不知道的话去看看 <a href=\"https://www.youtube.com/watch?v=74xdib_-X38&ab_channel=ThomasSanladerer\">[YouTube]How to run OctoPrint on your phone!</a>），从而使用手机就可以控制你的 3D 打印机。但是要想在手机上操作打印机或者查看打印状态，还是只能通过打开 Octoprint 的管理网页来实现，虽然安装了 Custom UI 后可以优化在手机上的显示排版，但是始终还是需要滚动来看到更多信息，如果 <a href=\"https://unchartedbull.github.io/OctoDash/index.html\">Octodash</a> 也能运行在手机上的话，那就能好看和方便很多。如今我做到了，所以我和大家分享一下我的步骤，希望能够帮到你。</p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/IMG_3031.jpeg\" alt=\"IMG_3031\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><ol>\n<li>你需要一个已经安装且配置完成的 Octoprint 在你的 Android 手机上</li>\n<li>在手机上安装 <a href=\"https://termux.com/\">Termux</a></li>\n<li>在 Termux 中安装 Debain 系统的 chroot 版本</li>\n<li>在 Debain 系统中安装 Octodash</li>\n<li>在手机上安装 Xserver XSDL</li>\n<li>测试在 Termux 中运行 Debain 下的 Octodash</li>\n<li>在 Termux 中添加 Octodash 为服务，并开启自动启动</li>\n<li>完成，在 Xserver XSDL 中使用 Octodash</li>\n</ol>\n<h2 id=\"开始\"><a href=\"#开始\" class=\"headerlink\" title=\"开始\"></a>开始</h2><h3 id=\"安装-Termux\"><a href=\"#安装-Termux\" class=\"headerlink\" title=\"安装 Termux\"></a>安装 Termux</h3><p>从  <a href=\"https://github.com/termux/termux-app/releases\"><code>Github Releases</code></a> 下载安装最新版 Termux，有能力的话可以开启 <code>SSH</code> 服务器，方便从电脑上进行接下来的操作。</p>\n<h3 id=\"安装并进入-Debain-系统\"><a href=\"#安装并进入-Debain-系统\" class=\"headerlink\" title=\"安装并进入 Debain 系统\"></a>安装并进入 Debain 系统</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install proot-distro</span><br><span class=\"line\">proot-distro install debian</span><br><span class=\"line\">proot-distro login debian --termux-home</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装-Octodash\"><a href=\"#安装-Octodash\" class=\"headerlink\" title=\"安装 Octodash\"></a>安装 Octodash</h3><ul>\n<li><p>安装依赖</p>\n<p>  对<a href=\"https://github.com/UnchartedBull/OctoDash/wiki/Installation#manual-installation\">安装指导</a>的命令作了一些修改以适应当前系统</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt update -y</span><br><span class=\"line\">apt install -y libgtk-3-0 libnotify4 libnss3 libxss1 libxtst6 xdg-utils libatspi2.0-0 libuuid1 libsecret-1-0 libasound2 libgirepository-1.0-1 gir1.2-glib-2.0 libayatana-appindicator3-1</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载并安装最新版的 Octodash（替换下载链接为 <a href=\"https://github.com/UnchartedBull/OctoDash/releases\"><code>Github Releases</code></a> 页面上最新版本的链接）</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O octodash.deb https://github.com/UnchartedBull/OctoDash/releases/download/v2.3.1/octodash_2.3.1_arm64.deb</span><br><span class=\"line\">dpkg -i octodash.deb</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 Xserver</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt install -y xserver-xorg x11-xserver-utils xinit libgtk-3-0</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"安装-Xserver-XSDL\"><a href=\"#安装-Xserver-XSDL\" class=\"headerlink\" title=\"安装 Xserver XSDL\"></a>安装 Xserver XSDL</h3><p>从  <a href=\"https://play.google.com/store/apps/details?id=x.org.server\"><code>Google Play Store</code></a> 安装最新版 Xserver XSDL</p>\n<p>安装好后打开 APP，在初始化页面上点击 <code>更改设备配置</code> -&gt; <code>鼠标模拟</code> -&gt; <code>鼠标仿真模式</code> ，选择 <code>桌面版，无仿真</code>。</p>\n<p>完成后返回启动页面，等待启动完成后记下端口号，比如我的是 <code>4713</code></p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg\" alt=\"Screenshot_2022-06-03-19-54-14-504_x.org.server\"></p>\n<h3 id=\"测试-Octodash\"><a href=\"#测试-Octodash\" class=\"headerlink\" title=\"测试 Octodash\"></a>测试 Octodash</h3><p>回到 Termux 下的 Debian 系统中，创建脚本文件（如果不一样，替换端口号为你的端口号）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> &lt;&lt; <span class=\"string\">EOF &gt; /root/startdash.sh</span></span><br><span class=\"line\"><span class=\"string\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"string\">export DISPLAY=127.0.0.1:0</span></span><br><span class=\"line\"><span class=\"string\">export PLUSE_SERVER=tcp:127.0.0.1:4713</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">octodash --no-sandbox 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x /root/startdash.sh</span><br></pre></td></tr></table></figure>\n\n<p> 运行脚本文件以测试 Octodash 是否正常运行</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/root/startdash.sh</span><br></pre></td></tr></table></figure>\n\n<p>看到有信息输出且没有报错的话，切回 Xserver XSDL APP 查看此时是否显示了 Octodash 的初始页面</p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/332-OctoDashSetup-01.png\" alt=\"OctoPi with OctoDash on RPi 4 with HyperPixel 4.0 - Maurice Kevenaar&#39;s  Techblog\"></p>\n<p>看到的话先不着急进行设置，测试通过后还需要下一步，把 Octodash 添加到 Termux 的服务中保证后台运行</p>\n<h3 id=\"配置-Octodash-服务\"><a href=\"#配置-Octodash-服务\" class=\"headerlink\" title=\"配置 Octodash 服务\"></a>配置 Octodash 服务</h3><p>先 <code>Ctrl+C</code> 退出当前脚本，然后 <code>Ctrl+D</code> 退出当前终端，回到 Termux 终端后，继续后面的操作</p>\n<p>确保已经回到 Termux 系统后，安装 termux-services 包，使 Termux 支持服务</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install termux-services</span><br></pre></td></tr></table></figure>\n\n<p>为 Octodash 创建服务</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p <span class=\"variable\">$PREFIX</span>/var/service/octodash/log</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -sf <span class=\"variable\">$PREFIX</span>/share/termux-services/svlogger <span class=\"variable\">$PREFIX</span>/var/service/octodash/log/run</span><br><span class=\"line\"><span class=\"built_in\">cat</span> &lt;&lt; <span class=\"string\">EOF &gt; $PREFIX/var/service/octodash/run</span></span><br><span class=\"line\"><span class=\"string\">#!/data/data/com.termux/files/usr/bin/sh</span></span><br><span class=\"line\"><span class=\"string\">exec proot-distro login debian --termux-home -- /root/startdash.sh</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x <span class=\"variable\">$PREFIX</span>/var/service/octodash/run</span><br></pre></td></tr></table></figure>\n\n<p>启动 Octodash 服务，并设置为自动启动</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sv up octodash</span><br><span class=\"line\">sv-enable octodash</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>日志文件位于 <code>$PREFIX/var/log/sv/octodash/current</code> </p>\n<p><code>sv</code> 可以进行的操作</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sv</span> up octodash <span class=\"comment\">#启动服务</span></span><br><span class=\"line\"><span class=\"built_in\">sv</span> down octodash <span class=\"comment\">#停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sv</span><span class=\"literal\">-disable</span> octodash <span class=\"comment\">#关闭服务自动启动</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"完成\"><a href=\"#完成\" class=\"headerlink\" title=\"完成\"></a>完成</h3><p>现在可以回到 Xserver XSDL APP，继续 Octodash 的初始化，配置完成后就可以看到这样的界面</p>\n<blockquote>\n<p>如果打印机地址填写 127.0.0.1:5000 无法成功添加打印机的话，输入手机的内网 IP 进行连接即可成功添加</p>\n</blockquote>\n<p><img data-src=\"/use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg\" alt=\"Screenshot_2022-06-03-17-06-38-324_x.org.server\"></p>\n<p>大功告成，如果你也成功了，欢迎在评论区分享你的成果！</p>\n<h2 id=\"Notes\"><a href=\"#Notes\" class=\"headerlink\" title=\"Notes\"></a>Notes</h2><p>在配置的过程中总结了一些问题的经验和提示：</p>\n<ul>\n<li><p>如果你的手机没有电池保护功能，会一直保持充电100%的话，过不久你的电池就会鼓包。建议下载 <a href=\"https://github.com/helloklf/vtools\">Scene 4</a> 手机管理工具，在工具中可以调整电池的充电策略，充电至90%后就停止充电，直道降至70%再继续充电，达到保护电池的目的。下载链接: <a href=\"https://github.com/helloklf/vtools/releases\">https://github.com/helloklf/vtools/releases</a></p>\n</li>\n<li><p>Octo4a自带的 Webcam 服务器使用起来有以下问题（MI6 遇到的）：</p>\n<ul>\n<li>无法设置分辨率，快照分辨率极低，导致生成的延时视频也是分辨率极低</li>\n<li>可以设置视频时开启闪光灯，却不能设置快照时开启</li>\n<li>每次触发快照都会发出相机的卡擦声，静音也无法关闭</li>\n</ul>\n<p>综上我最后使用了单独的 Webcam 软件: <a href=\"https://play.google.com/store/apps/details?id=com.pas.webcam\">IP Webcam</a>，解决了以上的问题，它还可以在网页上修改配置，非常方便</p>\n<blockquote>\n<p>如果你也更换了视频源，记得同时更新 Octodash 中的系统设置和延时插件的设置</p>\n</blockquote>\n</li>\n<li><p>这篇文章提到的每一个 APP 都要设置后台锁定，且在关闭这几个 APP 的省电策略，以保持一直后台运行。</p>\n</li>\n</ul>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>我们都知道使用 <a href=\"https://github.com/feelfreelinux/octo4a\">Octo4a</a> APP 可以让 Android 手机安装 <a href=\"https://octoprint.org/\">Octoprint</a>（如果不知道的话去看看 <a href=\"https://www.youtube.com/watch?v=74xdib_-X38&ab_channel=ThomasSanladerer\">[YouTube]How to run OctoPrint on your phone!</a>），从而使用手机就可以控制你的 3D 打印机。但是要想在手机上操作打印机或者查看打印状态，还是只能通过打开 Octoprint 的管理网页来实现，虽然安装了 Custom UI 后可以优化在手机上的显示排版，但是始终还是需要滚动来看到更多信息，如果 <a href=\"https://unchartedbull.github.io/OctoDash/index.html\">Octodash</a> 也能运行在手机上的话，那就能好看和方便很多。如今我做到了，所以我和大家分享一下我的步骤，希望能够帮到你。</p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/IMG_3031.jpeg\" alt=\"IMG_3031\"></p>","more":"<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><ol>\n<li>你需要一个已经安装且配置完成的 Octoprint 在你的 Android 手机上</li>\n<li>在手机上安装 <a href=\"https://termux.com/\">Termux</a></li>\n<li>在 Termux 中安装 Debain 系统的 chroot 版本</li>\n<li>在 Debain 系统中安装 Octodash</li>\n<li>在手机上安装 Xserver XSDL</li>\n<li>测试在 Termux 中运行 Debain 下的 Octodash</li>\n<li>在 Termux 中添加 Octodash 为服务，并开启自动启动</li>\n<li>完成，在 Xserver XSDL 中使用 Octodash</li>\n</ol>\n<h2 id=\"开始\"><a href=\"#开始\" class=\"headerlink\" title=\"开始\"></a>开始</h2><h3 id=\"安装-Termux\"><a href=\"#安装-Termux\" class=\"headerlink\" title=\"安装 Termux\"></a>安装 Termux</h3><p>从  <a href=\"https://github.com/termux/termux-app/releases\"><code>Github Releases</code></a> 下载安装最新版 Termux，有能力的话可以开启 <code>SSH</code> 服务器，方便从电脑上进行接下来的操作。</p>\n<h3 id=\"安装并进入-Debain-系统\"><a href=\"#安装并进入-Debain-系统\" class=\"headerlink\" title=\"安装并进入 Debain 系统\"></a>安装并进入 Debain 系统</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install proot-distro</span><br><span class=\"line\">proot-distro install debian</span><br><span class=\"line\">proot-distro login debian --termux-home</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装-Octodash\"><a href=\"#安装-Octodash\" class=\"headerlink\" title=\"安装 Octodash\"></a>安装 Octodash</h3><ul>\n<li><p>安装依赖</p>\n<p>  对<a href=\"https://github.com/UnchartedBull/OctoDash/wiki/Installation#manual-installation\">安装指导</a>的命令作了一些修改以适应当前系统</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt update -y</span><br><span class=\"line\">apt install -y libgtk-3-0 libnotify4 libnss3 libxss1 libxtst6 xdg-utils libatspi2.0-0 libuuid1 libsecret-1-0 libasound2 libgirepository-1.0-1 gir1.2-glib-2.0 libayatana-appindicator3-1</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载并安装最新版的 Octodash（替换下载链接为 <a href=\"https://github.com/UnchartedBull/OctoDash/releases\"><code>Github Releases</code></a> 页面上最新版本的链接）</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O octodash.deb https://github.com/UnchartedBull/OctoDash/releases/download/v2.3.1/octodash_2.3.1_arm64.deb</span><br><span class=\"line\">dpkg -i octodash.deb</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 Xserver</p>\n  <figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt install -y xserver-xorg x11-xserver-utils xinit libgtk-3-0</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"安装-Xserver-XSDL\"><a href=\"#安装-Xserver-XSDL\" class=\"headerlink\" title=\"安装 Xserver XSDL\"></a>安装 Xserver XSDL</h3><p>从  <a href=\"https://play.google.com/store/apps/details?id=x.org.server\"><code>Google Play Store</code></a> 安装最新版 Xserver XSDL</p>\n<p>安装好后打开 APP，在初始化页面上点击 <code>更改设备配置</code> -&gt; <code>鼠标模拟</code> -&gt; <code>鼠标仿真模式</code> ，选择 <code>桌面版，无仿真</code>。</p>\n<p>完成后返回启动页面，等待启动完成后记下端口号，比如我的是 <code>4713</code></p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg\" alt=\"Screenshot_2022-06-03-19-54-14-504_x.org.server\"></p>\n<h3 id=\"测试-Octodash\"><a href=\"#测试-Octodash\" class=\"headerlink\" title=\"测试 Octodash\"></a>测试 Octodash</h3><p>回到 Termux 下的 Debian 系统中，创建脚本文件（如果不一样，替换端口号为你的端口号）</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> &lt;&lt; <span class=\"string\">EOF &gt; /root/startdash.sh</span></span><br><span class=\"line\"><span class=\"string\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"string\">export DISPLAY=127.0.0.1:0</span></span><br><span class=\"line\"><span class=\"string\">export PLUSE_SERVER=tcp:127.0.0.1:4713</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">octodash --no-sandbox 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x /root/startdash.sh</span><br></pre></td></tr></table></figure>\n\n<p> 运行脚本文件以测试 Octodash 是否正常运行</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/root/startdash.sh</span><br></pre></td></tr></table></figure>\n\n<p>看到有信息输出且没有报错的话，切回 Xserver XSDL APP 查看此时是否显示了 Octodash 的初始页面</p>\n<p><img data-src=\"/use-octodash-on-your-android-phone/332-OctoDashSetup-01.png\" alt=\"OctoPi with OctoDash on RPi 4 with HyperPixel 4.0 - Maurice Kevenaar&#39;s  Techblog\"></p>\n<p>看到的话先不着急进行设置，测试通过后还需要下一步，把 Octodash 添加到 Termux 的服务中保证后台运行</p>\n<h3 id=\"配置-Octodash-服务\"><a href=\"#配置-Octodash-服务\" class=\"headerlink\" title=\"配置 Octodash 服务\"></a>配置 Octodash 服务</h3><p>先 <code>Ctrl+C</code> 退出当前脚本，然后 <code>Ctrl+D</code> 退出当前终端，回到 Termux 终端后，继续后面的操作</p>\n<p>确保已经回到 Termux 系统后，安装 termux-services 包，使 Termux 支持服务</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install termux-services</span><br></pre></td></tr></table></figure>\n\n<p>为 Octodash 创建服务</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p <span class=\"variable\">$PREFIX</span>/var/service/octodash/log</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -sf <span class=\"variable\">$PREFIX</span>/share/termux-services/svlogger <span class=\"variable\">$PREFIX</span>/var/service/octodash/log/run</span><br><span class=\"line\"><span class=\"built_in\">cat</span> &lt;&lt; <span class=\"string\">EOF &gt; $PREFIX/var/service/octodash/run</span></span><br><span class=\"line\"><span class=\"string\">#!/data/data/com.termux/files/usr/bin/sh</span></span><br><span class=\"line\"><span class=\"string\">exec proot-distro login debian --termux-home -- /root/startdash.sh</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x <span class=\"variable\">$PREFIX</span>/var/service/octodash/run</span><br></pre></td></tr></table></figure>\n\n<p>启动 Octodash 服务，并设置为自动启动</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sv up octodash</span><br><span class=\"line\">sv-enable octodash</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>日志文件位于 <code>$PREFIX/var/log/sv/octodash/current</code> </p>\n<p><code>sv</code> 可以进行的操作</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sv</span> up octodash <span class=\"comment\">#启动服务</span></span><br><span class=\"line\"><span class=\"built_in\">sv</span> down octodash <span class=\"comment\">#停止服务</span></span><br><span class=\"line\"><span class=\"built_in\">sv</span><span class=\"literal\">-disable</span> octodash <span class=\"comment\">#关闭服务自动启动</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"完成\"><a href=\"#完成\" class=\"headerlink\" title=\"完成\"></a>完成</h3><p>现在可以回到 Xserver XSDL APP，继续 Octodash 的初始化，配置完成后就可以看到这样的界面</p>\n<blockquote>\n<p>如果打印机地址填写 127.0.0.1:5000 无法成功添加打印机的话，输入手机的内网 IP 进行连接即可成功添加</p>\n</blockquote>\n<p><img data-src=\"/use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg\" alt=\"Screenshot_2022-06-03-17-06-38-324_x.org.server\"></p>\n<p>大功告成，如果你也成功了，欢迎在评论区分享你的成果！</p>\n<h2 id=\"Notes\"><a href=\"#Notes\" class=\"headerlink\" title=\"Notes\"></a>Notes</h2><p>在配置的过程中总结了一些问题的经验和提示：</p>\n<ul>\n<li><p>如果你的手机没有电池保护功能，会一直保持充电100%的话，过不久你的电池就会鼓包。建议下载 <a href=\"https://github.com/helloklf/vtools\">Scene 4</a> 手机管理工具，在工具中可以调整电池的充电策略，充电至90%后就停止充电，直道降至70%再继续充电，达到保护电池的目的。下载链接: <a href=\"https://github.com/helloklf/vtools/releases\">https://github.com/helloklf/vtools/releases</a></p>\n</li>\n<li><p>Octo4a自带的 Webcam 服务器使用起来有以下问题（MI6 遇到的）：</p>\n<ul>\n<li>无法设置分辨率，快照分辨率极低，导致生成的延时视频也是分辨率极低</li>\n<li>可以设置视频时开启闪光灯，却不能设置快照时开启</li>\n<li>每次触发快照都会发出相机的卡擦声，静音也无法关闭</li>\n</ul>\n<p>综上我最后使用了单独的 Webcam 软件: <a href=\"https://play.google.com/store/apps/details?id=com.pas.webcam\">IP Webcam</a>，解决了以上的问题，它还可以在网页上修改配置，非常方便</p>\n<blockquote>\n<p>如果你也更换了视频源，记得同时更新 Octodash 中的系统设置和延时插件的设置</p>\n</blockquote>\n</li>\n<li><p>这篇文章提到的每一个 APP 都要设置后台锁定，且在关闭这几个 APP 的省电策略，以保持一直后台运行。</p>\n</li>\n</ul>"},{"title":"Coding绑定ssh并部署hexo","date":"2018-10-18T12:51:09.000Z","_content":"通过ssh连接git需要配置公钥，先在本地生成公钥\n\n```bash\nssh-keygen -t rsa -C \"your_email@example.com\"\n```\n\n生成在目录`~/.ssh`下面，`.ssh/id_rsa.pub`就是公钥，绑定coding的时候在设置里点添加公钥，然后复制`.pub`文件里的内容过去，<!--more-->保存后还需要认证一下：\n\n```bash\nssh -T git@git.coding.NET\n```\n\n按照提示输`yes`\ncoding会提示绑定成功\n\n```powershell\nPS D:\\Onedrive\\文档\\hexo> ssh -T git@git.coding.NET\nThe authenticity of host 'git.coding.net (118.25.***.124)' can't be established.\nRSA key fingerprint is SHA256:jok3FH7q5LJ6qvE7iPNehBgXRw51ErE77S0Dn+Vg/Ik.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'git.coding.net,118.25.***.124' (RSA) to the list of known hosts.\nCoding 提示: Hello xiaoxx97, You've connected to Coding.net via SSH. This is a personal key.\nxiaoxx97，你好，你已经通过 SSH 协议认证 Coding.net 服务，这是一个个人公钥\n```\n\n以及，如果你的项目的名称不是`你的用户名.coding.me`，虽然也可以开启静态页面，但是图片的路径会出错，导致所有图片显示不出来，要解决这个问题，绑定一个域名就好了。\n\n关于hexo的配置文件的deploy部分\n```yml\ndeploy:\n  type: git\n  repo:\n    coding: git@git.coding.net:你的用户名/项目名.git,master\n```\n`.git`后面`,master`要记得加\n还有现在coding好像在改版，项目页面复制下来的git链接域名是`git.dev.tencent.com`，而根据我现在的实践操作发现如果我不把域名换成`git.coding.net`的话是没法部署成功的，失败原因是`Host key verification failed.`\n\n如果没装过deployer要先装不然会deploy失败\n\n```bash\nnpm install hexo-deployer-git --save\n```","source":"_posts/关于coding和git的折腾.md","raw":"---\ntitle: Coding绑定ssh并部署hexo\ndate: 2018-10-18 20:51:09\ntags: note\n---\n通过ssh连接git需要配置公钥，先在本地生成公钥\n\n```bash\nssh-keygen -t rsa -C \"your_email@example.com\"\n```\n\n生成在目录`~/.ssh`下面，`.ssh/id_rsa.pub`就是公钥，绑定coding的时候在设置里点添加公钥，然后复制`.pub`文件里的内容过去，<!--more-->保存后还需要认证一下：\n\n```bash\nssh -T git@git.coding.NET\n```\n\n按照提示输`yes`\ncoding会提示绑定成功\n\n```powershell\nPS D:\\Onedrive\\文档\\hexo> ssh -T git@git.coding.NET\nThe authenticity of host 'git.coding.net (118.25.***.124)' can't be established.\nRSA key fingerprint is SHA256:jok3FH7q5LJ6qvE7iPNehBgXRw51ErE77S0Dn+Vg/Ik.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'git.coding.net,118.25.***.124' (RSA) to the list of known hosts.\nCoding 提示: Hello xiaoxx97, You've connected to Coding.net via SSH. This is a personal key.\nxiaoxx97，你好，你已经通过 SSH 协议认证 Coding.net 服务，这是一个个人公钥\n```\n\n以及，如果你的项目的名称不是`你的用户名.coding.me`，虽然也可以开启静态页面，但是图片的路径会出错，导致所有图片显示不出来，要解决这个问题，绑定一个域名就好了。\n\n关于hexo的配置文件的deploy部分\n```yml\ndeploy:\n  type: git\n  repo:\n    coding: git@git.coding.net:你的用户名/项目名.git,master\n```\n`.git`后面`,master`要记得加\n还有现在coding好像在改版，项目页面复制下来的git链接域名是`git.dev.tencent.com`，而根据我现在的实践操作发现如果我不把域名换成`git.coding.net`的话是没法部署成功的，失败原因是`Host key verification failed.`\n\n如果没装过deployer要先装不然会deploy失败\n\n```bash\nnpm install hexo-deployer-git --save\n```","slug":"关于coding和git的折腾","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn4000l6z0hhyic0hwx","content":"<p>通过ssh连接git需要配置公钥，先在本地生成公钥</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&quot;your_email@example.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>生成在目录<code>~/.ssh</code>下面，<code>.ssh/id_rsa.pub</code>就是公钥，绑定coding的时候在设置里点添加公钥，然后复制<code>.pub</code>文件里的内容过去，<span id=\"more\"></span>保存后还需要认证一下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@git.coding.NET</span><br></pre></td></tr></table></figure>\n\n<p>按照提示输<code>yes</code><br>coding会提示绑定成功</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">PS</span> D:\\Onedrive\\文档\\hexo&gt; ssh <span class=\"literal\">-T</span> git@git.coding.NET</span><br><span class=\"line\">The authenticity of host <span class=\"string\">&#x27;git.coding.net (118.25.***.124)&#x27;</span> can<span class=\"string\">&#x27;t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is SHA256:jok3FH7q5LJ6qvE7iPNehBgXRw51ErE77S0Dn+Vg/Ik.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class=\"line\"><span class=\"string\">Warning: Permanently added &#x27;</span>git.coding.net,<span class=\"number\">118.25</span>.***.<span class=\"number\">124</span><span class=\"string\">&#x27; (RSA) to the list of known hosts.</span></span><br><span class=\"line\"><span class=\"string\">Coding 提示: Hello xiaoxx97, You&#x27;</span>ve connected to Coding.net via SSH. This is a personal key.</span><br><span class=\"line\">xiaoxx97，你好，你已经通过 SSH 协议认证 Coding.net 服务，这是一个个人公钥</span><br></pre></td></tr></table></figure>\n\n<p>以及，如果你的项目的名称不是<code>你的用户名.coding.me</code>，虽然也可以开启静态页面，但是图片的路径会出错，导致所有图片显示不出来，要解决这个问题，绑定一个域名就好了。</p>\n<p>关于hexo的配置文件的deploy部分</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span></span><br><span class=\"line\">    <span class=\"attr\">coding:</span> <span class=\"string\">git@git.coding.net:你的用户名/项目名.git,master</span></span><br></pre></td></tr></table></figure>\n<p><code>.git</code>后面<code>,master</code>要记得加<br>还有现在coding好像在改版，项目页面复制下来的git链接域名是<code>git.dev.tencent.com</code>，而根据我现在的实践操作发现如果我不把域名换成<code>git.coding.net</code>的话是没法部署成功的，失败原因是<code>Host key verification failed.</code></p>\n<p>如果没装过deployer要先装不然会deploy失败</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<p>通过ssh连接git需要配置公钥，先在本地生成公钥</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&quot;your_email@example.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>生成在目录<code>~/.ssh</code>下面，<code>.ssh/id_rsa.pub</code>就是公钥，绑定coding的时候在设置里点添加公钥，然后复制<code>.pub</code>文件里的内容过去，","more":"保存后还需要认证一下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@git.coding.NET</span><br></pre></td></tr></table></figure>\n\n<p>按照提示输<code>yes</code><br>coding会提示绑定成功</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">PS</span> D:\\Onedrive\\文档\\hexo&gt; ssh <span class=\"literal\">-T</span> git@git.coding.NET</span><br><span class=\"line\">The authenticity of host <span class=\"string\">&#x27;git.coding.net (118.25.***.124)&#x27;</span> can<span class=\"string\">&#x27;t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is SHA256:jok3FH7q5LJ6qvE7iPNehBgXRw51ErE77S0Dn+Vg/Ik.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class=\"line\"><span class=\"string\">Warning: Permanently added &#x27;</span>git.coding.net,<span class=\"number\">118.25</span>.***.<span class=\"number\">124</span><span class=\"string\">&#x27; (RSA) to the list of known hosts.</span></span><br><span class=\"line\"><span class=\"string\">Coding 提示: Hello xiaoxx97, You&#x27;</span>ve connected to Coding.net via SSH. This is a personal key.</span><br><span class=\"line\">xiaoxx97，你好，你已经通过 SSH 协议认证 Coding.net 服务，这是一个个人公钥</span><br></pre></td></tr></table></figure>\n\n<p>以及，如果你的项目的名称不是<code>你的用户名.coding.me</code>，虽然也可以开启静态页面，但是图片的路径会出错，导致所有图片显示不出来，要解决这个问题，绑定一个域名就好了。</p>\n<p>关于hexo的配置文件的deploy部分</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">  <span class=\"attr\">repo:</span></span><br><span class=\"line\">    <span class=\"attr\">coding:</span> <span class=\"string\">git@git.coding.net:你的用户名/项目名.git,master</span></span><br></pre></td></tr></table></figure>\n<p><code>.git</code>后面<code>,master</code>要记得加<br>还有现在coding好像在改版，项目页面复制下来的git链接域名是<code>git.dev.tencent.com</code>，而根据我现在的实践操作发现如果我不把域名换成<code>git.coding.net</code>的话是没法部署成功的，失败原因是<code>Host key verification failed.</code></p>\n<p>如果没装过deployer要先装不然会deploy失败</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>"},{"title":"如何导出微信公众号卡券的会员信息","date":"2019-12-15T10:51:46.000Z","_content":"\n{% note info no-icon %}\n这是一个手把手教程\n{% endnote %}\n\n推荐使用谷歌浏览器[Chrome](https://www.google.cn/intl/zh-CN/chrome/)安装插件[Tampermonkey](https://www.tampermonkey.net/?ext=dhdg&locale=zh)使用，其他浏览器没测试过\n\n## 功能\n\n导出你能看到的会员的所有信息，看起来像这个样子\n\n| 会员  | 地区            | 姓名 | 手机        | 生日       | 状态 | 是否关注 | 标签   | 会员号         | 积分 |\n| ----- | --------------- | ---- | ----------- | ---------- | ---- | -------- | ------ | -------------- | ---- |\n| lucky | 中国  江苏 苏州 | 张三 | 13700000000 | 1999-9-9   | 有效 | 否       | 无标签 | 9492-3564-9589 | 11   |\n| 👧     | 毛里求斯        | 赵四 | 13800000000 | 2000-10-10 | 无效 | 已关注   | 无标签 | 2391-8300-1593 | 30   |\n\n<!--more-->\n\n## 步骤\n\n### 如果你是资深玩家\n\n用过油猴插件，那么直接[点这里打开安装页面](https://github.com/xiaoxx970/wechat_vip_info_export/raw/master/Wechat_offical_account_VIP_info_export.user.js)。\n\n在微信公众号的`卡劵功能->会员卡-> 会员管理`界面就可以使用。\n\n### 如果你没听说过Tampermonkey\n\n那么你需要：\n\n1. 下载安装谷歌浏览器：https://www.google.cn/intl/zh-CN/chrome/\n\n2. 下载Tampermonkey插件\n\n   去这个网站：https://www.crx4chrome.com/crx/755/\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215145542390.png)\n\n   点其中一个链接（除了google cdn 和 Chrome web store），下载插件\n\n3. 解压插件\n\n   下载后你得到的是一个crx格式的文件，重命名文件修改后缀，把`.crx`改成`.zip`\n\n   | ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150212447.png)| **→** |![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150325561.png)|\n   | ------------------------------------------------------------ | ---- | ---- |\n\n   解压zip文件：点解压到\"extension_xxx\\”\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150624537.png)\n\n   记住这个文件夹的位置\n\n4. 安装插件\n\n   打开Chrome浏览器，在地址栏输入`chrome://extensions/`，或者点浏览器菜单按钮 > 更多工具 > 扩展程序\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151002595.png)\n\n   进入扩展程序页面，打开右上角开发者模式开关，点左边的`加载已解压的扩展程序`\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151145803.png)\n\n   选择刚才解压出来的文件夹（不需要点进去，选中文件夹后就点`选择文件夹`）\n\n   然后就可以安装好插件\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151317653.png)\n\n   看到这个就说明安装好了\n\n5. 安装我的脚本\n\n   打开脚本页面：[微信公众号会员信息导出](https://greasyfork.org/zh-CN/scripts/387221-微信公众号会员信息导出-wechat-offical-account-vip-info-export)\n\n   点`安装此脚本`\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151923867.png)\n\n   然后在这个页面点安装，点一下就可以安装好\n\n6. 开始做事情\n\n   打开微信公众号的`卡劵功能->会员卡-> 会员管理`界面\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215152613213.png)只要一进入会员管理页面，浏览器就会开始自动跳转，收集信息。然后就等着吧。\n\n   平均一个会员需要4秒导出，如果九百个会员的话需要一个小时。\n\n7. 下载导出的csv文件\n\n   如果脚本执行完最后一页的最后一个用户，就会出现提示说导出完成，可以开始下载\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215153051694.png)\n\n   下载下来的`vip.csv`文件可以通过Excel打开，完事。\n\n## 注意事项\n\n- 打开调试工具后可以在console看到当前正在导出本页的第几个会员信息。\n\n- 你始终可以通过浏览器右上角tampermonkey按钮终止脚本运行\n  \n- 任何时候你都可以把当前已经导出的会员先下载下来\n\n  停止脚本后在console输入\n\n  ```javascript\n  function getDownloadUrl(csvData) {\n      var _utf = \"\\uFEFF\"; // 为了使Excel以utf-8的编码模式，同时也是解决中文乱码的问题\n      if (window.Blob && window.URL && window.URL.createObjectURL) {\n          var csvData = new Blob([_utf + csvData], {\n              type: 'text/csv'\n          });\n          return URL.createObjectURL(csvData);\n      }\n  }\n  function SaveAs(fileName, csvData) {\n      var Sys = {};\n      var ua = navigator.userAgent.toLowerCase();\n      var s;\n      (s = ua.match(/chrome\\/([\\d.]+)/)) ? Sys.chrome = s[1]:0;\t//这里直接指定了chrome\n      var bw = Sys;\n      var alink = document.createElement(\"a\");\n      alink.id = \"linkDwnldLink\";\n      alink.href = getDownloadUrl(csvData);\n      document.body.appendChild(alink);\n      var linkDom = document.getElementById('linkDwnldLink');\n      linkDom.setAttribute('download', fileName);\n      linkDom.click();\n      document.body.removeChild(linkDom);\n  }\n  var csv = localStorage.getItem(\"csv\")\n  csv = \"会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n\"+csv\n  SaveAs(\"vip.csv\", csv)\n  ```\n  \n- 终止后要想从头开始导入（或者从某一页），需要先清除cookie和localstorage数据，在console输入：\n\n    ```js\n  function clearCookie(c_name) {\n      var expiredays = -1\n      var exdate = new Date()\n      exdate.setDate(exdate.getDate() + expiredays)\n      document.cookie = c_name + \"=\" + ((expiredays == null) ? \"\" : \";expires=\" + exdate.toGMTString())\n  }\n  localStorage.removeItem(\"csv\")\n  clearCookie(\"step\")\n  ```\n\n- 在会员页面打开插件后不会马上开始运行脚本，要刷新一下才可以\n\n现在还有的问题：\n\n- 有时候会停下来不继续点下一个页面，这时候看一下console里的提示信息\n\n  - 如果写的`next page`，那只要手动点一下下一页就可以了\n\n  - 如果写的`step:`后面跟一个数字，那数字是几就手动点一下当前页面的第几个会员信息\n\n  - 如果停在某个会员信息页，那可以手动返回上一页试试\n---\n\n> Note:仅仅是为我自己做的脚本，如果没达到你的要求，欢迎找我有尝定制。（比如你还需要导出会员卡使用次数、激活时间、使用记录等）\n>\n> QQ：987896425\n\n> 实现过程：[用JS脚本...](/Wechat-vip-info-export)\n\n> 要是你有觉得可以改进的地方，欢迎来[GitHub页面](https://github.com/xiaoxx970/wechat_vip_info_export)提交Pull request。\n","source":"_posts/wechat-vip-how-to.md","raw":"---\ntitle: 如何导出微信公众号卡券的会员信息\ndate: 2019-12-15 18:51:46\ntags:\n  - 手把手教程\n---\n\n{% note info no-icon %}\n这是一个手把手教程\n{% endnote %}\n\n推荐使用谷歌浏览器[Chrome](https://www.google.cn/intl/zh-CN/chrome/)安装插件[Tampermonkey](https://www.tampermonkey.net/?ext=dhdg&locale=zh)使用，其他浏览器没测试过\n\n## 功能\n\n导出你能看到的会员的所有信息，看起来像这个样子\n\n| 会员  | 地区            | 姓名 | 手机        | 生日       | 状态 | 是否关注 | 标签   | 会员号         | 积分 |\n| ----- | --------------- | ---- | ----------- | ---------- | ---- | -------- | ------ | -------------- | ---- |\n| lucky | 中国  江苏 苏州 | 张三 | 13700000000 | 1999-9-9   | 有效 | 否       | 无标签 | 9492-3564-9589 | 11   |\n| 👧     | 毛里求斯        | 赵四 | 13800000000 | 2000-10-10 | 无效 | 已关注   | 无标签 | 2391-8300-1593 | 30   |\n\n<!--more-->\n\n## 步骤\n\n### 如果你是资深玩家\n\n用过油猴插件，那么直接[点这里打开安装页面](https://github.com/xiaoxx970/wechat_vip_info_export/raw/master/Wechat_offical_account_VIP_info_export.user.js)。\n\n在微信公众号的`卡劵功能->会员卡-> 会员管理`界面就可以使用。\n\n### 如果你没听说过Tampermonkey\n\n那么你需要：\n\n1. 下载安装谷歌浏览器：https://www.google.cn/intl/zh-CN/chrome/\n\n2. 下载Tampermonkey插件\n\n   去这个网站：https://www.crx4chrome.com/crx/755/\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215145542390.png)\n\n   点其中一个链接（除了google cdn 和 Chrome web store），下载插件\n\n3. 解压插件\n\n   下载后你得到的是一个crx格式的文件，重命名文件修改后缀，把`.crx`改成`.zip`\n\n   | ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150212447.png)| **→** |![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150325561.png)|\n   | ------------------------------------------------------------ | ---- | ---- |\n\n   解压zip文件：点解压到\"extension_xxx\\”\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150624537.png)\n\n   记住这个文件夹的位置\n\n4. 安装插件\n\n   打开Chrome浏览器，在地址栏输入`chrome://extensions/`，或者点浏览器菜单按钮 > 更多工具 > 扩展程序\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151002595.png)\n\n   进入扩展程序页面，打开右上角开发者模式开关，点左边的`加载已解压的扩展程序`\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151145803.png)\n\n   选择刚才解压出来的文件夹（不需要点进去，选中文件夹后就点`选择文件夹`）\n\n   然后就可以安装好插件\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151317653.png)\n\n   看到这个就说明安装好了\n\n5. 安装我的脚本\n\n   打开脚本页面：[微信公众号会员信息导出](https://greasyfork.org/zh-CN/scripts/387221-微信公众号会员信息导出-wechat-offical-account-vip-info-export)\n\n   点`安装此脚本`\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151923867.png)\n\n   然后在这个页面点安装，点一下就可以安装好\n\n6. 开始做事情\n\n   打开微信公众号的`卡劵功能->会员卡-> 会员管理`界面\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215152613213.png)只要一进入会员管理页面，浏览器就会开始自动跳转，收集信息。然后就等着吧。\n\n   平均一个会员需要4秒导出，如果九百个会员的话需要一个小时。\n\n7. 下载导出的csv文件\n\n   如果脚本执行完最后一页的最后一个用户，就会出现提示说导出完成，可以开始下载\n\n   ![](https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215153051694.png)\n\n   下载下来的`vip.csv`文件可以通过Excel打开，完事。\n\n## 注意事项\n\n- 打开调试工具后可以在console看到当前正在导出本页的第几个会员信息。\n\n- 你始终可以通过浏览器右上角tampermonkey按钮终止脚本运行\n  \n- 任何时候你都可以把当前已经导出的会员先下载下来\n\n  停止脚本后在console输入\n\n  ```javascript\n  function getDownloadUrl(csvData) {\n      var _utf = \"\\uFEFF\"; // 为了使Excel以utf-8的编码模式，同时也是解决中文乱码的问题\n      if (window.Blob && window.URL && window.URL.createObjectURL) {\n          var csvData = new Blob([_utf + csvData], {\n              type: 'text/csv'\n          });\n          return URL.createObjectURL(csvData);\n      }\n  }\n  function SaveAs(fileName, csvData) {\n      var Sys = {};\n      var ua = navigator.userAgent.toLowerCase();\n      var s;\n      (s = ua.match(/chrome\\/([\\d.]+)/)) ? Sys.chrome = s[1]:0;\t//这里直接指定了chrome\n      var bw = Sys;\n      var alink = document.createElement(\"a\");\n      alink.id = \"linkDwnldLink\";\n      alink.href = getDownloadUrl(csvData);\n      document.body.appendChild(alink);\n      var linkDom = document.getElementById('linkDwnldLink');\n      linkDom.setAttribute('download', fileName);\n      linkDom.click();\n      document.body.removeChild(linkDom);\n  }\n  var csv = localStorage.getItem(\"csv\")\n  csv = \"会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n\"+csv\n  SaveAs(\"vip.csv\", csv)\n  ```\n  \n- 终止后要想从头开始导入（或者从某一页），需要先清除cookie和localstorage数据，在console输入：\n\n    ```js\n  function clearCookie(c_name) {\n      var expiredays = -1\n      var exdate = new Date()\n      exdate.setDate(exdate.getDate() + expiredays)\n      document.cookie = c_name + \"=\" + ((expiredays == null) ? \"\" : \";expires=\" + exdate.toGMTString())\n  }\n  localStorage.removeItem(\"csv\")\n  clearCookie(\"step\")\n  ```\n\n- 在会员页面打开插件后不会马上开始运行脚本，要刷新一下才可以\n\n现在还有的问题：\n\n- 有时候会停下来不继续点下一个页面，这时候看一下console里的提示信息\n\n  - 如果写的`next page`，那只要手动点一下下一页就可以了\n\n  - 如果写的`step:`后面跟一个数字，那数字是几就手动点一下当前页面的第几个会员信息\n\n  - 如果停在某个会员信息页，那可以手动返回上一页试试\n---\n\n> Note:仅仅是为我自己做的脚本，如果没达到你的要求，欢迎找我有尝定制。（比如你还需要导出会员卡使用次数、激活时间、使用记录等）\n>\n> QQ：987896425\n\n> 实现过程：[用JS脚本...](/Wechat-vip-info-export)\n\n> 要是你有觉得可以改进的地方，欢迎来[GitHub页面](https://github.com/xiaoxx970/wechat_vip_info_export)提交Pull request。\n","slug":"wechat-vip-how-to","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn5000o6z0h70z6c232","content":"<div class=\"note info no-icon\"><p>这是一个手把手教程</p>\n</div>\n\n<p>推荐使用谷歌浏览器<a href=\"https://www.google.cn/intl/zh-CN/chrome/\">Chrome</a>安装插件<a href=\"https://www.tampermonkey.net/?ext=dhdg&locale=zh\">Tampermonkey</a>使用，其他浏览器没测试过</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>导出你能看到的会员的所有信息，看起来像这个样子</p>\n<table>\n<thead>\n<tr>\n<th>会员</th>\n<th>地区</th>\n<th>姓名</th>\n<th>手机</th>\n<th>生日</th>\n<th>状态</th>\n<th>是否关注</th>\n<th>标签</th>\n<th>会员号</th>\n<th>积分</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>lucky</td>\n<td>中国  江苏 苏州</td>\n<td>张三</td>\n<td>13700000000</td>\n<td>1999-9-9</td>\n<td>有效</td>\n<td>否</td>\n<td>无标签</td>\n<td>9492-3564-9589</td>\n<td>11</td>\n</tr>\n<tr>\n<td>👧</td>\n<td>毛里求斯</td>\n<td>赵四</td>\n<td>13800000000</td>\n<td>2000-10-10</td>\n<td>无效</td>\n<td>已关注</td>\n<td>无标签</td>\n<td>2391-8300-1593</td>\n<td>30</td>\n</tr>\n</tbody></table>\n<span id=\"more\"></span>\n\n<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><h3 id=\"如果你是资深玩家\"><a href=\"#如果你是资深玩家\" class=\"headerlink\" title=\"如果你是资深玩家\"></a>如果你是资深玩家</h3><p>用过油猴插件，那么直接<a href=\"https://github.com/xiaoxx970/wechat_vip_info_export/raw/master/Wechat_offical_account_VIP_info_export.user.js\">点这里打开安装页面</a>。</p>\n<p>在微信公众号的<code>卡劵功能-&gt;会员卡-&gt; 会员管理</code>界面就可以使用。</p>\n<h3 id=\"如果你没听说过Tampermonkey\"><a href=\"#如果你没听说过Tampermonkey\" class=\"headerlink\" title=\"如果你没听说过Tampermonkey\"></a>如果你没听说过Tampermonkey</h3><p>那么你需要：</p>\n<ol>\n<li><p>下载安装谷歌浏览器：<a href=\"https://www.google.cn/intl/zh-CN/chrome/\">https://www.google.cn/intl/zh-CN/chrome/</a></p>\n</li>\n<li><p>下载Tampermonkey插件</p>\n<p>去这个网站：<a href=\"https://www.crx4chrome.com/crx/755/\">https://www.crx4chrome.com/crx/755/</a></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215145542390.png\"></p>\n<p>点其中一个链接（除了google cdn 和 Chrome web store），下载插件</p>\n</li>\n<li><p>解压插件</p>\n<p>下载后你得到的是一个crx格式的文件，重命名文件修改后缀，把<code>.crx</code>改成<code>.zip</code></p>\n<table>\n<thead>\n<tr>\n<th><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150212447.png\"></th>\n<th><strong>→</strong></th>\n<th><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150325561.png\"></th>\n</tr>\n</thead>\n</table>\n<p>解压zip文件：点解压到”extension_xxx\\”</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150624537.png\"></p>\n<p>记住这个文件夹的位置</p>\n</li>\n<li><p>安装插件</p>\n<p>打开Chrome浏览器，在地址栏输入<code>chrome://extensions/</code>，或者点浏览器菜单按钮 &gt; 更多工具 &gt; 扩展程序</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151002595.png\"></p>\n<p>进入扩展程序页面，打开右上角开发者模式开关，点左边的<code>加载已解压的扩展程序</code></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151145803.png\"></p>\n<p>选择刚才解压出来的文件夹（不需要点进去，选中文件夹后就点<code>选择文件夹</code>）</p>\n<p>然后就可以安装好插件</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151317653.png\"></p>\n<p>看到这个就说明安装好了</p>\n</li>\n<li><p>安装我的脚本</p>\n<p>打开脚本页面：<a href=\"https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export\">微信公众号会员信息导出</a></p>\n<p>点<code>安装此脚本</code></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151923867.png\"></p>\n<p>然后在这个页面点安装，点一下就可以安装好</p>\n</li>\n<li><p>开始做事情</p>\n<p>打开微信公众号的<code>卡劵功能-&gt;会员卡-&gt; 会员管理</code>界面</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215152613213.png\">只要一进入会员管理页面，浏览器就会开始自动跳转，收集信息。然后就等着吧。</p>\n<p>平均一个会员需要4秒导出，如果九百个会员的话需要一个小时。</p>\n</li>\n<li><p>下载导出的csv文件</p>\n<p>如果脚本执行完最后一页的最后一个用户，就会出现提示说导出完成，可以开始下载</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215153051694.png\"></p>\n<p>下载下来的<code>vip.csv</code>文件可以通过Excel打开，完事。</p>\n</li>\n</ol>\n<h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><ul>\n<li><p>打开调试工具后可以在console看到当前正在导出本页的第几个会员信息。</p>\n</li>\n<li><p>你始终可以通过浏览器右上角tampermonkey按钮终止脚本运行</p>\n</li>\n<li><p>任何时候你都可以把当前已经导出的会员先下载下来</p>\n<p>停止脚本后在console输入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getDownloadUrl</span>(<span class=\"params\">csvData</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _utf = <span class=\"string\">&quot;\\uFEFF&quot;</span>; <span class=\"comment\">// 为了使Excel以utf-8的编码模式，同时也是解决中文乱码的问题</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">window</span>.<span class=\"property\">Blob</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">URL</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">URL</span>.<span class=\"property\">createObjectURL</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> csvData = <span class=\"keyword\">new</span> <span class=\"title class_\">Blob</span>([_utf + csvData], &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"string\">&#x27;text/csv&#x27;</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable constant_\">URL</span>.<span class=\"title function_\">createObjectURL</span>(csvData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">SaveAs</span>(<span class=\"params\">fileName, csvData</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"title class_\">Sys</span> = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span>.<span class=\"title function_\">toLowerCase</span>();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s;</span><br><span class=\"line\">    (s = ua.<span class=\"title function_\">match</span>(<span class=\"regexp\">/chrome\\/([\\d.]+)/</span>)) ? <span class=\"title class_\">Sys</span>.<span class=\"property\">chrome</span> = s[<span class=\"number\">1</span>]:<span class=\"number\">0</span>;\t<span class=\"comment\">//这里直接指定了chrome</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bw = <span class=\"title class_\">Sys</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> alink = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">    alink.<span class=\"property\">id</span> = <span class=\"string\">&quot;linkDwnldLink&quot;</span>;</span><br><span class=\"line\">    alink.<span class=\"property\">href</span> = <span class=\"title function_\">getDownloadUrl</span>(csvData);</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(alink);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> linkDom = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;linkDwnldLink&#x27;</span>);</span><br><span class=\"line\">    linkDom.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;download&#x27;</span>, fileName);</span><br><span class=\"line\">    linkDom.<span class=\"title function_\">click</span>();</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">removeChild</span>(linkDom);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\">csv = <span class=\"string\">&quot;会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n&quot;</span>+csv</span><br><span class=\"line\"><span class=\"title class_\">SaveAs</span>(<span class=\"string\">&quot;vip.csv&quot;</span>, csv)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>终止后要想从头开始导入（或者从某一页），需要先清除cookie和localstorage数据，在console输入：</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">clearCookie</span>(<span class=\"params\">c_name</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> expiredays = -<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> exdate = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()</span><br><span class=\"line\">    exdate.<span class=\"title function_\">setDate</span>(exdate.<span class=\"title function_\">getDate</span>() + expiredays)</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">cookie</span> = c_name + <span class=\"string\">&quot;=&quot;</span> + ((expiredays == <span class=\"literal\">null</span>) ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;;expires=&quot;</span> + exdate.<span class=\"title function_\">toGMTString</span>())</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">removeItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\"><span class=\"title function_\">clearCookie</span>(<span class=\"string\">&quot;step&quot;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在会员页面打开插件后不会马上开始运行脚本，要刷新一下才可以</p>\n</li>\n</ul>\n<p>现在还有的问题：</p>\n<ul>\n<li><p>有时候会停下来不继续点下一个页面，这时候看一下console里的提示信息</p>\n<ul>\n<li><p>如果写的<code>next page</code>，那只要手动点一下下一页就可以了</p>\n</li>\n<li><p>如果写的<code>step:</code>后面跟一个数字，那数字是几就手动点一下当前页面的第几个会员信息</p>\n</li>\n<li><p>如果停在某个会员信息页，那可以手动返回上一页试试</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>Note:仅仅是为我自己做的脚本，如果没达到你的要求，欢迎找我有尝定制。（比如你还需要导出会员卡使用次数、激活时间、使用记录等）</p>\n<p>QQ：987896425</p>\n</blockquote>\n<blockquote>\n<p>实现过程：<a href=\"/Wechat-vip-info-export\">用JS脚本…</a></p>\n</blockquote>\n<blockquote>\n<p>要是你有觉得可以改进的地方，欢迎来<a href=\"https://github.com/xiaoxx970/wechat_vip_info_export\">GitHub页面</a>提交Pull request。</p>\n</blockquote>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<div class=\"note info no-icon\"><p>这是一个手把手教程</p>\n</div>\n\n<p>推荐使用谷歌浏览器<a href=\"https://www.google.cn/intl/zh-CN/chrome/\">Chrome</a>安装插件<a href=\"https://www.tampermonkey.net/?ext=dhdg&locale=zh\">Tampermonkey</a>使用，其他浏览器没测试过</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>导出你能看到的会员的所有信息，看起来像这个样子</p>\n<table>\n<thead>\n<tr>\n<th>会员</th>\n<th>地区</th>\n<th>姓名</th>\n<th>手机</th>\n<th>生日</th>\n<th>状态</th>\n<th>是否关注</th>\n<th>标签</th>\n<th>会员号</th>\n<th>积分</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>lucky</td>\n<td>中国  江苏 苏州</td>\n<td>张三</td>\n<td>13700000000</td>\n<td>1999-9-9</td>\n<td>有效</td>\n<td>否</td>\n<td>无标签</td>\n<td>9492-3564-9589</td>\n<td>11</td>\n</tr>\n<tr>\n<td>👧</td>\n<td>毛里求斯</td>\n<td>赵四</td>\n<td>13800000000</td>\n<td>2000-10-10</td>\n<td>无效</td>\n<td>已关注</td>\n<td>无标签</td>\n<td>2391-8300-1593</td>\n<td>30</td>\n</tr>\n</tbody></table>","more":"<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><h3 id=\"如果你是资深玩家\"><a href=\"#如果你是资深玩家\" class=\"headerlink\" title=\"如果你是资深玩家\"></a>如果你是资深玩家</h3><p>用过油猴插件，那么直接<a href=\"https://github.com/xiaoxx970/wechat_vip_info_export/raw/master/Wechat_offical_account_VIP_info_export.user.js\">点这里打开安装页面</a>。</p>\n<p>在微信公众号的<code>卡劵功能-&gt;会员卡-&gt; 会员管理</code>界面就可以使用。</p>\n<h3 id=\"如果你没听说过Tampermonkey\"><a href=\"#如果你没听说过Tampermonkey\" class=\"headerlink\" title=\"如果你没听说过Tampermonkey\"></a>如果你没听说过Tampermonkey</h3><p>那么你需要：</p>\n<ol>\n<li><p>下载安装谷歌浏览器：<a href=\"https://www.google.cn/intl/zh-CN/chrome/\">https://www.google.cn/intl/zh-CN/chrome/</a></p>\n</li>\n<li><p>下载Tampermonkey插件</p>\n<p>去这个网站：<a href=\"https://www.crx4chrome.com/crx/755/\">https://www.crx4chrome.com/crx/755/</a></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215145542390.png\"></p>\n<p>点其中一个链接（除了google cdn 和 Chrome web store），下载插件</p>\n</li>\n<li><p>解压插件</p>\n<p>下载后你得到的是一个crx格式的文件，重命名文件修改后缀，把<code>.crx</code>改成<code>.zip</code></p>\n<table>\n<thead>\n<tr>\n<th><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150212447.png\"></th>\n<th><strong>→</strong></th>\n<th><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150325561.png\"></th>\n</tr>\n</thead>\n</table>\n<p>解压zip文件：点解压到”extension_xxx\\”</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215150624537.png\"></p>\n<p>记住这个文件夹的位置</p>\n</li>\n<li><p>安装插件</p>\n<p>打开Chrome浏览器，在地址栏输入<code>chrome://extensions/</code>，或者点浏览器菜单按钮 &gt; 更多工具 &gt; 扩展程序</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151002595.png\"></p>\n<p>进入扩展程序页面，打开右上角开发者模式开关，点左边的<code>加载已解压的扩展程序</code></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151145803.png\"></p>\n<p>选择刚才解压出来的文件夹（不需要点进去，选中文件夹后就点<code>选择文件夹</code>）</p>\n<p>然后就可以安装好插件</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151317653.png\"></p>\n<p>看到这个就说明安装好了</p>\n</li>\n<li><p>安装我的脚本</p>\n<p>打开脚本页面：<a href=\"https://greasyfork.org/zh-CN/scripts/387221-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA-wechat-offical-account-vip-info-export\">微信公众号会员信息导出</a></p>\n<p>点<code>安装此脚本</code></p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215151923867.png\"></p>\n<p>然后在这个页面点安装，点一下就可以安装好</p>\n</li>\n<li><p>开始做事情</p>\n<p>打开微信公众号的<code>卡劵功能-&gt;会员卡-&gt; 会员管理</code>界面</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215152613213.png\">只要一进入会员管理页面，浏览器就会开始自动跳转，收集信息。然后就等着吧。</p>\n<p>平均一个会员需要4秒导出，如果九百个会员的话需要一个小时。</p>\n</li>\n<li><p>下载导出的csv文件</p>\n<p>如果脚本执行完最后一页的最后一个用户，就会出现提示说导出完成，可以开始下载</p>\n<p><img data-src=\"https://xiaoxx.oss-cn-beijing.aliyuncs.com/md-img/image-20191215153051694.png\"></p>\n<p>下载下来的<code>vip.csv</code>文件可以通过Excel打开，完事。</p>\n</li>\n</ol>\n<h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><ul>\n<li><p>打开调试工具后可以在console看到当前正在导出本页的第几个会员信息。</p>\n</li>\n<li><p>你始终可以通过浏览器右上角tampermonkey按钮终止脚本运行</p>\n</li>\n<li><p>任何时候你都可以把当前已经导出的会员先下载下来</p>\n<p>停止脚本后在console输入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getDownloadUrl</span>(<span class=\"params\">csvData</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _utf = <span class=\"string\">&quot;\\uFEFF&quot;</span>; <span class=\"comment\">// 为了使Excel以utf-8的编码模式，同时也是解决中文乱码的问题</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">window</span>.<span class=\"property\">Blob</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">URL</span> &amp;&amp; <span class=\"variable language_\">window</span>.<span class=\"property\">URL</span>.<span class=\"property\">createObjectURL</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> csvData = <span class=\"keyword\">new</span> <span class=\"title class_\">Blob</span>([_utf + csvData], &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"string\">&#x27;text/csv&#x27;</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable constant_\">URL</span>.<span class=\"title function_\">createObjectURL</span>(csvData);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">SaveAs</span>(<span class=\"params\">fileName, csvData</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"title class_\">Sys</span> = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ua = navigator.<span class=\"property\">userAgent</span>.<span class=\"title function_\">toLowerCase</span>();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s;</span><br><span class=\"line\">    (s = ua.<span class=\"title function_\">match</span>(<span class=\"regexp\">/chrome\\/([\\d.]+)/</span>)) ? <span class=\"title class_\">Sys</span>.<span class=\"property\">chrome</span> = s[<span class=\"number\">1</span>]:<span class=\"number\">0</span>;\t<span class=\"comment\">//这里直接指定了chrome</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> bw = <span class=\"title class_\">Sys</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> alink = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">    alink.<span class=\"property\">id</span> = <span class=\"string\">&quot;linkDwnldLink&quot;</span>;</span><br><span class=\"line\">    alink.<span class=\"property\">href</span> = <span class=\"title function_\">getDownloadUrl</span>(csvData);</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(alink);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> linkDom = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;linkDwnldLink&#x27;</span>);</span><br><span class=\"line\">    linkDom.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;download&#x27;</span>, fileName);</span><br><span class=\"line\">    linkDom.<span class=\"title function_\">click</span>();</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">removeChild</span>(linkDom);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> csv = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\">csv = <span class=\"string\">&quot;会员,地区,姓名,手机,生日,状态,是否关注,标签,会员号,积分\\n&quot;</span>+csv</span><br><span class=\"line\"><span class=\"title class_\">SaveAs</span>(<span class=\"string\">&quot;vip.csv&quot;</span>, csv)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>终止后要想从头开始导入（或者从某一页），需要先清除cookie和localstorage数据，在console输入：</p>\n  <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">clearCookie</span>(<span class=\"params\">c_name</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> expiredays = -<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> exdate = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()</span><br><span class=\"line\">    exdate.<span class=\"title function_\">setDate</span>(exdate.<span class=\"title function_\">getDate</span>() + expiredays)</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"property\">cookie</span> = c_name + <span class=\"string\">&quot;=&quot;</span> + ((expiredays == <span class=\"literal\">null</span>) ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&quot;;expires=&quot;</span> + exdate.<span class=\"title function_\">toGMTString</span>())</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">removeItem</span>(<span class=\"string\">&quot;csv&quot;</span>)</span><br><span class=\"line\"><span class=\"title function_\">clearCookie</span>(<span class=\"string\">&quot;step&quot;</span>)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在会员页面打开插件后不会马上开始运行脚本，要刷新一下才可以</p>\n</li>\n</ul>\n<p>现在还有的问题：</p>\n<ul>\n<li><p>有时候会停下来不继续点下一个页面，这时候看一下console里的提示信息</p>\n<ul>\n<li><p>如果写的<code>next page</code>，那只要手动点一下下一页就可以了</p>\n</li>\n<li><p>如果写的<code>step:</code>后面跟一个数字，那数字是几就手动点一下当前页面的第几个会员信息</p>\n</li>\n<li><p>如果停在某个会员信息页，那可以手动返回上一页试试</p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>Note:仅仅是为我自己做的脚本，如果没达到你的要求，欢迎找我有尝定制。（比如你还需要导出会员卡使用次数、激活时间、使用记录等）</p>\n<p>QQ：987896425</p>\n</blockquote>\n<blockquote>\n<p>实现过程：<a href=\"/Wechat-vip-info-export\">用JS脚本…</a></p>\n</blockquote>\n<blockquote>\n<p>要是你有觉得可以改进的地方，欢迎来<a href=\"https://github.com/xiaoxx970/wechat_vip_info_export\">GitHub页面</a>提交Pull request。</p>\n</blockquote>"},{"title":"把时间当作朋友_笔记","date":"2018-10-08T03:26:00.000Z","_content":"* 我有没有什么觉得自己“现在学也来不及了”的技能？\n* 浮躁的根源：不懂“有些阶段就是无法跨越”这个道理。告诉自己：我有不足，我需要时间，我没办法一蹴而就。\n  “我要”的欲望可以用”我有“的东西来满足，即便“我有“的暂时不够，我也能借助已经拥有的努力和勤奋（亦或投机），只要假以时日，定能如愿以偿。一旦得偿所愿，不仅”我有“的更多，”我要“的也更容易获得，如此形成良性循环。\n  摆脱生活死循环：给我什么我就用好什么，积累到一定程度再去换能换的东西。<!--more-->\n  在想到”我要什么“的时候马上提醒自己，接下来要花一些时间去思考”我有什么“。后者会在转瞬间让我”脚踏实地“。\n* 完美永不存在，未知永远存在，为了进步，必须忍受一定的未知。\n  初学概念：看不懂证明，暂时不去问为什么.我们只能尝试着适应”在未知中不断前行“。\n  一个有效的策略：**记录下来**暂时不能解决的问题，继续前行并不是忽略这些问题。你一直在前行，你一直在积累，你一直在成长。所以，到有了答案那一刻，你不再是当初无能为力的你，你已经重生。\n  尽快接受现实，包括：*速成绝无可能、只有付出才有收获、完美永不存在、未知永远存在、现状无法马上摆脱*，~~不仅要接受，还要牢记；不仅要牢记，还要坚信。~~而后才能找对目标。\n  * 真正能够做对、做好的人不会在乎他人的嘲弄和打击，自己也不会这样对别人\n  * ”最后期限”不是固定在将来的某个点，而是朝着你加速扑来，唯一的策略依然是：现在就开始\n* 记录下来那些目前无法理解的、支持的、反对的、无所谓的论点，对无法理解的，写下自己当时的疑惑，对支持的，记录几个理由或实例，对反对的，同样记录几个理由或实例，对那些无所谓的，也要记录原因。————避免成为“选择性输入”的受害者。\n* 在被环境塑造的同时，我们也在塑造环境。\n* “恐惧情绪”————喜悦会使人停下行动去享受，而恐惧恰恰相反，会引发一个人马上采取行动去避免危险。事实上这种出于恐惧的决策几乎总是事与愿违。\n* 积极心理学？NO，应该 \n  > 哪一个更合理、更现实就接受哪一个\n\n  而不是\n  > 哪一个更积极就接受哪一个\n\n  因为后者只是自我欺骗而已。积极的并不总是好的。\n* ``强``与`弱`才是自然界中真正存在的本质，`善`与`恶`往往只是弱者一厢情愿的定义\n\n","source":"_posts/把时间当作朋友_笔记.md","raw":"---\ntitle: 把时间当作朋友_笔记\ndate: 2018-10-8 11:26:00\ntags: note\n---\n* 我有没有什么觉得自己“现在学也来不及了”的技能？\n* 浮躁的根源：不懂“有些阶段就是无法跨越”这个道理。告诉自己：我有不足，我需要时间，我没办法一蹴而就。\n  “我要”的欲望可以用”我有“的东西来满足，即便“我有“的暂时不够，我也能借助已经拥有的努力和勤奋（亦或投机），只要假以时日，定能如愿以偿。一旦得偿所愿，不仅”我有“的更多，”我要“的也更容易获得，如此形成良性循环。\n  摆脱生活死循环：给我什么我就用好什么，积累到一定程度再去换能换的东西。<!--more-->\n  在想到”我要什么“的时候马上提醒自己，接下来要花一些时间去思考”我有什么“。后者会在转瞬间让我”脚踏实地“。\n* 完美永不存在，未知永远存在，为了进步，必须忍受一定的未知。\n  初学概念：看不懂证明，暂时不去问为什么.我们只能尝试着适应”在未知中不断前行“。\n  一个有效的策略：**记录下来**暂时不能解决的问题，继续前行并不是忽略这些问题。你一直在前行，你一直在积累，你一直在成长。所以，到有了答案那一刻，你不再是当初无能为力的你，你已经重生。\n  尽快接受现实，包括：*速成绝无可能、只有付出才有收获、完美永不存在、未知永远存在、现状无法马上摆脱*，~~不仅要接受，还要牢记；不仅要牢记，还要坚信。~~而后才能找对目标。\n  * 真正能够做对、做好的人不会在乎他人的嘲弄和打击，自己也不会这样对别人\n  * ”最后期限”不是固定在将来的某个点，而是朝着你加速扑来，唯一的策略依然是：现在就开始\n* 记录下来那些目前无法理解的、支持的、反对的、无所谓的论点，对无法理解的，写下自己当时的疑惑，对支持的，记录几个理由或实例，对反对的，同样记录几个理由或实例，对那些无所谓的，也要记录原因。————避免成为“选择性输入”的受害者。\n* 在被环境塑造的同时，我们也在塑造环境。\n* “恐惧情绪”————喜悦会使人停下行动去享受，而恐惧恰恰相反，会引发一个人马上采取行动去避免危险。事实上这种出于恐惧的决策几乎总是事与愿违。\n* 积极心理学？NO，应该 \n  > 哪一个更合理、更现实就接受哪一个\n\n  而不是\n  > 哪一个更积极就接受哪一个\n\n  因为后者只是自我欺骗而已。积极的并不总是好的。\n* ``强``与`弱`才是自然界中真正存在的本质，`善`与`恶`往往只是弱者一厢情愿的定义\n\n","slug":"把时间当作朋友_笔记","published":1,"updated":"2022-06-03T16:41:20.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl411isn5000q6z0heewdat8q","content":"<ul>\n<li>我有没有什么觉得自己“现在学也来不及了”的技能？</li>\n<li>浮躁的根源：不懂“有些阶段就是无法跨越”这个道理。告诉自己：我有不足，我需要时间，我没办法一蹴而就。<br>“我要”的欲望可以用”我有“的东西来满足，即便“我有“的暂时不够，我也能借助已经拥有的努力和勤奋（亦或投机），只要假以时日，定能如愿以偿。一旦得偿所愿，不仅”我有“的更多，”我要“的也更容易获得，如此形成良性循环。<br>摆脱生活死循环：给我什么我就用好什么，积累到一定程度再去换能换的东西。<span id=\"more\"></span><br>在想到”我要什么“的时候马上提醒自己，接下来要花一些时间去思考”我有什么“。后者会在转瞬间让我”脚踏实地“。</li>\n<li>完美永不存在，未知永远存在，为了进步，必须忍受一定的未知。<br>初学概念：看不懂证明，暂时不去问为什么.我们只能尝试着适应”在未知中不断前行“。<br>一个有效的策略：<strong>记录下来</strong>暂时不能解决的问题，继续前行并不是忽略这些问题。你一直在前行，你一直在积累，你一直在成长。所以，到有了答案那一刻，你不再是当初无能为力的你，你已经重生。<br>尽快接受现实，包括：<em>速成绝无可能、只有付出才有收获、完美永不存在、未知永远存在、现状无法马上摆脱</em>，<del>不仅要接受，还要牢记；不仅要牢记，还要坚信。</del>而后才能找对目标。<ul>\n<li>真正能够做对、做好的人不会在乎他人的嘲弄和打击，自己也不会这样对别人</li>\n<li>”最后期限”不是固定在将来的某个点，而是朝着你加速扑来，唯一的策略依然是：现在就开始</li>\n</ul>\n</li>\n<li>记录下来那些目前无法理解的、支持的、反对的、无所谓的论点，对无法理解的，写下自己当时的疑惑，对支持的，记录几个理由或实例，对反对的，同样记录几个理由或实例，对那些无所谓的，也要记录原因。————避免成为“选择性输入”的受害者。</li>\n<li>在被环境塑造的同时，我们也在塑造环境。</li>\n<li>“恐惧情绪”————喜悦会使人停下行动去享受，而恐惧恰恰相反，会引发一个人马上采取行动去避免危险。事实上这种出于恐惧的决策几乎总是事与愿违。</li>\n<li>积极心理学？NO，应该 <blockquote>\n<p>哪一个更合理、更现实就接受哪一个</p>\n</blockquote>\n<p>而不是</p>\n<blockquote>\n<p>哪一个更积极就接受哪一个</p>\n</blockquote>\n<p>因为后者只是自我欺骗而已。积极的并不总是好的。</p>\n</li>\n<li><code>强</code>与<code>弱</code>才是自然界中真正存在的本质，<code>善</code>与<code>恶</code>往往只是弱者一厢情愿的定义</li>\n</ul>\n","site":{"data":{"head":"<script>\n\n</script>","styles":":root {\n  --content-bg-color: rgba(255,255,255,0.8);\n  --menu-item-bg-color: rgba(48,144,228,0.302);\n}\n.headband {\n  background: #03a9f4;\n}\n.site-brand-container,\n.headband {\n  background: #3090e4;\n}\n.sidebar-nav .sidebar-nav-active,\n.post-toc .nav .active > a {\n  color: #428bca;\n  border-bottom-color: rgba(48,144,228,0.302);\n}\ntbody tr:nth-of-type(odd) {\n  background: rgba(249,249,249,0.62);\n}\n.post-body .note.info.no-icon {\n  background: rgba(147,205,255,0.149);\n}\n.post-body .note.info {\n  background: rgba(66,139,202,0.1);\n}\n.post-body .note.success {\n  background: rgba(92,184,92,0.1);\n}\n.post-body .note.danger {\n  background: rgba(217,83,79,0.1);\n}\n.post-body .note.default {\n  background: rgba(119,119,119,0.1);\n}\n.highlight figcaption a {\n  margin-right: 25px;\n}\n.back-to-top {\n  right: 30px;\n  left: auto;\n}\n@media (max-width: 991px) {\n  .footer-inner {\n    padding-right: 0;\n  }\n  .highlight figcaption a {\n    margin-right: 0;\n  }\n  .back-to-top {\n    right: 20px;\n    left: auto;\n  }\n}\n"}},"excerpt":"<ul>\n<li>我有没有什么觉得自己“现在学也来不及了”的技能？</li>\n<li>浮躁的根源：不懂“有些阶段就是无法跨越”这个道理。告诉自己：我有不足，我需要时间，我没办法一蹴而就。<br>“我要”的欲望可以用”我有“的东西来满足，即便“我有“的暂时不够，我也能借助已经拥有的努力和勤奋（亦或投机），只要假以时日，定能如愿以偿。一旦得偿所愿，不仅”我有“的更多，”我要“的也更容易获得，如此形成良性循环。<br>摆脱生活死循环：给我什么我就用好什么，积累到一定程度再去换能换的东西。","more":"<br>在想到”我要什么“的时候马上提醒自己，接下来要花一些时间去思考”我有什么“。后者会在转瞬间让我”脚踏实地“。</li>\n<li>完美永不存在，未知永远存在，为了进步，必须忍受一定的未知。<br>初学概念：看不懂证明，暂时不去问为什么.我们只能尝试着适应”在未知中不断前行“。<br>一个有效的策略：<strong>记录下来</strong>暂时不能解决的问题，继续前行并不是忽略这些问题。你一直在前行，你一直在积累，你一直在成长。所以，到有了答案那一刻，你不再是当初无能为力的你，你已经重生。<br>尽快接受现实，包括：<em>速成绝无可能、只有付出才有收获、完美永不存在、未知永远存在、现状无法马上摆脱</em>，<del>不仅要接受，还要牢记；不仅要牢记，还要坚信。</del>而后才能找对目标。<ul>\n<li>真正能够做对、做好的人不会在乎他人的嘲弄和打击，自己也不会这样对别人</li>\n<li>”最后期限”不是固定在将来的某个点，而是朝着你加速扑来，唯一的策略依然是：现在就开始</li>\n</ul>\n</li>\n<li>记录下来那些目前无法理解的、支持的、反对的、无所谓的论点，对无法理解的，写下自己当时的疑惑，对支持的，记录几个理由或实例，对反对的，同样记录几个理由或实例，对那些无所谓的，也要记录原因。————避免成为“选择性输入”的受害者。</li>\n<li>在被环境塑造的同时，我们也在塑造环境。</li>\n<li>“恐惧情绪”————喜悦会使人停下行动去享受，而恐惧恰恰相反，会引发一个人马上采取行动去避免危险。事实上这种出于恐惧的决策几乎总是事与愿违。</li>\n<li>积极心理学？NO，应该 <blockquote>\n<p>哪一个更合理、更现实就接受哪一个</p>\n</blockquote>\n<p>而不是</p>\n<blockquote>\n<p>哪一个更积极就接受哪一个</p>\n</blockquote>\n<p>因为后者只是自我欺骗而已。积极的并不总是好的。</p>\n</li>\n<li><code>强</code>与<code>弱</code>才是自然界中真正存在的本质，<code>善</code>与<code>恶</code>往往只是弱者一厢情愿的定义</li>\n</ul>"}],"PostAsset":[{"_id":"source/_posts/hackintosh-of-yoga710/CLOVER.zip","slug":"CLOVER.zip","post":"cl411isn200096z0hd6iz47cy","modified":0,"renderable":0},{"_id":"source/_posts/hackintosh-of-yoga710/error1.jpg","slug":"error1.jpg","post":"cl411isn200096z0hd6iz47cy","modified":0,"renderable":0},{"_id":"source/_posts/Wechat-vip-info-export/console1.png","slug":"console1.png","post":"cl411isn000036z0h14t38iai","modified":0,"renderable":0},{"_id":"source/_posts/Wechat-vip-info-export/csv.png","slug":"csv.png","post":"cl411isn000036z0h14t38iai","modified":0,"renderable":0},{"_id":"source/_posts/Wechat-vip-info-export/info_array.png","slug":"info_array.png","post":"cl411isn000036z0h14t38iai","modified":0,"renderable":0},{"_id":"source/_posts/Wechat-vip-info-export/info_es.png","slug":"info_es.png","post":"cl411isn000036z0h14t38iai","modified":0,"renderable":0},{"_id":"source/_posts/Wechat-vip-info-export/会员详情页面.png","slug":"会员详情页面.png","post":"cl411isn000036z0h14t38iai","modified":0,"renderable":0},{"_id":"source/_posts/miui-eu/bat-run.jpg","slug":"bat-run.jpg","post":"cl411isn3000d6z0h8bw8ax5c","modified":0,"renderable":0},{"_id":"source/_posts/miui-eu/git-clone.jpg","slug":"git-clone.jpg","post":"cl411isn3000d6z0h8bw8ax5c","modified":0,"renderable":0},{"_id":"source/_posts/miui-eu/mipay-extract.jpg","slug":"mipay-extract.jpg","post":"cl411isn3000d6z0h8bw8ax5c","modified":0,"renderable":0},{"_id":"source/_posts/miui-eu/screen.png","slug":"screen.png","post":"cl411isn3000d6z0h8bw8ax5c","modified":0,"renderable":0},{"_id":"source/_posts/miui-eu/screen1.jpg","slug":"screen1.jpg","post":"cl411isn3000d6z0h8bw8ax5c","modified":0,"renderable":0},{"_id":"source/_posts/use-octodash-on-your-android-phone/332-OctoDashSetup-01.png","slug":"332-OctoDashSetup-01.png","post":"cl411isn4000j6z0h90hdh9cb","modified":0,"renderable":0},{"_id":"source/_posts/use-octodash-on-your-android-phone/IMG_3031.jpeg","slug":"IMG_3031.jpeg","post":"cl411isn4000j6z0h90hdh9cb","modified":0,"renderable":0},{"_id":"source/_posts/use-octodash-on-your-android-phone/Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg","slug":"Screenshot_2022-06-03-17-06-38-324_x.org.server.jpg","post":"cl411isn4000j6z0h90hdh9cb","modified":0,"renderable":0},{"_id":"source/_posts/use-octodash-on-your-android-phone/Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg","slug":"Screenshot_2022-06-03-19-54-14-504_x.org.server.jpg","post":"cl411isn4000j6z0h90hdh9cb","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"cl411isn000036z0h14t38iai","tag_id":"cl411isn100066z0h8o8nb4hd","_id":"cl411isn3000c6z0h00gwaupf"},{"post_id":"cl411isn100056z0hgpf498oj","tag_id":"cl411isn3000b6z0h2i9x0zwj","_id":"cl411isn4000k6z0h1x570azc"},{"post_id":"cl411isn100056z0hgpf498oj","tag_id":"cl411isn3000f6z0h0xbt6kv4","_id":"cl411isn5000m6z0h0oqr3ce7"},{"post_id":"cl411isn4000l6z0hhyic0hwx","tag_id":"cl411isn3000f6z0h0xbt6kv4","_id":"cl411isn5000p6z0h45oc1lja"},{"post_id":"cl411isn200086z0hglgd83mf","tag_id":"cl411isn4000i6z0h2wwfe5lv","_id":"cl411isn6000s6z0hbyfr8l5g"},{"post_id":"cl411isn200086z0hglgd83mf","tag_id":"cl411isn3000b6z0h2i9x0zwj","_id":"cl411isn6000t6z0h4k9k1bc3"},{"post_id":"cl411isn5000q6z0heewdat8q","tag_id":"cl411isn3000f6z0h0xbt6kv4","_id":"cl411isn6000v6z0hft0iclac"},{"post_id":"cl411isn200096z0hd6iz47cy","tag_id":"cl411isn3000f6z0h0xbt6kv4","_id":"cl411isn6000w6z0h7i1ibhzf"},{"post_id":"cl411isn3000a6z0hf2319qne","tag_id":"cl411isn6000u6z0hdbindvxy","_id":"cl411isn6000y6z0hfqndbgwv"},{"post_id":"cl411isn3000d6z0h8bw8ax5c","tag_id":"cl411isn6000x6z0h4rba4wls","_id":"cl411isn600106z0h2a3b4ky8"},{"post_id":"cl411isn3000e6z0h7zwqb05f","tag_id":"cl411isn6000z6z0hha7aazdy","_id":"cl411isn600126z0h41vgbuz1"},{"post_id":"cl411isn4000g6z0hhsci7y2q","tag_id":"cl411isn6000z6z0hha7aazdy","_id":"cl411isn600146z0hg2cb3ujp"},{"post_id":"cl411isn4000g6z0hhsci7y2q","tag_id":"cl411isn3000b6z0h2i9x0zwj","_id":"cl411isn700156z0h92jwgy4u"},{"post_id":"cl411isn4000h6z0h6s229y3z","tag_id":"cl411isn600136z0h5s8ra8he","_id":"cl411isn700176z0h3iln8aak"},{"post_id":"cl411isn4000j6z0h90hdh9cb","tag_id":"cl411isn700166z0hebks6zcz","_id":"cl411isn7001a6z0hg05ya687"},{"post_id":"cl411isn4000j6z0h90hdh9cb","tag_id":"cl411isn700186z0h3bsf40qa","_id":"cl411isn7001b6z0hg9wj2w3y"},{"post_id":"cl411isn5000o6z0h70z6c232","tag_id":"cl411isn700196z0h7uwh5ggf","_id":"cl411isn7001c6z0h5etb3nr5"}],"Tag":[{"name":"Javascript","_id":"cl411isn100066z0h8o8nb4hd"},{"name":"systemctl","_id":"cl411isn3000b6z0h2i9x0zwj"},{"name":"note","_id":"cl411isn3000f6z0h0xbt6kv4"},{"name":"云服务","_id":"cl411isn4000i6z0h2wwfe5lv"},{"name":"云服务器","_id":"cl411isn6000u6z0hdbindvxy"},{"name":"MIUI","_id":"cl411isn6000x6z0h4rba4wls"},{"name":"各种Pi","_id":"cl411isn6000z6z0hha7aazdy"},{"name":"hexo_tricks","_id":"cl411isn600136z0h5s8ra8he"},{"name":"3D","_id":"cl411isn700166z0hebks6zcz"},{"name":"Octoprint","_id":"cl411isn700186z0h3bsf40qa"},{"name":"手把手教程","_id":"cl411isn700196z0h7uwh5ggf"}]}}